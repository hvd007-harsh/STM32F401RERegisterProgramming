C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE SPI
OBJECT MODULE PLACED IN .\Objects\spi.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE spi.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(D:\MS51BSP_KEIL-master\MS51F
                    -B9AE_MS51XB9AE_MS51XB9BE\Library\Device\Include;D:\MS51BSP_KEIL-master\MS51FB9AE_MS51XB9AE_MS51XB9BE\Library\StdDriver\i
                    -nc) DEBUG OBJECTEXTEND CODE LISTINCLUDE SYMBOLS PRINT(.\Listings\spi.lst) TABS(2) OBJECT(.\Objects\spi.obj)

line level    source

   1          #include "spi.h"
   1      =1  
   2      =1  
   3      =1  extern void SPI_Initial(void);
   4      =1  extern void SPI_Tx(unsigned char Data);
   5      =1  extern unsigned char SPI_Rx(unsigned char Rx_Buf);
   2          #include "MS51_16K.H"
   1      =1  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =1  /*                                                                                                        
             - */
   3      =1  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =1  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =1  /*                                                                                                        
             - */
   6      =1  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =1  
   8      =1  /*--------------------------------------------------------------------------------------*/
   9      =1  /*  ms51_16k.h                                                                         */
  10      =1  /*  Header file for Nuvoton MS51FB9AE / MS51XB9AE / MS51XB9BE                           */
  11      =1  /*--------------------------------------------------------------------------------------*/
  12      =1  
  13      =1  /******************************************************************************/
  14      =1  /*                      Macro define  header files                            */
  15      =1  /******************************************************************************/
  16      =1  #include "sfr_macro_ms51_16k.h"
   1      =2  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =2  /*                                                                                                        
             - */
   3      =2  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =2  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =2  /*                                                                                                        
             - */
   6      =2  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =2  
   8      =2  /*--------------------------------------------------------------------------------------------------------
             --*/
   9      =2  /*  sfr_macro_ms51_16k.h                                                                                  
             - */
  10      =2  /*  SFR Macro define for Nuvoton MS51FB9AE / MS51XB9AE / MS51XB9BE                                        
             - */
  11      =2  /*  <Define rule I> set or clr _ regsiter name _ register bit name                                        
             - */
  12      =2  /*--------------------------------------------------------------------------------------------------------
             --*/
  13      =2  /******************************************************************************/
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 2   

  14      =2  /*                         Keil C51 include files                            */
  15      =2  /******************************************************************************/
  16      =2  #include <intrins.h>
   1      =3  /*--------------------------------------------------------------------------
   2      =3  INTRINS.H
   3      =3  
   4      =3  Intrinsic functions for C51.
   5      =3  Copyright (c) 1988-2010 Keil Elektronik GmbH and ARM Germany GmbH
   6      =3  All rights reserved.
   7      =3  --------------------------------------------------------------------------*/
   8      =3  
   9      =3  #ifndef __INTRINS_H__
  10      =3  #define __INTRINS_H__
  11      =3  
  12      =3  #pragma SAVE
  13      =3  
  14      =3  #if defined (__CX2__)
           =3 #pragma FUNCTIONS(STATIC)
           =3 /* intrinsic functions are reentrant, but need static attribute */
           =3 #endif
  18      =3  
  19      =3  extern void          _nop_     (void);
  20      =3  extern bit           _testbit_ (bit);
  21      =3  extern unsigned char _cror_    (unsigned char, unsigned char);
  22      =3  extern unsigned int  _iror_    (unsigned int,  unsigned char);
  23      =3  extern unsigned long _lror_    (unsigned long, unsigned char);
  24      =3  extern unsigned char _crol_    (unsigned char, unsigned char);
  25      =3  extern unsigned int  _irol_    (unsigned int,  unsigned char);
  26      =3  extern unsigned long _lrol_    (unsigned long, unsigned char);
  27      =3  extern unsigned char _chkfloat_(float);
  28      =3  #if defined (__CX2__)
           =3 extern int           abs       (int);
           =3 extern void          _illop_   (void);
           =3 #endif
  32      =3  #if !defined (__CX2__)
  33      =3  extern void          _push_    (unsigned char _sfr);
  34      =3  extern void          _pop_     (unsigned char _sfr);
  35      =3  #endif
  36      =3  
  37      =3  #pragma RESTORE
  38      =3  
  39      =3  #endif
  40      =3  
  17      =2  #include <stdio.h>
   1      =3  /*--------------------------------------------------------------------------
   2      =3  STDIO.H
   3      =3  
   4      =3  Prototypes for standard I/O functions.
   5      =3  Copyright (c) 1988-2002 Keil Elektronik GmbH and Keil Software, Inc.
   6      =3  All rights reserved.
   7      =3  --------------------------------------------------------------------------*/
   8      =3  
   9      =3  #ifndef __STDIO_H__
  10      =3  #define __STDIO_H__
  11      =3  
  12      =3  #ifndef EOF
  13      =3   #define EOF -1
  14      =3  #endif
  15      =3  
  16      =3  #ifndef NULL
  17      =3   #define NULL ((void *) 0)
  18      =3  #endif
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 3   

  19      =3  
  20      =3  #ifndef _SIZE_T
  21      =3   #define _SIZE_T
  22      =3   typedef unsigned int size_t;
  23      =3  #endif
  24      =3  
  25      =3  #pragma SAVE
  26      =3  #pragma REGPARMS
  27      =3  extern char _getkey (void);
  28      =3  extern char getchar (void);
  29      =3  extern char ungetchar (char);
  30      =3  extern char putchar (char);
  31      =3  extern int printf   (const char *, ...);
  32      =3  extern int sprintf  (char *, const char *, ...);
  33      =3  extern int vprintf  (const char *, char *);
  34      =3  extern int vsprintf (char *, const char *, char *);
  35      =3  extern char *gets (char *, int n);
  36      =3  extern int scanf (const char *, ...);
  37      =3  extern int sscanf (char *, const char *, ...);
  38      =3  extern int puts (const char *);
  39      =3  
  40      =3  #pragma RESTORE
  41      =3  
  42      =3  #endif
  43      =3  
  18      =2  #include <absacc.h>
   1      =3  /*--------------------------------------------------------------------------
   2      =3  ABSACC.H
   3      =3  
   4      =3  Direct access to 8051, extended 8051 and NXP 8051MX memory areas.
   5      =3  Copyright (c) 1988-2010 Keil Elektronik GmbH and ARM Germany GmbH
   6      =3  All rights reserved.
   7      =3  --------------------------------------------------------------------------*/
   8      =3  
   9      =3  #ifndef __ABSACC_H__
  10      =3  #define __ABSACC_H__
  11      =3  
  12      =3  #define CBYTE ((unsigned char volatile code  *) 0)
  13      =3  #define DBYTE ((unsigned char volatile data  *) 0)
  14      =3  #if !defined (__CX2__)
  15      =3  #define PBYTE ((unsigned char volatile pdata *) 0)
  16      =3  #endif
  17      =3  #define XBYTE ((unsigned char volatile xdata *) 0)
  18      =3  
  19      =3  #define CWORD ((unsigned int volatile code  *) 0)
  20      =3  #define DWORD ((unsigned int volatile data  *) 0)
  21      =3  #if !defined (__CX2__)
  22      =3  #define PWORD ((unsigned int volatile pdata *) 0)
  23      =3  #endif
  24      =3  #define XWORD ((unsigned int volatile xdata *) 0)
  25      =3  
  26      =3  
  27      =3  #if defined (__CX51__) || defined (__CX2__)
           =3 #define FVAR(object, addr)   (*((object volatile far *) (addr)))
           =3 #define FARRAY(object, base) ((object volatile far *) (base))
           =3 #define FCVAR(object, addr)   (*((object const far *) (addr)))
           =3 #define FCARRAY(object, base) ((object const far *) (base))
           =3 #else
  33      =3  #define FVAR(object, addr)    (*((object volatile far *) ((addr)+0x10000L)))
  34      =3  #define FCVAR(object, addr)   (*((object const far *) ((addr)+0x810000L)))
  35      =3  #define FARRAY(object, base)  ((object volatile far *) ((base)+0x10000L))
  36      =3  #define FCARRAY(object, base) ((object const far *) ((base)+0x810000L))
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 4   

  37      =3  #endif
  38      =3  
  39      =3  #if defined (__CX2__)
           =3 #define HBYTE ((unsigned char volatile huge *)  0)
           =3 #define HWORD ((unsigned int volatile huge *)  0)
           =3 #define HVAR(object, addr)   (*((object volatile huge *) (addr)))
           =3 #define HARRAY(object, base) ((object volatile huge *) (base))
           =3 #endif
  45      =3  
  46      =3  #define CVAR(object, addr)   (*((object volatile code *) (addr)))
  47      =3  #define CARRAY(object, base) ((object volatile code *) (base))
  48      =3  #define DVAR(object, addr)   (*((object volatile data *) (addr)))
  49      =3  #define DARRAY(object, base) ((object volatile data *) (base))
  50      =3  #define XVAR(object, addr)   (*((object volatile xdata *) (addr)))
  51      =3  #define XARRAY(object, base) ((object volatile xdata *) (base))
  52      =3  
  53      =3  #endif
  19      =2  #include <string.h>
   1      =3  /*--------------------------------------------------------------------------
   2      =3  STRING.H
   3      =3  
   4      =3  String functions.
   5      =3  Copyright (c) 1988-2008 Keil Elektronik GmbH and Keil Software, Inc.
   6      =3  Copyright (c) 2008-2016 ARM Germany GmbH
   7      =3  All rights reserved.
   8      =3  --------------------------------------------------------------------------*/
   9      =3  
  10      =3  #ifndef __STRING_H__
  11      =3  #define __STRING_H__
  12      =3  
  13      =3  #ifndef _SIZE_T
           =3  #define _SIZE_T
           =3  typedef unsigned int size_t;
           =3 #endif
  17      =3  
  18      =3  #ifndef NULL
           =3  #define NULL ((void *)0)
           =3 #endif
  21      =3  
  22      =3  #pragma SAVE
  23      =3  #pragma REGPARMS
  24      =3  extern char  *strcat  (char *s1, const char *s2);
  25      =3  extern char  *strncat (char *s1, const char *s2, size_t n);
  26      =3  
  27      =3  extern char   strcmp  (const char *s1, const char *s2);
  28      =3  extern char   strncmp (const char *s1, const char *s2, size_t n);
  29      =3  
  30      =3  extern char  *strcpy  (char *s1, const char *s2);
  31      =3  extern char  *strncpy (char *s1, const char *s2, size_t n);
  32      =3  
  33      =3  extern size_t strlen  (const char *);
  34      =3  
  35      =3  extern char  *strchr  (const char *s, char c);
  36      =3  extern int    strpos  (const char *s, char c);
  37      =3  extern char  *strrchr (const char *s, char c);
  38      =3  extern int    strrpos (const char *s, char c);
  39      =3  
  40      =3  extern size_t strspn  (const char *s, const char *set);
  41      =3  extern size_t strcspn (const char *s, const char *set);
  42      =3  extern char  *strpbrk (const char *s, const char *set);
  43      =3  extern char  *strrpbrk(const char *s, const char *set);
  44      =3  extern char  *strstr  (const char *s, const char *sub);
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 5   

  45      =3  extern char  *strtok  (char *str, const char *set);
  46      =3  
  47      =3  extern char   memcmp  (const void *s1, const void *s2, size_t n);
  48      =3  extern void  *memcpy  (void *s1, const void *s2, size_t n);
  49      =3  extern void  *memchr  (const void *s, char val, size_t n);
  50      =3  extern void  *memccpy (void *s1, const void *s2, char val, size_t n);
  51      =3  extern void  *memmove (void *s1, const void *s2, size_t n);
  52      =3  extern void  *memset  (void *s, char val, size_t n);
  53      =3  #pragma RESTORE
  54      =3  
  55      =3  #endif
  20      =2  
  21      =2  /******************************************************************************/
  22      =2  /*                         Peripheral header files                            */
  23      =2  /******************************************************************************/
  24      =2  #include "function_define_ms51_16k.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   6      =3  
   7      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   8      =3  /*  function_define_ms51_16k.h                                                                            
             - */
   9      =3  /*  All IP function define for Nuvoton MS51FB9AE / MS51XB9AE / MS51XB9BE                                  
             - */
  10      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
  11      =3  
  12      =3  typedef bit                   BIT;
  13      =3  
  14      =3  typedef unsigned char         UINT8;
  15      =3  typedef unsigned int          UINT16;
  16      =3  typedef unsigned long         UINT32;
  17      =3  
  18      =3  typedef signed char           INT8;
  19      =3  typedef signed int            INT16;
  20      =3  typedef signed long           INT32;
  21      =3  
  22      =3  typedef unsigned char         uint8_t;
  23      =3  typedef unsigned int          uint16_t;
  24      =3  typedef unsigned long         uint32_t;
  25      =3  
  26      =3  typedef signed char           int8_t;
  27      =3  typedef signed int            int16_t;
  28      =3  typedef signed long           int32_t;
  29      =3  
  30      =3  #define Disable  0
  31      =3  #define Enable   1
  32      =3  
  33      =3  #define DISABLE  0
  34      =3  #define ENABLE   1 
  35      =3  
  36      =3  #define TRUE     1  
  37      =3  #define FALSE    0  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 6   

  38      =3                      
  39      =3  #define FAIL     1  
  40      =3  #define PASS     0  
  41      =3                    
  42      =3  //16 --> 8 x 2
  43      =3  #define HIBYTE(v1)              ((UINT8)((v1)>>8))                      //v1 is UINT16
  44      =3  #define LOBYTE(v1)              ((UINT8)((v1)&0xFF))
  45      =3  //8 x 2 --> 16
  46      =3  #define MAKEWORD(v1,v2)         ((((UINT16)(v1))<<8)+(UINT16)(v2))      //v1,v2 is UINT8
  47      =3  //8 x 4 --> 32
  48      =3  #define MAKELONG(v1,v2,v3,v4)   (UINT32)((v1<<32)+(v2<<16)+(v3<<8)+v4)  //v1,v2,v3,v4 is UINT8
  49      =3  //32 --> 16 x 2
  50      =3  #define YBYTE1(v1)              ((UINT16)((v1)>>16))                    //v1 is UINT32
  51      =3  #define YBYTE0(v1)              ((UINT16)((v1)&0xFFFF))
  52      =3  //32 --> 8 x 4
  53      =3  #define TBYTE3(v1)              ((UINT8)((v1)>>24))                     //v1 is UINT32
  54      =3  #define TBYTE2(v1)              ((UINT8)((v1)>>16))
  55      =3  #define TBYTE1(v1)              ((UINT8)((v1)>>8)) 
  56      =3  #define TBYTE0(v1)              ((UINT8)((v1)&0xFF))
  57      =3  
  58      =3  #define SET_BIT0        0x01
  59      =3  #define SET_BIT1        0x02
  60      =3  #define SET_BIT2        0x04
  61      =3  #define SET_BIT3        0x08
  62      =3  #define SET_BIT4        0x10
  63      =3  #define SET_BIT5        0x20
  64      =3  #define SET_BIT6        0x40
  65      =3  #define SET_BIT7        0x80
  66      =3  
  67      =3  #define CLR_BIT0        0xFE
  68      =3  #define CLR_BIT1        0xFD
  69      =3  #define CLR_BIT2        0xFB
  70      =3  #define CLR_BIT3        0xF7
  71      =3  #define CLR_BIT4        0xEF
  72      =3  #define CLR_BIT5        0xDF
  73      =3  #define CLR_BIT6        0xBF
  74      =3  #define CLR_BIT7        0x7F
  75      =3  
  76      =3  #define nop _nop_();  
  77      =3  /****************************************************************************/
  78      =3  /* Software loop delay by HIRC, about 3ms 
  79      =3  /****************************************************************************/
  80      =3  #define _delay_()                      \
  81      =3  {                                      \
  82      =3    unsigned char data i,j;              \
  83      =3      for (j=0;j<0x1A;j++)               \
  84      =3      {                                  \
  85      =3         for (i=0;i<0xff;i++)            \
  86      =3         {                               \
  87      =3            _nop_();                     \
  88      =3         }                               \
  89      =3      }                                  \
  90      =3  }
  91      =3  
  92      =3  /*****************************************************************************/
  93      =3  /*   Software reset                                                          */
  94      =3  /*****************************************************************************/
  95      =3  #define    ENABLE_SOFTWARE_RESET_TO_APROM    clr_CHPCON_BS;set_CHPCON_SWRST
  96      =3  #define    ENABLE_SOFTWARE_RESET_TO_LDROM    set_CHPCON_BS;set_CHPCON_SWRST
  97      =3  
  98      =3  /*****************************************************************************/
  99      =3  /*   Power down / idle mode define                                           */
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 7   

 100      =3  /*****************************************************************************/
 101      =3  #define    POWERDOWN_MODE_ENABLE    set_PCON_PD
 102      =3  #define    IDLE_MODE_ENABLE         set_PCON_IDLE
 103      =3  
 104      =3  /*****************************************************************************/
 105      =3  /*   BOD Define                                                              */
 106      =3  /*****************************************************************************/
 107      =3  #define    BOD_ENABLE               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=0;TA=0xAA;TA=0x55;BODCON0|=0x80;E
             -A=BIT_TMP
 108      =3  #define    BOD_RESET_ENABLE         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=0;TA=0xAA;TA=0x55;BODCON0|=0x84;E
             -A=BIT_TMP
 109      =3  #define    BOD_DISABLE              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=0;TA=0xAA;TA=0x55;BODCON0&=0x7B;E
             -A=BIT_TMP
 110      =3   
 111      =3  /****/
 112      =3  #define    ENABLE_BOD               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=0;TA=0xAA;TA=0x55;BODCON0|=0x80;E
             -A=BIT_TMP
 113      =3  #define    ENABLE_BOD_RESET         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=0;TA=0xAA;TA=0x55;BODCON0|=0x84;E
             -A=BIT_TMP
 114      =3  #define    DISABLE_BOD              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=0;TA=0xAA;TA=0x55;BODCON0&=0x7B;E
             -A=BIT_TMP
 115      =3  /*****************************************************************************************
 116      =3  * IAP function process 
 117      =3  *****************************************************************************************/
 118      =3  #define    READ_CID                0x0B
 119      =3  #define    READ_DID                0x0C
 120      =3  #define    READ_UID                0x04
 121      =3  
 122      =3  #define    PAGE_ERASE_APROM        0x22
 123      =3  #define    BYTE_READ_APROM         0x00
 124      =3  #define    BYTE_PROGRAM_APROM      0x21
 125      =3  
 126      =3  #define    PAGE_ERASE_LDROM        0x62
 127      =3  #define    BYTE_READ_LDROM         0x40
 128      =3  #define    BYTE_PROGRAM_LDROM      0x61
 129      =3  
 130      =3  #define    PAGE_ERASE_SPROM        0xA2
 131      =3  #define    BYTE_READ_SPROM         0x80
 132      =3  #define    BYTE_PROGRAM_SPROM      0xA1
 133      =3  
 134      =3  #define    PAGE_ERASE_CONFIG       0xE2
 135      =3  #define    BYTE_READ_CONFIG        0xC0
 136      =3  #define    BYTE_PROGRAM_CONFIG     0xE1
 137      =3  
 138      =3  #define    CID_READ                0x0B
 139      =3  #define    DID_READ                0x0C
 140      =3                                     
 141      =3  #define    PAGE_SIZE               128
 142      =3  
 143      =3  /*****************************************************************************************
 144      =3  *interrupt function process 
 145      =3  *****************************************************************************************/
 146      =3  #define    ENABLE_GLOBAL_INTERRUPT       EA=1
 147      =3  #define    DISABLE_GLOBAL_INTERRUPT      EA=0
 148      =3  /*ENABLE INTERRUPT*/                     
 149      =3  #define    ENABLE_ADC_INTERRUPT          set_IE_EADC
 150      =3  #define    ENABLE_BOD_INTERRUPT          set_IE_EBOD
 151      =3  #define    ENABLE_UART0_INTERRUPT        set_IE_ES
 152      =3  #define    ENABLE_TIMER1_INTERRUPT       set_IE_ET1
 153      =3  #define    ENABLE_INT1_INTERRUPT         set_IE_EX1
 154      =3  #define    ENABLE_TIMER0_INTERRUPT       set_IE_ET0
 155      =3  #define    ENABLE_INT0_INTERRUPT         set_IE_EX0
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 8   

 156      =3                                           
 157      =3  #define    ENABLE_TIMER2_INTERRUPT       set_EIE_ET2
 158      =3  #define    ENABLE_SPI0_INTERRUPT         set_EIE_ESPI
 159      =3  #define    ENABLE_PWM0_FB_INTERRUPT      set_EIE_EFB0
 160      =3  #define    ENABLE_WDT_INTERRUPT          set_EIE_EWDT
 161      =3  #define    ENABLE_PWMM0_INTERRUPT        set_EIE_EPWM
 162      =3  #define    ENABLE_CAPTURE_INTERRUPT      set_EIE_ECAP
 163      =3  #define    ENABLE_PIN_INTERRUPT          set_EIE_EPI
 164      =3  #define    ENABLE_I2C_INTERRUPT          set_EIE_EI2C
 165      =3                                           
 166      =3  #define    ENABLE_WKT_INTERRUPT          set_EIE1_EWKT
 167      =3  #define    ENABLE_TIMER3_INTERRUPT       set_EIE1_ET3
 168      =3  #define    ENABLE_UART1_INTERRUPT        set_EIE1_ES_1
 169      =3  
 170      =3  /*DISABLE INTERRUPT*/ 
 171      =3  #define    DISABLE_ADC_INTERRUPT         clr_IE_EADC
 172      =3  #define    DISABLE_BOD_INTERRUPT         clr_IE_EBOD
 173      =3  #define    DISABLE_UART0_INTERRUPT       clr_IE_ES
 174      =3  #define    DISABLE_TIMER1_INTERRUPT      clr_IE_ET1
 175      =3  #define    DISABLE_INT1_INTERRUPT        clr_IE_EX1
 176      =3  #define    DISABLE_TIMER0_INTERRUPT      clr_IE_ET0
 177      =3  #define    DISABLE_INT0_INTERRUPT        clr_IE_EX0
 178      =3            
 179      =3  #define    DISABLE_TIMER2_INTERRUPT      clr_EIE_ET2
 180      =3  #define    DISABLE_SPI0_INTERRUPT        clr_EIE_ESPI 
 181      =3  #define    DISABLE_PWM0_FB_INTERRUPT     clr_EIE_EFB0  
 182      =3  #define    DISABLE_WDT_INTERRUPT         clr_EIE_EWDT  
 183      =3  #define    DISABLE_PWMM0_INTERRUPT       clr_EIE_EPWM0  
 184      =3  #define    DISABLE_CAPTURE_INTERRUPT     clr_EIE_ECAP  
 185      =3  #define    DISABLE_PIN_INTERRUPT         clr_EIE_EPI  
 186      =3  #define    DISABLE_I2C_INTERRUPT         clr_EIE_EI2C
 187      =3            
 188      =3  #define    DISABLE_WKT_INTERRUPT         clr_EIE1_EWKT
 189      =3  #define    DISABLE_TIMER3_INTERRUPT      clr_EIE1_ET3    
 190      =3  #define    DISABLE_UART1_INTERRUPT       clr_EIE1_ES_1
 191      =3  
 192      =3  /* Setting Interrupt Priority */
 193      =3  #define   SET_INT_INT0_LEVEL0          clr_IP_PX0; clr_IPH_PX0H
 194      =3  #define   SET_INT_INT0_LEVEL1          clr_IP_PX0; set_IPH_PX0H
 195      =3  #define   SET_INT_INT0_LEVEL2          set_IP_PX0; clr_IPH_PX0H
 196      =3  #define   SET_INT_INT0_LEVEL3          set_IP_PX0; set_IPH_PX0H
 197      =3  
 198      =3  #define   SET_INT_BOD_LEVEL0           clr_IP_PBOD; clr_IPH_PBODH
 199      =3  #define   SET_INT_BOD_LEVEL1           clr_IP_PBOD; set_IPH_PBODH
 200      =3  #define   SET_INT_BOD_LEVEL2           set_IP_PBOD; clr_IPH_PBODH
 201      =3  #define   SET_INT_BOD_LEVEL3           set_IP_PBOD; set_IPH_PBODH
 202      =3  
 203      =3  #define   SET_INT_WDT_LEVEL0           clr_EIP_PWDT; clr_EIPH_PWDTH
 204      =3  #define   SET_INT_WDT_LEVEL1           clr_EIP_PWDT; set_EIPH_PWDTH
 205      =3  #define   SET_INT_WDT_LEVEL2           set_EIP_PWDT; clr_EIPH_PWDTH
 206      =3  #define   SET_INT_WDT_LEVEL3           set_EIP_PWDT; set_EIPH_PWDTH
 207      =3  
 208      =3  #define   SET_INT_TIMER0_LEVEL0        clr_IP_PT0; clr_IPH_PT0H
 209      =3  #define   SET_INT_TIMER0_LEVEL1        clr_IP_PT0; set_IPH_PT0H
 210      =3  #define   SET_INT_TIMER0_LEVEL2        set_IP_PT0; clr_IPH_PT0H
 211      =3  #define   SET_INT_TIMER0_LEVEL3        set_IP_PT0; set_IPH_PT0H
 212      =3  
 213      =3  #define   SET_INT_I2C0_LEVEL0          clr_EIP_PI2C; clr_EIPH_PI2CH
 214      =3  #define   SET_INT_I2C0_LEVEL1          clr_EIP_PI2C; set_EIPH_PI2CH
 215      =3  #define   SET_INT_I2C0_LEVEL2          set_EIP_PI2C; clr_EIPH_PI2CH
 216      =3  #define   SET_INT_I2C0_LEVEL3          set_EIP_PI2C; set_EIPH_PI2CH
 217      =3  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 9   

 218      =3  #define   SET_INT_ADC_LEVEL0           clr_IP_PADC; clr_IPH_PADCH
 219      =3  #define   SET_INT_ADC_LEVEL1           clr_IP_PADC; set_IPH_PADCH
 220      =3  #define   SET_INT_ADC_LEVEL2           set_IP_PADC; clr_IPH_PADCH
 221      =3  #define   SET_INT_ADC_LEVEL3           set_IP_PADC; set_IPH_PADCH
 222      =3  
 223      =3  #define   SET_INT_INT1_LEVEL0          clr_IP_PX1; clr_IPH_PX1H
 224      =3  #define   SET_INT_INT1_LEVEL1          clr_IP_PX1; set_IPH_PX1H
 225      =3  #define   SET_INT_INT1_LEVEL2          set_IP_PX1; clr_IPH_PX1H
 226      =3  #define   SET_INT_INT1_LEVEL3          set_IP_PX1; set_IPH_PX1H
 227      =3  
 228      =3  #define   SET_INT_PIT_LEVEL0           clr_EIP_PPI; clr_EIPH_PPIH
 229      =3  #define   SET_INT_PIT_LEVEL1           clr_EIP_PPI; set_EIPH_PPIH
 230      =3  #define   SET_INT_PIT_LEVEL2           set_EIP_PPI; clr_EIPH_PPIH
 231      =3  #define   SET_INT_PIT_LEVEL3           set_EIP_PPI; set_EIPH_PPIH
 232      =3  
 233      =3  #define   SET_INT_Timer1_LEVEL0        clr_IP_PT1; clr_IPH_PT1H
 234      =3  #define   SET_INT_Timer1_LEVEL1        clr_IP_PT1; set_IPH_PT1H
 235      =3  #define   SET_INT_Timer1_LEVEL2        set_IP_PT1; clr_IPH_PT1H
 236      =3  #define   SET_INT_Timer1_LEVEL3        set_IP_PT1; set_IPH_PT1H
 237      =3  
 238      =3  #define   SET_INT_UART0_LEVEL0         clr_IP_PS; clr_IPH_PSH
 239      =3  #define   SET_INT_UART0_LEVEL1         clr_IP_PS; set_IPH_PSH
 240      =3  #define   SET_INT_UART0_LEVEL2         set_IP_PS; clr_IPH_PSH
 241      =3  #define   SET_INT_UART0_LEVEL3         set_IP_PS; set_IPH_PSH
 242      =3  
 243      =3  #define   SET_INT_PWM0_BRAKE_LEVEL0    clr_EIP_PFB; clr_EIPH_PFBH
 244      =3  #define   SET_INT_PWM0_BRAKE_LEVEL1    clr_EIP_PFB; set_EIPH_PFBH
 245      =3  #define   SET_INT_PWM0_BRAKE_LEVEL2    set_EIP_PFB; clr_EIPH_PFBH
 246      =3  #define   SET_INT_PWM0_BRAKE_LEVEL3    set_EIP_PFB; set_EIPH_PFBH
 247      =3  
 248      =3  #define   SET_INT_SPI_LEVEL0           clr_EIP_PSPI; clr_EIPH_PSPIH
 249      =3  #define   SET_INT_SPI_LEVEL1           clr_EIP_PSPI; set_EIPH_PSPIH
 250      =3  #define   SET_INT_SPI_LEVEL2           set_EIP_PSPI; clr_EIPH_PSPIH
 251      =3  #define   SET_INT_SPI_LEVEL3           set_EIP_PSPI; set_EIPH_PSPIH
 252      =3  
 253      =3  #define   SET_INT_Timer2_LEVEL0        clr_EIP_PT2; clr_EIPH_PT2H
 254      =3  #define   SET_INT_Timer2_LEVEL1        clr_EIP_PT2; set_EIPH_PT2H
 255      =3  #define   SET_INT_Timer2_LEVEL2        set_EIP_PT2; clr_EIPH_PT2H
 256      =3  #define   SET_INT_Timer2_LEVEL3        set_EIP_PT2; set_EIPH_PT2H
 257      =3  
 258      =3  #define   SET_INT_CAPTURE_LEVEL0       clr_EIP_PCAP; clr_EIPH_PCAPH
 259      =3  #define   SET_INT_Capture_LEVEL1       clr_EIP_PCAP; set_EIPH_PCAPH
 260      =3  #define   SET_INT_Capture_LEVEL2       set_EIP_PCAP; clr_EIPH_PCAPH
 261      =3  #define   SET_INT_Capture_LEVEL3       set_EIP_PCAP; set_EIPH_PCAPH
 262      =3  
 263      =3  #define   SET_INT_PWM_LEVEL0           clr_EIP_PPWM; clr_EIPH_PPWMH
 264      =3  #define   SET_INT_PWM_LEVEL1           clr_EIP_PPWM; set_EIPH_PPWMH
 265      =3  #define   SET_INT_PWM_LEVEL2           set_EIP_PPWM; clr_EIPH_PPWMH
 266      =3  #define   SET_INT_PWM_LEVEL3           set_EIP_PPWM; set_EIPH_PPWMH
 267      =3  
 268      =3  #define   SET_INT_UART1_LEVEL0         clr_EIP1_PS_1; clr_EIPH1_PSH_1
 269      =3  #define   SET_INT_UART1_LEVEL1         clr_EIP1_PS_1; set_EIPH1_PSH_1
 270      =3  #define   SET_INT_UART1_LEVEL2         set_EIP1_PS_1; clr_EIPH1_PSH_1
 271      =3  #define   SET_INT_UART1_LEVEL3         set_EIP1_PS_1; set_EIPH1_PSH_1
 272      =3  
 273      =3  #define   SET_INT_Timer3_LEVEL0        clr_EIP1_PT3; clr_EIPH1_PT3H
 274      =3  #define   SET_INT_Timer3_LEVEL1        clr_EIP1_PT3; set_EIPH1_PT3H
 275      =3  #define   SET_INT_Timer3_LEVEL2        set_EIP1_PT3; clr_EIPH1_PT3H
 276      =3  #define   SET_INT_Timer3_LEVEL3        set_EIP1_PT3; set_EIPH1_PT3H
 277      =3  
 278      =3  #define   SET_INT_WKT_LEVEL0           clr_EIP1_PWKT; clr_EIPH1_PWKTH
 279      =3  #define   SET_INT_WKT_LEVEL1           clr_EIP1_PWKT; set_EIPH1_PWKTH
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 10  

 280      =3  #define   SET_INT_WKT_LEVEL2           set_EIP1_PWKT; clr_EIPH1_PWKTH
 281      =3  #define   SET_INT_WKT_LEVEL3           set_EIP1_PWKT; set_EIPH1_PWKTH
 282      =3  
 283      =3  /* Clear Interrupt Flag */
 284      =3  #define    CLEAR_ADC_INTERRUPT_FLAG          clr_ADCCON0_ADCF
 285      =3  #define    CLEAR_BOD_INTERRUPT_FLAG          clr_BODCON0_BOF
 286      =3  #define    CLEAR_BOD_RESET_FLAG              clr_BODCON0_BORF
 287      =3  #define    CLEAR_UART0_INTERRUPT_TX_FLAG     clr_SCON_TI
 288      =3  #define    CLEAR_UART0_INTERRUPT_RX_FLAG     clr_SCON_RI
 289      =3  #define    CLEAR_TIMER1_INTERRUPT_FLAG       clr_TCON_TF1
 290      =3  #define    CLEAR_INT1_INTERRUPT_FLAG         clr_TCON_IE1
 291      =3  #define    CLEAR_TIMER0_INTERRUPT_FLAG       clr_TCON_TF0
 292      =3  #define    CLEAR_INT0_INTERRUPT_FLAG         clr_TCON_IE0
 293      =3  #define    CLEAR_TIMER2_INTERRUPT_FLAG       clr_T2CON_TF2
 294      =3  #define    CLEAR_SPI0_INTERRUPT_FLAG         clr_SPSR_SPIF
 295      =3  #define    CLEAR_PWM0_FB_INTERRUPT_FLAG      clr_PWM0FBD_FBF
 296      =3  #define    CLEAR_WDT_INTERRUPT_FLAG          clr_WDCON_WDTF
 297      =3  #define    CLEAR_PWM0_INTERRUPT_FLAG         clr_PWM1CON0_PWMF
 298      =3  #define    CLEAR_CAPTURE_INTERRUPT_IC0_FLAG  clr_CAPCON0_CAPF0
 299      =3  #define    CLEAR_CAPTURE_INTERRUPT_IC1_FLAG  clr_CAPCON0_CAPF1
 300      =3  #define    CLEAR_CAPTURE_INTERRUPT_IC2_FLAG  clr_CAPCON0_CAPF2
 301      =3  #define    CLEAR_PIN_INTERRUPT_PIT0_FLAG     clr_PIF_PIF0
 302      =3  #define    CLEAR_PIN_INTERRUPT_PIT1_FLAG     clr_PIF_PIF1
 303      =3  #define    CLEAR_PIN_INTERRUPT_PIT2_FLAG     clr_PIF_PIF2
 304      =3  #define    CLEAR_PIN_INTERRUPT_PIT3_FLAG     clr_PIF_PIF3
 305      =3  #define    CLEAR_PIN_INTERRUPT_PIT4_FLAG     clr_PIF_PIF4
 306      =3  #define    CLEAR_PIN_INTERRUPT_PIT5_FLAG     clr_PIF_PIF5
 307      =3  #define    CLEAR_PIN_INTERRUPT_PIT6_FLAG     clr_PIF_PIF6
 308      =3  #define    CLEAR_PIN_INTERRUPT_PIT7_FLAG     clr_PIF_PIF7
 309      =3  #define    CLEAR_I2C_TIMEOUT_INTERRUPT_FLAG  clr_I2TOC_I2TOF
 310      =3  #define    CLEAR_WKT_INTERRUPT_FLAG          clr_WKCON_WKTF
 311      =3  #define    CLEAR_TIMER3_INTERRUPT_FLAG       clr_T3CON_TF3
 312      =3  #define    CLEAR_UART1_INTERRUPT_FLAG        clr_EIE1_ES_1 
 313      =3  
 314      =3  /*****************************************************************************************
 315      =3  * For GPIO INIT setting 
 316      =3  *****************************************************************************************/
 317      =3  //------------------- Define Port as Quasi mode  -------------------
 318      =3  #define    P00_QUASI_MODE            clr_SFRS_SFRPAGE;P0M1&=0xFE;P0M2&=0xFE
 319      =3  #define    P01_QUASI_MODE            clr_SFRS_SFRPAGE;P0M1&=0xFD;P0M2&=0xFD
 320      =3  #define    P02_QUASI_MODE            clr_SFRS_SFRPAGE;P0M1&=0xFB;P0M2&=0xFB
 321      =3  #define    P03_QUASI_MODE            clr_SFRS_SFRPAGE;P0M1&=0xF7;P0M2&=0xF7
 322      =3  #define    P04_QUASI_MODE            clr_SFRS_SFRPAGE;P0M1&=0xEF;P0M2&=0xEF
 323      =3  #define    P05_QUASI_MODE            clr_SFRS_SFRPAGE;P0M1&=0xDF;P0M2&=0xDF
 324      =3  #define    P06_QUASI_MODE            clr_SFRS_SFRPAGE;P0M1&=0xBF;P0M2&=0xBF
 325      =3  #define    P07_QUASI_MODE            clr_SFRS_SFRPAGE;P0M1&=0x7F;P0M2&=0x7F
 326      =3  #define    P10_QUASI_MODE            clr_SFRS_SFRPAGE;P1M1&=0xFE;P1M2&=0xFE
 327      =3  #define    P11_QUASI_MODE            clr_SFRS_SFRPAGE;P1M1&=0xFD;P1M2&=0xFD
 328      =3  #define    P12_QUASI_MODE            clr_SFRS_SFRPAGE;P1M1&=0xFB;P1M2&=0xFB
 329      =3  #define    P13_QUASI_MODE            clr_SFRS_SFRPAGE;P1M1&=0xF7;P1M2&=0xF7
 330      =3  #define    P14_QUASI_MODE            clr_SFRS_SFRPAGE;P1M1&=0xEF;P1M2&=0xEF
 331      =3  #define    P15_QUASI_MODE            clr_SFRS_SFRPAGE;P1M1&=0xDF;P1M2&=0xDF
 332      =3  #define    P16_QUASI_MODE            clr_SFRS_SFRPAGE;P1M1&=0xBF;P1M2&=0xBF
 333      =3  #define    P17_QUASI_MODE            clr_SFRS_SFRPAGE;P1M1&=0x7F;P1M2&=0x7F
 334      =3  #define    P30_QUASI_MODE            clr_SFRS_SFRPAGE;P3M1&=0xFE;P3M2&=0xFE
 335      =3  #define    ALL_GPIO_QUASI_MODE       clr_SFRS_SFRPAGE;P0M1=0;P0M2=0;P1M1=0;P1M2=0;P3M1=0;P3M2=0
 336      =3  //------------------- Define Port as Push Pull mode -------------------
 337      =3  #define    P00_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P0M1&=0xFE;P0M2|=0x01
 338      =3  #define    P01_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P0M1&=0xFD;P0M2|=0x02
 339      =3  #define    P02_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P0M1&=0xFB;P0M2|=0x04
 340      =3  #define    P03_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P0M1&=0xF7;P0M2|=0x08
 341      =3  #define    P04_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P0M1&=0xEF;P0M2|=0x10
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 11  

 342      =3  #define    P05_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P0M1&=0xDF;P0M2|=0x20
 343      =3  #define    P06_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P0M1&=0xBF;P0M2|=0x40
 344      =3  #define    P07_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P0M1&=0x7F;P0M2|=0x80
 345      =3  #define    P10_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P1M1&=0xFE;P1M2|=0x01
 346      =3  #define    P11_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P1M1&=0xFD;P1M2|=0x02
 347      =3  #define    P12_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P1M1&=0xFB;P1M2|=0x04
 348      =3  #define    P13_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P1M1&=0xF7;P1M2|=0x08
 349      =3  #define    P14_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P1M1&=0xEF;P1M2|=0x10
 350      =3  #define    P15_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P1M1&=0xDF;P1M2|=0x20
 351      =3  #define    P16_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P1M1&=0xBF;P1M2|=0x40
 352      =3  #define    P17_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P1M1&=0x7F;P1M2|=0x80
 353      =3  #define    P30_PUSHPULL_MODE         clr_SFRS_SFRPAGE;P3M1&=0xFE;P3M2|=0x01
 354      =3  #define    ALL_GPIO_PUSHPULL_MODE    clr_SFRS_SFRPAGE;P0M1=0;P0M2=0xFF;P1M1=0;P1M2=0xFF;P3M1=0;P3M2=0xFF
 355      =3  //------------------- Define Port as Input Only mode -------------------
 356      =3  #define    P00_INPUT_MODE            clr_SFRS_SFRPAGE;P0M1|=0x01;P0M2&=0xFE
 357      =3  #define    P01_INPUT_MODE            clr_SFRS_SFRPAGE;P0M1|=0x02;P0M2&=0xFD
 358      =3  #define    P02_INPUT_MODE            clr_SFRS_SFRPAGE;P0M1|=0x04;P0M2&=0xFB
 359      =3  #define    P03_INPUT_MODE            clr_SFRS_SFRPAGE;P0M1|=0x08;P0M2&=0xF7
 360      =3  #define    P04_INPUT_MODE            clr_SFRS_SFRPAGE;P0M1|=0x10;P0M2&=0xEF
 361      =3  #define    P05_INPUT_MODE            clr_SFRS_SFRPAGE;P0M1|=0x20;P0M2&=0xDF
 362      =3  #define    P06_INPUT_MODE            clr_SFRS_SFRPAGE;P0M1|=0x40;P0M2&=0xBF
 363      =3  #define    P07_INPUT_MODE            clr_SFRS_SFRPAGE;P0M1|=0x80;P0M2&=0x7F
 364      =3  #define    P10_INPUT_MODE            clr_SFRS_SFRPAGE;P1M1|=0x01;P1M2&=0xFE
 365      =3  #define    P11_INPUT_MODE            clr_SFRS_SFRPAGE;P1M1|=0x02;P1M2&=0xFD
 366      =3  #define    P12_INPUT_MODE            clr_SFRS_SFRPAGE;P1M1|=0x04;P1M2&=0xFB
 367      =3  #define    P13_INPUT_MODE            clr_SFRS_SFRPAGE;P1M1|=0x08;P1M2&=0xF7
 368      =3  #define    P14_INPUT_MODE            clr_SFRS_SFRPAGE;P1M1|=0x10;P1M2&=0xEF
 369      =3  #define    P15_INPUT_MODE            clr_SFRS_SFRPAGE;P1M1|=0x20;P1M2&=0xDF
 370      =3  #define    P16_INPUT_MODE            clr_SFRS_SFRPAGE;P1M1|=0x40;P1M2&=0xBF
 371      =3  #define    P17_INPUT_MODE            clr_SFRS_SFRPAGE;P1M1|=0x80;P1M2&=0x7F
 372      =3  #define    P30_INPUT_MODE            clr_SFRS_SFRPAGE;P3M1|=0x01;P3M2&=0xFE
 373      =3  #define    ALL_GPIO_INPUT_MODE       clr_SFRS_SFRPAGE;P0M1=0xFF;P0M2=0;P1M1=0xFF;P1M2=0;P3M1=0xFF;P3M2=0
 374      =3  //-------------------Define Port as Open Drain mode -------------------
 375      =3  #define    P00_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P0M1|=0x01;P0M2|=0x01
 376      =3  #define    P01_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P0M1|=0x02;P0M2|=0x02
 377      =3  #define    P02_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P0M1|=0x04;P0M2|=0x04
 378      =3  #define    P03_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P0M1|=0x08;P0M2|=0x08
 379      =3  #define    P04_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P0M1|=0x10;P0M2|=0x10
 380      =3  #define    P05_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P0M1|=0x20;P0M2|=0x20
 381      =3  #define    P06_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P0M1|=0x40;P0M2|=0x40
 382      =3  #define    P07_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P0M1|=0x80;P0M2|=0x80
 383      =3  #define    P10_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P1M1|=0x01;P1M2|=0x01
 384      =3  #define    P11_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P1M1|=0x02;P1M2|=0x02
 385      =3  #define    P12_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P1M1|=0x04;P1M2|=0x04
 386      =3  #define    P13_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P1M1|=0x08;P1M2|=0x08
 387      =3  #define    P14_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P1M1|=0x10;P1M2|=0x10
 388      =3  #define    P15_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P1M1|=0x20;P1M2|=0x20
 389      =3  #define    P16_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P1M1|=0x40;P1M2|=0x40
 390      =3  #define    P17_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P1M1|=0x80;P1M2|=0x80
 391      =3  #define    P30_OPENDRAIN_MODE        clr_SFRS_SFRPAGE;P3M1|=0x01;P3M2|=0x01
 392      =3  #define    ALL_GPIO_OPENDRAIN_MODE   clr_SFRS_SFRPAGE;P0M1=0xFF;P0M2=0xFF;P1M1=0xFF;P1M2=0xFF;P3M1=0xFF;P3
             -M2=0xFF
 393      =3  
 394      =3  /*****************************************************************************************
 395      =3  * For GPIO TTL/Schmitt Trig Type Seetting 
 396      =3  *****************************************************************************************/
 397      =3  //------------------- Enable GPIO Schmitt Trigger Mode  -------------------
 398      =3  #define    P00_ST_ENABLE          SFRS=1;P0S|=0x01
 399      =3  #define    P01_ST_ENABLE          SFRS=1;P0S|=0x02
 400      =3  #define    P02_ST_ENABLE          SFRS=1;P0S|=0x04
 401      =3  #define    P03_ST_ENABLE          SFRS=1;P0S|=0x08
 402      =3  #define    P04_ST_ENABLE          SFRS=1;P0S|=0x10
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 12  

 403      =3  #define    P05_ST_ENABLE          SFRS=1;P0S|=0x20
 404      =3  #define    P06_ST_ENABLE          SFRS=1;P0S|=0x40
 405      =3  #define    P07_ST_ENABLE          SFRS=1;P0S|=0x80
 406      =3  #define    P10_ST_ENABLE          SFRS=1;P1S|=0x01
 407      =3  #define    P11_ST_ENABLE          SFRS=1;P1S|=0x02
 408      =3  #define    P12_ST_ENABLE          SFRS=1;P1S|=0x04
 409      =3  #define    P13_ST_ENABLE          SFRS=1;P1S|=0x08
 410      =3  #define    P14_ST_ENABLE          SFRS=1;P1S|=0x10
 411      =3  #define    P15_ST_ENABLE          SFRS=1;P1S|=0x20
 412      =3  #define    P16_ST_ENABLE          SFRS=1;P1S|=0x40
 413      =3  #define    P17_ST_ENABLE          SFRS=1;P1S|=0x80
 414      =3  #define    P20_ST_ENABLE          SFRS=1;P2S|=0x01
 415      =3  #define    P30_ST_ENABLE          SFRS=1;P3S|=0x01
 416      =3  //------------------- Enable GPIO TTL Mode  -------------------
 417      =3  #define    P00_TTL_ENABLE          SFRS=1;P0S&=0xFE
 418      =3  #define    P01_TTL_ENABLE          SFRS=1;P0S&=0xFD
 419      =3  #define    P02_TTL_ENABLE          SFRS=1;P0S&=0xFB
 420      =3  #define    P03_TTL_ENABLE          SFRS=1;P0S&=0xF7
 421      =3  #define    P04_TTL_ENABLE          SFRS=1;P0S&=0xEF
 422      =3  #define    P05_TTL_ENABLE          SFRS=1;P0S&=0xDF
 423      =3  #define    P06_TTL_ENABLE          SFRS=1;P0S&=0xBF
 424      =3  #define    P07_TTL_ENABLE          SFRS=1;P0S&=0x7F
 425      =3  #define    P10_TTL_ENABLE          SFRS=1;P1S&=0xFE
 426      =3  #define    P11_TTL_ENABLE          SFRS=1;P1S&=0xFD
 427      =3  #define    P12_TTL_ENABLE          SFRS=1;P1S&=0xFB
 428      =3  #define    P13_TTL_ENABLE          SFRS=1;P1S&=0xF7
 429      =3  #define    P14_TTL_ENABLE          SFRS=1;P1S&=0xEF
 430      =3  #define    P15_TTL_ENABLE          SFRS=1;P1S&=0xDF
 431      =3  #define    P16_TTL_ENABLE          SFRS=1;P1S&=0xBF
 432      =3  #define    P17_TTL_ENABLE          SFRS=1;P1S&=0x7F
 433      =3  #define    P20_TTL_ENABLE          SFRS=1;P2S&=0xFE
 434      =3  #define    P30_TTL_ENABLE          SFRS=1;P3S&=0xFE
 435      =3  
 436      =3  /****************************************************************************
 437      =3     Enable INT port 0~3
 438      =3  ***************************************************************************/
 439      =3  #define    ENABLE_INT_PORT0               PICON &= 0xFB;
 440      =3  #define    ENABLE_INT_PORT1               PICON |= 0x01;
 441      =3  #define    ENABLE_INT_PORT2               PICON |= 0x02;
 442      =3  #define    ENABLE_INT_PORT3               PICON |= 0x03;
 443      =3  /*****************************************************************************
 444      =3   Enable each bit low level trig mode
 445      =3  *****************************************************************************/
 446      =3  #define    ENABLE_BIT7_LOWLEVEL_TRIG      PICON&=0x7F;PINEN|=0x80;PIPEN&=0x7F
 447      =3  #define    ENABLE_BIT6_LOWLEVEL_TRIG      PICON&=0x7F;PINEN|=0x40;PIPEN&=0xBF
 448      =3  #define    ENABLE_BIT5_LOWLEVEL_TRIG      PICON&=0xBF;PINEN|=0x20;PIPEN&=0xDF
 449      =3  #define    ENABLE_BIT4_LOWLEVEL_TRIG      PICON&=0xBF;PINEN|=0x10;PIPEN&=0xEF
 450      =3  #define    ENABLE_BIT3_LOWLEVEL_TRIG      PICON&=0xDF;PINEN|=0x08;PIPEN&=0xF7
 451      =3  #define    ENABLE_BIT2_LOWLEVEL_TRIG      PICON&=0xEF;PINEN|=0x04;PIPEN&=0xFB
 452      =3  #define    ENABLE_BIT1_LOWLEVEL_TRIG      PICON&=0xF7;PINEN|=0x02;PIPEN&=0xFD
 453      =3  #define    ENABLE_BIT0_LOWLEVEL_TRIG      PICON&=0xFD;PINEN|=0x01;PIPEN&=0xFE
 454      =3  /*****************************************************************************
 455      =3   Enable each bit high level trig mode
 456      =3  *****************************************************************************/
 457      =3  #define    ENABLE_BIT7_HIGHLEVEL_TRIG     PICON&=0x7F;PINEN&=0x7F;PIPEN|=0x80
 458      =3  #define    ENABLE_BIT6_HIGHLEVEL_TRIG     PICON&=0x7F;PINEN&=0xBF;PIPEN|=0x40
 459      =3  #define    ENABLE_BIT5_HIGHLEVEL_TRIG     PICON&=0xBF;PINEN&=0xDF;PIPEN|=0x20
 460      =3  #define    ENABLE_BIT4_HIGHLEVEL_TRIG     PICON&=0xBF;PINEN&=0xEF;PIPEN|=0x10
 461      =3  #define    ENABLE_BIT3_HIGHLEVEL_TRIG     PICON&=0xDF;PINEN&=0xF7;PIPEN|=0x08
 462      =3  #define    ENABLE_BIT2_HIGHLEVEL_TRIG     PICON&=0xEF;PINEN&=0xFB;PIPEN|=0x04
 463      =3  #define    ENABLE_BIT1_HIGHLEVEL_TRIG     PICON&=0xF7;PINEN&=0xFD;PIPEN|=0x02
 464      =3  #define    ENABLE_BIT0_HIGHLEVEL_TRIG     PICON&=0xFD;PINEN&=0xFE;PIPEN|=0x01
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 13  

 465      =3  /*****************************************************************************
 466      =3   Enable each bit falling edge trig mode
 467      =3  *****************************************************************************/
 468      =3  #define    ENABLE_BIT7_FALLINGEDGE_TRIG   PICON|=0x80;PINEN|=0x80;PIPEN&=0x7F
 469      =3  #define    ENABLE_BIT6_FALLINGEDGE_TRIG   PICON|=0x80;PINEN|=0x40;PIPEN&=0xBF
 470      =3  #define    ENABLE_BIT5_FALLINGEDGE_TRIG   PICON|=0x40;PINEN|=0x20;PIPEN&=0xDF
 471      =3  #define    ENABLE_BIT4_FALLINGEDGE_TRIG   PICON|=0x40;PINEN|=0x10;PIPEN&=0xEF
 472      =3  #define    ENABLE_BIT3_FALLINGEDGE_TRIG   PICON|=0x20;PINEN|=0x08;PIPEN&=0xF7
 473      =3  #define    ENABLE_BIT2_FALLINGEDGE_TRIG   PICON|=0x10;PINEN|=0x04;PIPEN&=0xFB
 474      =3  #define    ENABLE_BIT1_FALLINGEDGE_TRIG   PICON|=0x08;PINEN|=0x02;PIPEN&=0xFD
 475      =3  #define    ENABLE_BIT0_FALLINGEDGE_TRIG   PICON|=0x04;PINEN|=0x01;PIPEN&=0xFE
 476      =3  /*****************************************************************************
 477      =3   Enable each bit rasing edge trig mode
 478      =3  *****************************************************************************/
 479      =3  #define    ENABLE_BIT7_RISINGEDGE_TRIG    PICON|=0x80;PINEN&=0x7F;PIPEN|=0x80
 480      =3  #define    ENABLE_BIT6_RISINGEDGE_TRIG    PICON|=0x80;PINEN&=0xBF;PIPEN|=0x40
 481      =3  #define    ENABLE_BIT5_RISINGEDGE_TRIG    PICON|=0x40;PINEN&=0xDF;PIPEN|=0x20
 482      =3  #define    ENABLE_BIT4_RISINGEDGE_TRIG    PICON|=0x40;PINEN&=0xEF;PIPEN|=0x10
 483      =3  #define    ENABLE_BIT3_RISINGEDGE_TRIG    PICON|=0x20;PINEN&=0xF7;PIPEN|=0x08
 484      =3  #define    ENABLE_BIT2_RISINGEDGE_TRIG    PICON|=0x10;PINEN&=0xFB;PIPEN|=0x04
 485      =3  #define    ENABLE_BIT1_RISINGEDGE_TRIG    PICON|=0x08;PINEN&=0xFD;PIPEN|=0x02
 486      =3  #define    ENABLE_BIT0_RISINGEDGE_TRIG    PICON|=0x04;PINEN&=0xFE;PIPEN|=0x01
 487      =3  /*****************************************************************************
 488      =3   Enable each bit both edge trig mode
 489      =3  *****************************************************************************/
 490      =3  #define    ENABLE_BIT7_BOTHEDGE_TRIG      PICON|=0x80;PINEN|=0x80;PIPEN|=0x80
 491      =3  #define    ENABLE_BIT6_BOTHEDGE_TRIG      PICON|=0x80;PINEN|=0x40;PIPEN|=0x40
 492      =3  #define    ENABLE_BIT5_BOTHEDGE_TRIG      PICON|=0x40;PINEN|=0x20;PIPEN|=0x20
 493      =3  #define    ENABLE_BIT4_BOTHEDGE_TRIG      PICON|=0x40;PINEN|=0x10;PIPEN|=0x10
 494      =3  #define    ENABLE_BIT3_BOTHEDGE_TRIG      PICON|=0x20;PINEN|=0x08;PIPEN|=0x08
 495      =3  #define    ENABLE_BIT2_BOTHEDGE_TRIG      PICON|=0x10;PINEN|=0x04;PIPEN|=0x04
 496      =3  #define    ENABLE_BIT1_BOTHEDGE_TRIG      PICON|=0x08;PINEN|=0x02;PIPEN|=0x02
 497      =3  #define    ENABLE_BIT0_BOTHEDGE_TRIG      PICON|=0x04;PINEN|=0x01;PIPEN|=0x01
 498      =3  
 499      =3  /* ------------------------ TIMER Value define  ------------------------- */
 500      =3  /* setting is base on " option -> C51 -> Preprocesser Symbols -> Define "  */
 501      =3  
 502      =3  /* define timer base value Fsys = 8MHz  */
 503      =3  /* @note    Since 8M instruction and calculate speed limitaion. the timer counter value should be less tha
             -n actullay. */
 504      =3  #define    TIMER_DIV12_VALUE_1ms_FOSC_7372800      65536-614        /* 614*12    /7372800= 1 mS,   (Timer 
             -divider = 12  for TM0/TM1) */
 505      =3  #define    TIMER_DIV12_VALUE_10ms_FOSC_7372800     65536-6144       /* 6144*12   /7372800= 10 mS   (Timer 
             -divider = 12  for TM0/TM1) */
 506      =3  #define    TIMER_DIV12_VALUE_50ms_FOSC_7372800     65536-30720      /* 30720*12  /7372800= 40 ms   (Timer 
             -divider = 12  for TM0/TM1) */
 507      =3  #define    TIMER_DIV4_VALUE_200us_FOSC_7372800     65536-368        /* 368*4     /7372800= 200 us  (Timer 
             -divider = 4   for TM2/TM3) */
 508      =3  #define    TIMER_DIV4_VALUE_500us_FOSC_7372800     65536-922        /* 922*4     /7372800= 500 us  (Timer 
             -divider = 4   for TM2/TM3) */
 509      =3  #define    TIMER_DIV4_VALUE_1ms_FOSC_7372800       65536-1843       /* 1843*4    /7372800= 1 mS,   (Timer 
             -divider = 4   for TM2/TM3) */
 510      =3  #define    TIMER_DIV4_VALUE_10ms_FOSC_7372800      65536-18432      /* 18432*4   /7372800= 10 mS,  (Timer 
             -divider = 4   for TM2/TM3) */
 511      =3  #define    TIMER_DIV16_VALUE_10ms_FOSC_7372800     65536-4608       /* 4608*16   /7372800= 10 ms   (Timer 
             -divider = 16  for TM2/TM3) */
 512      =3  #define    TIMER_DIV64_VALUE_30ms_FOSC_7372800     65536-3456       /* 3456*64   /7372800= 30 ms   (Timer 
             -divider = 64  for TM2/TM3) */
 513      =3  #define    TIMER_DIV128_VALUE_1ms_FOSC_7372800     65536-57         /* 57*128    /7372800= 1 ms    (Timer 
             -divider = 128 for TM2/TM3) */
 514      =3  #define    TIMER_DIV128_VALUE_10ms_FOSC_7372800    65536-576        /* 576*128   /7372800= 10 ms   (Timer 
             -divider = 128 for TM2/TM3) */
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 14  

 515      =3  #define    TIMER_DIV128_VALUE_100ms_FOSC_7372800   65536-5760       /* 5760*128  /7372800= 100 ms  (Timer 
             -divider = 128 for TM2/TM3) */
 516      =3  #define    TIMER_DIV128_VALUE_200ms_FOSC_7372800   65536-11520      /* 11520*128 /7372800= 200 ms  (Timer 
             -divider = 128 for TM2/TM3) */
 517      =3  #define    TIMER_DIV256_VALUE_500ms_FOSC_7372800   65536-14400      /* 14400*256 /7372800= 500 ms  (Timer 
             -divider = 256 for TM2/TM3) */
 518      =3  #define    TIMER_DIV512_VALUE_100ms_FOSC_7372800   65536-1440       /* 1440*512  /7372800= 100ms.  (Timer 
             -Divider = 512 for TM2/TM3) */
 519      =3  #define    TIMER_DIV512_VALUE_1s_FOSC_7372800      65536-14400      /* 14400*512 /7372800= 1 s.    (Timer 
             -Divider = 512 for TM2/TM3) */
 520      =3  /* define timer base value Fsys = 8MHz  */
 521      =3  /* @note    Since 8M instruction and calculate speed limitaion. the timer counter value should be less tha
             -n actullay. */
 522      =3  #define    TIMER_DIV12_VALUE_1ms_FOSC_8000000      65536-667        /* 667*12    /8000000 = 1 mS,   (Timer
             - divider = 12  for TM0/TM1) */
 523      =3  #define    TIMER_DIV12_VALUE_10ms_FOSC_8000000     65536-6667       /* 6667*12   /8000000 = 10 mS   (Timer
             - divider = 12  for TM0/TM1) */
 524      =3  #define    TIMER_DIV12_VALUE_50ms_FOSC_8000000     65536-33335      /* 33335*12  /8000000 = 40 ms   (Timer
             - divider = 12  for TM0/TM1) */
 525      =3  #define    TIMER_DIV4_VALUE_200us_FOSC_8000000     65536-400        /* 400*4     /8000000 = 200 us  (Timer
             - divider = 4   for TM2/TM3) */
 526      =3  #define    TIMER_DIV4_VALUE_500us_FOSC_8000000     65536-1000       /* 1000*4    /8000000 = 500 us  (Timer
             - divider = 4   for TM2/TM3) */
 527      =3  #define    TIMER_DIV4_VALUE_1ms_FOSC_8000000       65536-2000       /* 2000*4    /8000000 = 1 mS,   (Timer
             - divider = 4   for TM2/TM3) */
 528      =3  #define    TIMER_DIV4_VALUE_10ms_FOSC_8000000      65536-20000      /* 20000*4   /8000000 = 10 mS,  (Timer
             - divider = 4   for TM2/TM3) */
 529      =3  #define    TIMER_DIV16_VALUE_10ms_FOSC_8000000     65536-5000       /* 5000*16   /8000000 = 10 ms   (Timer
             - divider = 16  for TM2/TM3) */
 530      =3  #define    TIMER_DIV64_VALUE_30ms_FOSC_8000000     65536-3750       /* 3750*64   /8000000 = 30 ms   (Timer
             - divider = 64  for TM2/TM3) */
 531      =3  #define    TIMER_DIV128_VALUE_1ms_FOSC_8000000     65536-60         /* 62*128    /8000000 = 1 ms    (Timer
             - divider = 128 for TM2/TM3) */
 532      =3  #define    TIMER_DIV128_VALUE_10ms_FOSC_8000000    65536-625        /* 625*128   /8000000 = 10 ms   (Timer
             - divider = 128 for TM2/TM3) */
 533      =3  #define    TIMER_DIV128_VALUE_100ms_FOSC_8000000   65536-6250       /* 6250*128  /8000000 = 100 ms  (Timer
             - divider = 128 for TM2/TM3) */
 534      =3  #define    TIMER_DIV128_VALUE_200ms_FOSC_8000000   65536-12500      /* 12500*128 /8000000 = 200 ms  (Timer
             - divider = 128 for TM2/TM3) */
 535      =3  #define    TIMER_DIV256_VALUE_500ms_FOSC_8000000   65536-15625      /* 15625*256 /8000000 = 500 ms  (Timer
             - divider = 256 for TM2/TM3) */
 536      =3  #define    TIMER_DIV512_VALUE_100ms_FOSC_8000000   65536-1562       /* 1562*512  /8000000 = 100ms.  (Timer
             - Divider = 512 for TM2/TM3) */
 537      =3  #define    TIMER_DIV512_VALUE_1s_FOSC_8000000      65536-15625      /* 15625*512 /8000000 = 1 s.    (Timer
             - Divider = 512 for TM2/TM3) */
 538      =3  /* define timer base value Fsys = 11.0592MHz  */
 539      =3  #define    TIMER_DIV12_VALUE_10us_FOSC_11059200    65536-9          /* 9*12      /11059200 = 10 uS,  (Time
             -r divider = 12  for TM0/TM1) */
 540      =3  #define    TIMER_DIV12_VALUE_1ms_FOSC_11059200     65536-923        /* 923*12    /11059200 = 1 mS    (Time
             -r divider = 12  for TM0/TM1) */
 541      =3  #define    TIMER_DIV12_VALUE_10ms_FOSC_11059200    65536-9216       /* 18432*12  /11059200 = 10 ms   (Time
             -r divider = 12  for TM0/TM1) */
 542      =3  #define    TIMER_DIV4_VALUE_10us_FOSC_11059200     65536-28         /* 28*4      /11059200 = 10 uS   (Time
             -r divider = 4   for TM2/TM3) */
 543      =3  #define    TIMER_DIV4_VALUE_1ms_FOSC_11059200      65536-2765       /* 2765*4    /11059200 = 1 mS    (Time
             -r divider = 4   for TM2/TM3) */
 544      =3  #define    TIMER_DIV4_VALUE_100us_FOSC_11059200    65536-277        /* 553*4     /11059200 = 100 us  (Time
             -r divider = 4   for TM2/TM3) */
 545      =3  #define    TIMER_DIV4_VALUE_200us_FOSC_11059200    65536-553        /* 1106*4    /11059200 = 200 us  (Time
             -r divider = 4   for TM2/TM3) */
 546      =3  #define    TIMER_DIV4_VALUE_500us_FOSC_11059200    65536-1383       /* 2765*4    /11059200 = 500 us  (Time
             -r divider = 4   for TM2/TM3) */  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 15  

 547      =3  #define    TIMER_DIV16_VALUE_10ms_FOSC_11059200    65536-6912       /* 1500*16   /11059200 = 10 ms   (Time
             -r divider = 16  for TM2/TM3) */
 548      =3  #define    TIMER_DIV64_VALUE_30ms_FOSC_11059200    65536-5184       /* 10368*64  /11059200 = 30 ms   (Time
             -r divider = 64  for TM2/TM3) */
 549      =3  #define    TIMER_DIV128_VALUE_100ms_FOSC_11059200  65536-8640       /* 17280*128 /11059200 = 100 ms  (Time
             -r divider = 128 for TM2/TM3) */
 550      =3  #define    TIMER_DIV128_VALUE_200ms_FOSC_11059200  65536-17280      /* 34560*128 /11059200 = 200 ms  (Time
             -r divider = 128 for TM2/TM3) */
 551      =3  #define    TIMER_DIV256_VALUE_500ms_FOSC_11059200  65536-21600      /* 43200*256 /11059200 = 500 ms  (Time
             -r divider = 256 for TM2/TM3) */
 552      =3  #define    TIMER_DIV512_VALUE_1s_FOSC_11059200     65536-21600      /* 43200*512 /11059200 = 1 s     (Time
             -r divider = 512 for TM2/TM3) */
 553      =3  /* define timer base value Fsys = 16MHz */                       
 554      =3  #define    TIMER_DIV12_VALUE_10us_FOSC_16000000    65536-8          /* 13*12     /16000000 = 10 uS,  (Time
             -r divider = 12  for TM0/TM1) */
 555      =3  #define    TIMER_DIV12_VALUE_100us_FOSC_16000000   65536-130        /* 130*12    /16000000 = 10 uS,  (Time
             -r divider = 12  for TM0/TM1) */
 556      =3  #define    TIMER_DIV12_VALUE_1ms_FOSC_16000000     65536-1334       /* 1334*12   /16000000 = 1 mS,   (Time
             -r divider = 12  for TM0/TM1) */
 557      =3  #define    TIMER_DIV12_VALUE_10ms_FOSC_16000000    65536-13334      /* 13334*12  /16000000 = 10 mS   (Time
             -r divider = 12  for TM0/TM1) */
 558      =3  #define    TIMER_DIV12_VALUE_40ms_FOSC_16000000    65536-53336      /* 53336*12  /16000000 = 40 ms   (Time
             -r divider = 12  for TM0/TM1) */
 559      =3  #define    TIMER_DIV4_VALUE_10us_FOSC_16000000     65536-30         /* 40*4      /16000000 = 10 uS,  (Time
             -r divider = 4   for TM2/TM3) */
 560      =3  #define    TIMER_DIV4_VALUE_100us_FOSC_16000000    65536-400        /* 400*4     /16000000 = 100 us  (Time
             -r divider = 4   for TM2/TM3) */
 561      =3  #define    TIMER_DIV4_VALUE_200us_FOSC_16000000    65536-800        /* 800*4     /16000000 = 200 us  (Time
             -r divider = 4   for TM2/TM3) */
 562      =3  #define    TIMER_DIV4_VALUE_500us_FOSC_16000000    65536-2000       /* 2000*4    /16000000 = 500 us  (Time
             -r divider = 4   for TM2/TM3) */
 563      =3  #define    TIMER_DIV4_VALUE_1ms_FOSC_16000000      65536-4000       /* 4000*4    /16000000 = 1 mS,   (Time
             -r divider = 4   for TM2/TM3) */
 564      =3  #define    TIMER_DIV4_VALUE_10ms_FOSC_16000000     65536-40000      /* 40000*4   /16000000 = 10 mS,  (Time
             -r divider = 4   for TM2/TM3) */
 565      =3  #define    TIMER_DIV16_VALUE_10ms_FOSC_16000000    65536-10000      /* 10000*16  /16000000 = 10 ms   (Time
             -r divider = 16  for TM2/TM3) */
 566      =3  #define    TIMER_DIV64_VALUE_30ms_FOSC_16000000    65536-7500       /* 7500*64   /16000000 = 30 ms   (Time
             -r divider = 64  for TM2/TM3) */
 567      =3  #define    TIMER_DIV128_VALUE_1ms_FOSC_16000000    65536-125        /* 125*128   /16000000 = 1 ms    (Time
             -r divider = 128 for TM2/TM3) */
 568      =3  #define    TIMER_DIV128_VALUE_10ms_FOSC_16000000   65536-1250       /* 1250*128  /16000000 = 10 ms   (Time
             -r divider = 128 for TM2/TM3) */
 569      =3  #define    TIMER_DIV128_VALUE_100ms_FOSC_16000000  65536-12500      /* 12500*128 /16000000 = 100 ms  (Time
             -r divider = 128 for TM2/TM3) */
 570      =3  #define    TIMER_DIV128_VALUE_200ms_FOSC_16000000  65536-25000      /* 25000*128 /16000000 = 200 ms  (Time
             -r divider = 128 for TM2/TM3) */
 571      =3  #define    TIMER_DIV256_VALUE_500ms_FOSC_16000000  65536-31250      /* 31250*256 /16000000 = 500 ms  (Time
             -r divider = 256 for TM2/TM3) */
 572      =3  #define    TIMER_DIV512_VALUE_100ms_FOSC_16000000  65536-3125       /* 3125*512  /16000000 = 100ms.  (Time
             -r divider = 512 for TM2/TM3) */
 573      =3  #define    TIMER_DIV512_VALUE_1s_FOSC_16000000     65536-31250      /* 31250*512 /16000000 = 1 s.    (Time
             -r divider = 512 for TM2/TM3) */
 574      =3  /* define timer base value Fsys = 16.6MHz */
 575      =3  #define    TIMER_DIV12_VALUE_10us_FOSC_16600000      65536-14       /* 14*12     /16600000 = 10 uS,  (Time
             -r divider = 12  for TM0/TM1) */
 576      =3  #define    TIMER_DIV12_VALUE_100us_FOSC_16600000     65536-138      /* 138*12    /16600000 = 100 uS, (Time
             -r divider = 12  for TM0/TM1) */
 577      =3  #define    TIMER_DIV12_VALUE_1ms_FOSC_16600000       65536-1384     /* 1384*12   /16600000 = 1 mS,   (Time
             -r divider = 12  for TM0/TM1) */
 578      =3  #define    TIMER_DIV12_VALUE_10ms_FOSC_16600000      65536-13834    /* 13834*12  /16600000 = 10 mS   (Time
             -r divider = 12  for TM0/TM1) */
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 16  

 579      =3  #define    TIMER_DIV12_VALUE_40ms_FOSC_16600000      65536-55333    /* 55333*12  /16600000 = 40 ms   (Time
             -r divider = 12  for TM0/TM1) */
 580      =3  #define    TIMER_DIV4_VALUE_10us_FOSC_16600000       65536-41       /* 41*4      /16600000 = 10 uS,  (Time
             -r divider = 4   for TM2/TM3) */
 581      =3  #define    TIMER_DIV4_VALUE_100us_FOSC_16600000      65536-415      /* 415*4     /16600000 = 100 us  (Time
             -r divider = 4   for TM2/TM3) */
 582      =3  #define    TIMER_DIV4_VALUE_200us_FOSC_16600000      65536-830      /* 830*4     /16600000 = 200 us  (Time
             -r divider = 4   for TM2/TM3) */
 583      =3  #define    TIMER_DIV4_VALUE_500us_FOSC_16600000      65536-2075     /* 2075*4    /16600000 = 500 us  (Time
             -r divider = 4   for TM2/TM3) */
 584      =3  #define    TIMER_DIV4_VALUE_1ms_FOSC_16600000        65536-4150     /* 4150*4    /16600000 = 1 mS,   (Time
             -r divider = 4   for TM2/TM3) */
 585      =3  #define    TIMER_DIV16_VALUE_10ms_FOSC_16600000      65536-10375    /* 10375*16  /16600000 = 10 ms   (Time
             -r divider = 16  for TM2/TM3) */
 586      =3  #define    TIMER_DIV64_VALUE_30ms_FOSC_16600000      65536-7781     /* 7781*64   /16600000 = 30 ms   (Time
             -r divider = 64  for TM2/TM3) */
 587      =3  #define    TIMER_DIV128_VALUE_100ms_FOSC_16600000    65536-12969    /* 12969*128 /16600000 = 100 ms  (Time
             -r divider = 128 for TM2/TM3) */
 588      =3  #define    TIMER_DIV128_VALUE_200ms_FOSC_16600000    65536-25937    /* 25937*128 /16600000 = 200 ms  (Time
             -r divider = 128 for TM2/TM3) */
 589      =3  #define    TIMER_DIV256_VALUE_500ms_FOSC_16600000    65536-32422    /* 32422*256 /16600000 = 500 ms  (Time
             -r divider = 256 for TM2/TM3) */
 590      =3  #define    TIMER_DIV512_VALUE_1s_FOSC_16600000       65536-32421    /* 32421*512 /16600000 = 1 s.    (Time
             -r divider = 512 for TM2/TM3) */
 591      =3  /* define timer base value Fsys = 18.432MHz */
 592      =3  #define    TIMER_DIV12_VALUE_10us_FOSC_18432000      65536-15       /* 15*12      /18432000 = 10 uS,  (Tim
             -er divider = 12  for TM0/TM1) */
 593      =3  #define    TIMER_DIV12_VALUE_1ms_FOSC_18432000       65536-1536     /* 1536*12    /18432000 = 1 mS,   (Tim
             -er divider = 12  for TM0/TM1) */
 594      =3  #define    TIMER_DIV4_VALUE_10us_FOSC_18432000       65536-46       /* 46*4       /18432000 = 10 uS,  (Tim
             -er divider = 4   for TM2/TM3) */
 595      =3  #define    TIMER_DIV4_VALUE_1ms_FOSC_18432000        65536-4608     /* 4608*4     /18432000 = 1 mS,   (Tim
             -er divider = 4   for TM2/TM3) */
 596      =3  /* define timer base value Fsys = 20 MHz*/
 597      =3  #define    TIMER_DIV12_VALUE_10us_FOSC_20000000      65536-17       /* 17*12      /20000000 = 10 uS,  (Tim
             -er divider = 12  for TM0/TM1) */
 598      =3  #define    TIMER_DIV12_VALUE_1ms_FOSC_20000000       65536-1667     /* 1667*12    /20000000 = 1 mS,   (Tim
             -er divider = 12  for TM0/TM1) */
 599      =3  #define    TIMER_DIV4_VALUE_10us_FOSC_20000000       65536-50       /* 50*4       /20000000 = 10 uS,  (Tim
             -er divider = 4   for TM2/TM3) */
 600      =3  #define    TIMER_DIV4_VALUE_1ms_FOSC_20000000        65536-5000     /* 5000*4     /20000000 = 1 mS,   (Tim
             -er divider = 4   for TM2/TM3) */
 601      =3  /* define timer base value Fsys = 22.1184 MHz  */
 602      =3  #define    TIMER_DIV12_VALUE_10us_FOSC_22118400      65536-18       /* 18*12      /22118400 = 10 uS,  (Tim
             -er divider = 12  for TM0/TM1) */
 603      =3  #define    TIMER_DIV12_VALUE_100us_FOSC_22118400     65536-184      /* 184*12     /22118400 = 10 uS,  (Tim
             -er divider = 12  for TM0/TM1) */
 604      =3  #define    TIMER_DIV12_VALUE_1ms_FOSC_22118400       65536-1843     /* 1843*12    /22118400 = 1 mS,   (Tim
             -er divider = 12  for TM0/TM1) */
 605      =3  #define    TIMER_DIV12_VALUE_10ms_FOSC_22118400      65536-18432    /* 18432*12   /22118400 = 10 ms   (Tim
             -er divider = 12  for TM0/TM1) */
 606      =3  #define    TIMER_DIV4_VALUE_10us_FOSC_22118400       65536-56       /* 9*4        /22118400 = 10 uS,  (Tim
             -er divider = 4   for TM2/TM3) */
 607      =3  #define    TIMER_DIV4_VALUE_1ms_FOSC_22118400        65536-5530     /* 923*4      /22118400 = 1 mS,   (Tim
             -er divider = 4   for TM2/TM3) */
 608      =3  #define    TIMER_DIV4_VALUE_100us_FOSC_22118400      65536-553      /* 553*4      /22118400 = 100 us  (Tim
             -er divider = 4   for TM2/TM3) */
 609      =3  #define    TIMER_DIV4_VALUE_200us_FOSC_22118400      65536-1106     /* 1106*4     /22118400 = 200 us  (Tim
             -er divider = 4   for TM2/TM3) */
 610      =3  #define    TIMER_DIV4_VALUE_500us_FOSC_22118400      65536-2765     /* 2765*4     /22118400 = 500 us  (Tim
             -er divider = 4   for TM2/TM3) */    
 611      =3  #define    TIMER_DIV16_VALUE_10ms_FOSC_22118400      65536-13824    /* 1500*16    /22118400 = 10 ms   (Tim
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 17  

             -er divider = 16  for TM2/TM3) */
 612      =3  #define    TIMER_DIV64_VALUE_30ms_FOSC_22118400      65536-10368    /* 10368*64   /22118400 = 30 ms   (Tim
             -er divider = 64  for TM2/TM3) */
 613      =3  #define    TIMER_DIV128_VALUE_100ms_FOSC_22118400    65536-17280    /* 17280*128  /22118400 = 100 ms  (Tim
             -er divider = 128 for TM2/TM3) */
 614      =3  #define    TIMER_DIV128_VALUE_200ms_FOSC_22118400    65536-34560    /* 34560*128  /22118400 = 200 ms  (Tim
             -er divider = 128 for TM2/TM3) */
 615      =3  #define    TIMER_DIV256_VALUE_500ms_FOSC_22118400    65536-43200    /* 43200*256  /22118400 = 500 ms  (Tim
             -er divider = 256 for TM2/TM3) */
 616      =3  #define    TIMER_DIV512_VALUE_1s_FOSC_22118400       65536-43200    /* 43200*512  /22118400 = 1 s     (Tim
             -er divider = 512 for TM2/TM3) */
 617      =3  /* define timer base value Fsys = 24 MHz*/
 618      =3  #define    TIMER_DIV12_VALUE_10us_FOSC_24000000      65536-20       /* 20*12      /24000000 = 10 uS,  (Tim
             -er divider = 12  for TM0/TM1) */
 619      =3  #define    TIMER_DIV12_VALUE_100us_FOSC_24000000     65536-200      /* 130*12     /16000000 = 10 uS,  (Tim
             -er divider = 12  for TM0/TM1) */
 620      =3  #define    TIMER_DIV12_VALUE_1ms_FOSC_24000000       65536-2000     /* 2000*12    /24000000 = 1 mS,   (Tim
             -er divider = 12  for TM0/TM1) */
 621      =3  #define    TIMER_DIV12_VALUE_10ms_FOSC_24000000      65536-20000    /* 2000*12    /24000000 = 10 mS   (Tim
             -er divider = 12  for TM0/TM1) */
 622      =3  #define    TIMER_DIV4_VALUE_10us_FOSC_24000000       65536-60       /* 60*4       /24000000 = 10 uS,  (Tim
             -er divider = 4   for TM2/TM3) */
 623      =3  #define    TIMER_DIV4_VALUE_100us_FOSC_24000000      65536-600      /* 600*4      /24000000 = 100 us  (Tim
             -er divider = 4   for TM2/TM3) */
 624      =3  #define    TIMER_DIV4_VALUE_200us_FOSC_24000000      65536-1200     /* 1200*4     /24000000 = 200 us  (Tim
             -er divider = 4   for TM2/TM3) */
 625      =3  #define    TIMER_DIV4_VALUE_500us_FOSC_24000000      65536-3000     /* 3000*4     /24000000 = 500 us  (Tim
             -er divider = 4   for TM2/TM3) */
 626      =3  #define    TIMER_DIV4_VALUE_1ms_FOSC_24000000        65536-6000     /* 6000*4     /24000000 = 1 mS,   (Tim
             -er divider = 4   for TM2/TM3) */
 627      =3  #define    TIMER_DIV4_VALUE_10ms_FOSC_24000000       65536-60000    /* 60000*4    /24000000 = 10 ms   (Tim
             -er divider = 4   for TM2/TM3) */
 628      =3  #define    TIMER_DIV16_VALUE_10ms_FOSC_24000000      65536-15000    /* 15000*16   /24000000 = 10 ms   (Tim
             -er divider = 16  for TM2/TM3) */ 
 629      =3  #define    TIMER_DIV64_VALUE_30ms_FOSC_24000000      65536-11250    /* 11250*64   /24000000 = 30 ms   (Tim
             -er divider = 64  for TM2/TM3) */ 
 630      =3  #define    TIMER_DIV128_VALUE_1ms_FOSC_24000000      65536-187      /* 187*128    /24000000 = 1 ms    (Tim
             -er divider = 128 for TM2/TM3) */
 631      =3  #define    TIMER_DIV128_VALUE_10ms_FOSC_24000000     65536-1875     /* 1875*128   /24000000 = 10 ms   (Tim
             -er divider = 128 for TM2/TM3) */
 632      =3  #define    TIMER_DIV128_VALUE_100ms_FOSC_24000000    65536-18750    /* 18750*128  /24000000 = 100 ms  (Tim
             -er divider = 128 for TM2/TM3) */
 633      =3  #define    TIMER_DIV128_VALUE_200ms_FOSC_24000000    65536-37500    /* 37500*128  /24000000 = 200 ms  (Tim
             -er divider = 128 for TM2/TM3) */
 634      =3  #define    TIMER_DIV256_VALUE_500ms_FOSC_24000000    65536-46875    /* 46875*256  /24000000 = 500 ms  (Tim
             -er divider = 256 for TM2/TM3) */ 
 635      =3  #define    TIMER_DIV512_VALUE_10ms_FOSC_24000000     65536-468      /* 468*512    /24000000 = 100 ms  (Tim
             -er divider = 512 for TM2/TM3) */ 
 636      =3  #define    TIMER_DIV512_VALUE_100ms_FOSC_24000000    65536-4687     /* 4687*512   /24000000 = 100 ms  (Tim
             -er divider = 512 for TM2/TM3) */ 
 637      =3  #define    TIMER_DIV512_VALUE_500ms_FOSC_24000000    65536-23437    /* 4687*512   /24000000 = 500 ms  (Tim
             -er divider = 512 for TM2/TM3) */ 
 638      =3  #define    TIMER_DIV512_VALUE_1s_FOSC_24000000       65536-46875    /* 46875*512  /24000000 = 1 s.    (Tim
             -er divider = 512 for TM2/TM3) */ 
 639      =3  
 640      =3  /*******************************************************************************
 641      =3  *   TIMER Function Define
 642      =3  ********************************************************************************/
 643      =3  #define    ENABLE_CLOCK_OUT             set_CKCON_CLOEN;
 644      =3  /*-------------------- Timer0 basic define --------------------*/
 645      =3  #define    ENABLE_TIMER0_MODE0           TMOD&=0xF0
 646      =3  #define    ENABLE_TIMER0_MODE1           TMOD&=0xF0;TMOD|=0x01
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 18  

 647      =3  #define    ENABLE_TIMER0_MODE2           TMOD&=0xF0;TMOD|=0x02
 648      =3  #define    ENABLE_TIMER0_MODE3           TMOD&=0xF0;TMOD|=0x03
 649      =3  #define    TIMER0_FSYS                   set_CKCON_T0M
 650      =3  #define    TIMER0_FSYS_DIV12             clr_CKCON_T0M
 651      =3                                           
 652      =3  #define    TIMER0_MODE0_ENABLE           TMOD&=0xF0
 653      =3  #define    TIMER0_MODE1_ENABLE           TMOD&=0xF0;TMOD|=0x01
 654      =3  #define    TIMER0_MODE2_ENABLE           TMOD&=0xF0;TMOD|=0x02
 655      =3  #define    TIMER0_MODE3_ENABLE           TMOD&=0xF0;TMOD|=0x03
 656      =3  /*-------------------- Timer1 basic define --------------------*/
 657      =3  #define    ENABLE_TIMER1_MODE0           TMOD&=0x0F
 658      =3  #define    ENABLE_TIMER1_MODE1           TMOD&=0x0F;TMOD|=0x10
 659      =3  #define    ENABLE_TIMER1_MODE2           TMOD&=0x0F;TMOD|=0x20
 660      =3  #define    ENABLE_TIMER1_MODE3           TMOD&=0x0F;TMOD|=0x30
 661      =3  #define    TIMER1_FSYS                   set_CKCON_T1M
 662      =3  #define    TIMER1_FSYS_DIV12             clr_CKCON_T1M
 663      =3                                           
 664      =3  #define    TIMER1_MODE0_ENABLE           TMOD&=0x0F
 665      =3  #define    TIMER1_MODE1_ENABLE           TMOD&=0x0F;TMOD|=0x10
 666      =3  #define    TIMER1_MODE2_ENABLE           TMOD&=0x0F;TMOD|=0x20
 667      =3  #define    TIMER1_MODE3_ENABLE           TMOD&=0x0F;TMOD|=0x30
 668      =3  //-------------------- Timer2 function define --------------------
 669      =3  #define    TIMER2_DIV_4                  T2MOD|=0x10;T2MOD&=0x9F
 670      =3  #define    TIMER2_DIV_16                 T2MOD|=0x20;T2MOD&=0xAF
 671      =3  #define    TIMER2_DIV_32                 T2MOD|=0x30;T2MOD&=0xBF
 672      =3  #define    TIMER2_DIV_64                 T2MOD|=0x40;T2MOD&=0xCF
 673      =3  #define    TIMER2_DIV_128                T2MOD|=0x50;T2MOD&=0xDF
 674      =3  #define    TIMER2_DIV_256                T2MOD|=0x60;T2MOD&=0xEF
 675      =3  #define    TIMER2_DIV_512                T2MOD|=0x70
 676      =3  #define    TIMER2_Auto_Reload_Delay_Mode        T2CON&=0xFE;T2MOD|=0x80;T2MOD|=0x08
 677      =3  #define    TIMER2_Compare_Capture_Mode          T2CON|=0x01;T2MOD&=0x7F;T2MOD|=0x04
 678      =3             
 679      =3  #define    TIMER2_CAP0_Capture_Mode      T2CON&=0xFE;T2MOD=0x89
 680      =3  #define    TIMER2_CAP1_Capture_Mode      T2CON&=0xFE;T2MOD=0x8A
 681      =3  #define    TIMER2_CAP2_Capture_Mode      T2CON&=0xFE;T2MOD=0x8B
 682      =3  
 683      =3  //-------------------- Timer2 Capture define --------------------
 684      =3  //--- Falling Edge -----
 685      =3  #define  IC0_P12_CAP0_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xFC;CAPCON3&=0xF0;CAPCON3|=0x00;CAPCON0|=
             -0x10;CAPCON2|=0x10
 686      =3  #define  IC1_P11_CAP0_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xFC;CAPCON3&=0xF0;CAPCON3|=0x01;CAPCON0|=
             -0x10;CAPCON2|=0x10
 687      =3  #define  IC2_P10_CAP0_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xFC;CAPCON3&=0xF0;CAPCON3|=0x02;CAPCON0|=
             -0x10;CAPCON2|=0x10
 688      =3  #define  IC3_P00_CAP0_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xFC;CAPCON3&=0xF0;CAPCON3|=0x03;CAPCON0|=
             -0x10;CAPCON2|=0x10
 689      =3  #define  IC3_P04_CAP0_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xFC;CAPCON3&=0xF0;CAPCON3|=0x04;CAPCON0|=
             -0x10;CAPCON2|=0x10
 690      =3  #define  IC4_P01_CAP0_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xFC;CAPCON3&=0xF0;CAPCON3|=0x05;CAPCON0|=
             -0x10;CAPCON2|=0x10
 691      =3  #define  IC5_P03_CAP0_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xFC;CAPCON3&=0xF0;CAPCON3|=0x06;CAPCON0|=
             -0x10;CAPCON2|=0x10
 692      =3  #define  IC6_P05_CAP0_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xFC;CAPCON3&=0xF0;CAPCON3|=0x07;CAPCON0|=
             -0x10;CAPCON2|=0x10
 693      =3  #define  IC7_P15_CAP0_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xFC;CAPCON3&=0xF0;CAPCON3|=0x08;CAPCON0|=
             -0x10;CAPCON2|=0x10
 694      =3                                                  
 695      =3  #define  IC0_P12_CAP1_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xF3;CAPCON3&=0x0F;CAPCON3|=0x00;CAPCON0|=
             -0x20;CAPCON2|=0x20
 696      =3  #define  IC1_P11_CAP1_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xF3;CAPCON3&=0x0F;CAPCON3|=0x10;CAPCON0|=
             -0x20;CAPCON0|=0x20
 697      =3  #define  IC2_P10_CAP1_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xF3;CAPCON3&=0x0F;CAPCON3|=0x20;CAPCON0|=
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 19  

             -0x20;CAPCON2|=0x20
 698      =3  #define  IC3_P00_CAP1_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xF3;CAPCON3&=0x0F;CAPCON3|=0x30;CAPCON0|=
             -0x20;CAPCON2|=0x20
 699      =3  #define  IC3_P04_CAP1_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xF3;CAPCON3&=0x0F;CAPCON3|=0x40;CAPCON0|=
             -0x20;CAPCON2|=0x20
 700      =3  #define  IC4_P01_CAP1_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xF3;CAPCON3&=0x0F;CAPCON3|=0x50;CAPCON0|=
             -0x20;CAPCON2|=0x20
 701      =3  #define  IC5_P03_CAP1_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xF3;CAPCON3&=0x0F;CAPCON3|=0x60;CAPCON0|=
             -0x20;CAPCON2|=0x20
 702      =3  #define  IC6_P05_CAP1_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xF3;CAPCON3&=0x0F;CAPCON3|=0x70;CAPCON0|=
             -0x20;CAPCON2|=0x20
 703      =3  #define  IC7_P15_CAP1_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0xF3;CAPCON3&=0x0F;CAPCON3|=0x80;CAPCON0|=
             -0x20;CAPCON2|=0x20
 704      =3                                                  
 705      =3  #define  IC0_P12_CAP2_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0x0F;CAPCON4&=0xF0;CAPCON3|=0x00;CAPCON0|=
             -0x40;CAPCON2|=0x40
 706      =3  #define  IC1_P11_CAP2_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0x0F;CAPCON4&=0xF0;CAPCON4|=0x10;CAPCON0|=
             -0x40;CAPCON2|=0x40
 707      =3  #define  IC2_P10_CAP2_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0x0F;CAPCON4&=0xF0;CAPCON4|=0x20;CAPCON0|=
             -0x40;CAPCON2|=0x40
 708      =3  #define  IC3_P00_CAP2_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0x0F;CAPCON4&=0xF0;CAPCON4|=0x30;CAPCON0|=
             -0x40;CAPCON2|=0x40
 709      =3  #define  IC3_P04_CAP2_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0x0F;CAPCON4&=0xF0;CAPCON4|=0x40;CAPCON0|=
             -0x40;CAPCON2|=0x40
 710      =3  #define  IC4_P01_CAP2_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0x0F;CAPCON4&=0xF0;CAPCON4|=0x50;CAPCON0|=
             -0x40;CAPCON2|=0x40
 711      =3  #define  IC5_P03_CAP2_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0x0F;CAPCON4&=0xF0;CAPCON4|=0x60;CAPCON0|=
             -0x40;CAPCON2|=0x40
 712      =3  #define  IC6_P05_CAP2_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0x0F;CAPCON4&=0xF0;CAPCON4|=0x70;CAPCON0|=
             -0x40;CAPCON2|=0x40
 713      =3  #define  IC7_P15_CAP2_FALLINGEDGE_CAPTURE       SFRS=0;CAPCON1&=0x0F;CAPCON4&=0xF0;CAPCON4|=0x80;CAPCON0|=
             -0x40;CAPCON2|=0x40
 714      =3                                                  
 715      =3  //----- Rising edge ----//CAPTURE
 716      =3  #define  IC0_P12_CAP0_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x01;CAPCON3|=0x00;CAPCON3&=
             -0xF0;CAPCON0|=0x10;CAPCON2|=0x10
 717      =3  #define  IC1_P11_CAP0_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x01;CAPCON3&=0xF0;CAPCON3|=
             -0x01;CAPCON0|=0x10;CAPCON2|=0x10
 718      =3  #define  IC2_P10_CAP0_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x01;CAPCON3&=0xF0;CAPCON3|=
             -0x02;CAPCON0|=0x10;CAPCON2|=0x10
 719      =3  #define  IC3_P00_CAP0_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x01;CAPCON3&=0xF0;CAPCON3|=
             -0x03;CAPCON0|=0x10;CAPCON2|=0x10
 720      =3  #define  IC3_P04_CAP0_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x01;CAPCON3&=0xF0;CAPCON3|=
             -0x04;CAPCON0|=0x10;CAPCON2|=0x10
 721      =3  #define  IC4_P01_CAP0_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x01;CAPCON3&=0xF0;CAPCON3|=
             -0x05;CAPCON0|=0x10;CAPCON2|=0x10
 722      =3  #define  IC5_P03_CAP0_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x01;CAPCON3&=0xF0;CAPCON3|=
             -0x06;CAPCON0|=0x10;CAPCON2|=0x10
 723      =3  #define  IC6_P05_CAP0_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x01;CAPCON3&=0xF0;CAPCON3|=
             -0x07;CAPCON0|=0x10;CAPCON2|=0x10
 724      =3  #define  IC7_P15_CAP0_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x01;CAPCON3&=0xF0;CAPCON3|=
             -0x08;CAPCON0|=0x10;CAPCON2|=0x10
 725      =3                                                  
 726      =3  #define  IC0_P12_CAP1_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x04;CAPCON3&=0x0F;CAPCON3|=
             -0x00;CAPCON0|=0x20;CAPCON2|=0x20
 727      =3  #define  IC1_P11_CAP1_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x04;CAPCON3&=0x0F;CAPCON3|=
             -0x10;CAPCON0|=0x20;CAPCON2|=0x20
 728      =3  #define  IC2_P10_CAP1_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x04;CAPCON3&=0x0F;CAPCON3|=
             -0x20;CAPCON0|=0x20;CAPCON2|=0x20
 729      =3  #define  IC3_P00_CAP1_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x04;CAPCON3&=0x0F;CAPCON3|=
             -0x30;CAPCON0|=0x20;CAPCON2|=0x20
 730      =3  #define  IC3_P04_CAP1_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x04;CAPCON3&=0x0F;CAPCON3|=
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 20  

             -0x40;CAPCON0|=0x20;CAPCON2|=0x20
 731      =3  #define  IC4_P01_CAP1_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x04;CAPCON3&=0x0F;CAPCON3|=
             -0x50;CAPCON0|=0x20;CAPCON2|=0x20
 732      =3  #define  IC5_P03_CAP1_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x04;CAPCON3&=0x0F;CAPCON3|=
             -0x60;CAPCON0|=0x20;CAPCON2|=0x20
 733      =3  #define  IC6_P05_CAP1_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x04;CAPCON3&=0x0F;CAPCON3|=
             -0x70;CAPCON0|=0x20;CAPCON2|=0x20
 734      =3  #define  IC7_P15_CAP1_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x04;CAPCON3&=0x0F;CAPCON3|=
             -0x80;CAPCON0|=0x20;CAPCON2|=0x20
 735      =3                                                  
 736      =3  #define  IC0_P12_CAP2_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x10;CAPCON4&=0xF0;CAPCON4|=
             -0x00;CAPCON0|=0x40;CAPCON2|=0x40
 737      =3  #define  IC1_P11_CAP2_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x10;CAPCON4&=0xF0;CAPCON4|=
             -0x01;CAPCON0|=0x40;CAPCON2|=0x40
 738      =3  #define  IC2_P10_CAP2_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x10;CAPCON4&=0xF0;CAPCON4|=
             -0x02;CAPCON0|=0x40;CAPCON2|=0x40
 739      =3  #define  IC3_P00_CAP2_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x10;CAPCON4&=0xF0;CAPCON4|=
             -0x03;CAPCON0|=0x40;CAPCON2|=0x40
 740      =3  #define  IC3_P04_CAP2_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x10;CAPCON4&=0xF0;CAPCON4|=
             -0x04;CAPCON0|=0x40;CAPCON2|=0x40
 741      =3  #define  IC4_P01_CAP2_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x10;CAPCON4&=0xF0;CAPCON4|=
             -0x05;CAPCON0|=0x40;CAPCON2|=0x40
 742      =3  #define  IC5_P03_CAP2_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x10;CAPCON4&=0xF0;CAPCON4|=
             -0x06;CAPCON0|=0x40;CAPCON2|=0x40
 743      =3  #define  IC6_P05_CAP2_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x10;CAPCON4&=0xF0;CAPCON4|=
             -0x07;CAPCON0|=0x40;CAPCON2|=0x40
 744      =3  #define  IC7_P15_CAP2_RISINGEDGE_CAPTURE        SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x10;CAPCON4&=0xF0;CAPCON4|=
             -0x08;CAPCON0|=0x40;CAPCON2|=0x40
 745      =3                                                  
 746      =3  //-----BOTH  edge ----                          
 747      =3  #define  IC0_P12_CAP0_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x02;CAPCON3&=0xF0;CAPCON3|=
             -0x00;CAPCON0|=0x10;CAPCON2|=0x10
 748      =3  #define  IC1_P11_CAP0_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x02;CAPCON3&=0xF0;CAPCON3|=
             -0x01;CAPCON0|=0x10;CAPCON2|=0x10
 749      =3  #define  IC2_P10_CAP0_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x02;CAPCON3&=0xF0;CAPCON3|=
             -0x02;CAPCON0|=0x10;CAPCON2|=0x10
 750      =3  #define  IC3_P00_CAP0_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x02;CAPCON3&=0xF0;CAPCON3|=
             -0x03;CAPCON0|=0x10;CAPCON2|=0x10
 751      =3  #define  IC3_P04_CAP0_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x02;CAPCON3&=0xF0;CAPCON3|=
             -0x04;CAPCON0|=0x10;CAPCON2|=0x10
 752      =3  #define  IC4_P01_CAP0_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x02;CAPCON3&=0xF0;CAPCON3|=
             -0x05;CAPCON0|=0x10;CAPCON2|=0x10
 753      =3  #define  IC5_P03_CAP0_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x02;CAPCON3&=0xF0;CAPCON3|=
             -0x06;CAPCON0|=0x10;CAPCON2|=0x10
 754      =3  #define  IC6_P05_CAP0_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x02;CAPCON3&=0xF0;CAPCON3|=
             -0x07;CAPCON0|=0x10;CAPCON2|=0x10
 755      =3  #define  IC7_P15_CAP0_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xFC;CAPCON1|=0x02;CAPCON3&=0xF0;CAPCON3|=
             -0x08;CAPCON0|=0x10;CAPCON2|=0x10
 756      =3                                                  
 757      =3  #define  IC0_P12_CAP1_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x08;CAPCON3&=0x0F;CAPCON3|=
             -0x00;CAPCON0|=0x20;CAPCON2|=0x20
 758      =3  #define  IC1_P11_CAP1_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x08;CAPCON3&=0x0F;CAPCON3|=
             -0x10;CAPCON0|=0x20;CAPCON2|=0x20
 759      =3  #define  IC2_P10_CAP1_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x08;CAPCON3&=0x0F;CAPCON3|=
             -0x20;CAPCON0|=0x20;CAPCON2|=0x20
 760      =3  #define  IC3_P00_CAP1_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x08;CAPCON3&=0x0F;CAPCON3|=
             -0x30;CAPCON0|=0x20;CAPCON2|=0x20
 761      =3  #define  IC3_P04_CAP1_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x08;CAPCON3&=0x0F;CAPCON3|=
             -0x40;CAPCON0|=0x20;CAPCON2|=0x20
 762      =3  #define  IC4_P01_CAP1_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x08;CAPCON3&=0x0F;CAPCON3|=
             -0x50;CAPCON0|=0x20;CAPCON2|=0x20
 763      =3  #define  IC5_P03_CAP1_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x08;CAPCON3&=0x0F;CAPCON3|=
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 21  

             -0x60;CAPCON0|=0x20;CAPCON2|=0x20
 764      =3  #define  IC6_P05_CAP1_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x08;CAPCON3&=0x0F;CAPCON3|=
             -0x70;CAPCON0|=0x20;CAPCON2|=0x20
 765      =3  #define  IC7_P15_CAP1_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0xF3;CAPCON1|=0x08;CAPCON3&=0x0F;CAPCON3|=
             -0x80;CAPCON0|=0x20;CAPCON2|=0x20
 766      =3                                                  
 767      =3  #define  IC0_P12_CAP2_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x20;CAPCON4&=0xF0;CAPCON4|=
             -0x00;CAPCON0|=0x40;CAPCON2|=0x40
 768      =3  #define  IC1_P11_CAP2_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x20;CAPCON4&=0xF0;CAPCON4|=
             -0x01;CAPCON0|=0x40;CAPCON2|=0x40
 769      =3  #define  IC2_P10_CAP2_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x20;CAPCON4&=0xF0;CAPCON4|=
             -0x02;CAPCON0|=0x40;CAPCON2|=0x40
 770      =3  #define  IC3_P00_CAP2_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x20;CAPCON4&=0xF0;CAPCON4|=
             -0x03;CAPCON0|=0x40;CAPCON2|=0x40
 771      =3  #define  IC3_P04_CAP2_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x20;CAPCON4&=0xF0;CAPCON4|=
             -0x04;CAPCON0|=0x40;CAPCON2|=0x40
 772      =3  #define  IC4_P01_CAP2_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x20;CAPCON4&=0xF0;CAPCON4|=
             -0x05;CAPCON0|=0x40;CAPCON2|=0x40
 773      =3  #define  IC5_P03_CAP2_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x20;CAPCON4&=0xF0;CAPCON4|=
             -0x06;CAPCON0|=0x40;CAPCON2|=0x40
 774      =3  #define  IC6_P05_CAP2_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x20;CAPCON4&=0xF0;CAPCON4|=
             -0x07;CAPCON0|=0x40;CAPCON2|=0x40
 775      =3  #define  IC7_P15_CAP2_BOTHEDGE_CAPTURE          SFRS=0;CAPCON1&=0x0F;CAPCON1|=0x20;CAPCON4&=0xF0;CAPCON4|=
             -0x08;CAPCON0|=0x40;CAPCON2|=0x40
 776      =3                                                  
 777      =3  #define  TIMER2_CAP2_DISABLE                    SFRS=0;CAPCON0&=0xBF
 778      =3  #define  TIMER2_CAP1_DISABLE                    SFRS=0;CAPCON0&=0xDF
 779      =3  #define  TIMER2_CAP0_DISABLE                    SFRS=0;CAPCON0&=0xEF 
 780      =3  
 781      =3  /*****************************************************************************************
 782      =3  * For PWM setting (From N76E00)
 783      =3  *****************************************************************************************/
 784      =3  //--------- PMW clock source select define ---------------------
 785      =3  #define    PWM_CLOCK_FSYS                    CKCON&=0xBF
 786      =3  #define    PWM_CLOCK_TIMER1                  CKCON|=0x40
 787      =3  /*--------- PWM type define ------------------------------------*/ 
 788      =3  #define    PWM_EDGE_TYPE                     PWMCON1&=0xEF
 789      =3  #define    PWM_CENTER_TYPE                   PWMCON1|=0x10
 790      =3  /*--------- PWM mode define ------------------------------------*/ 
 791      =3  #define    PWM_IMDEPENDENT_MODE              PWMCON1&=0x3F
 792      =3  #define    PWM_COMPLEMENTARY_MODE            PWMCON1&=0x3F;PWMCON1|=0x40
 793      =3  #define    PWM_SYNCHRONIZED_MODE             PWMCON1&=0x3F;PWMCON1|=0x80
 794      =3  #define    PWM_GP_MODE_ENABLE                PWMCON1|=0x20
 795      =3  #define    PWM_GP_MODE_DISABLE               PWMCON1&=0xDF
 796      =3  //--------- PWM clock devide define ----------------------------
 797      =3  #define    PWM_CLOCK_DIV_2                   PWMCON1&=0xF8;PWMCON1|=0x01
 798      =3  #define    PWM_CLOCK_DIV_4                   PWMCON1&=0xF8;PWMCON1|=0x02
 799      =3  #define    PWM_CLOCK_DIV_8                   PWMCON1&=0xF8;PWMCON1|=0x03
 800      =3  #define    PWM_CLOCK_DIV_16                  PWMCON1&=0xF8;PWMCON1|=0x04
 801      =3  #define    PWM_CLOCK_DIV_32                  PWMCON1&=0xF8;PWMCON1|=0x05
 802      =3  #define    PWM_CLOCK_DIV_64                  PWMCON1&=0xF8;PWMCON1|=0x06
 803      =3  #define    PWM_CLOCK_DIV_128                 PWMCON1|=0x07
 804      =3  /* --------- PWM I/O select define ------------------------------*/ 
 805      =3  #define    PWM5_P15_OUTPUT_ENABLE            set_SFRS_SFRPAGE;PIOCON1|=0x20;clr_SFRS_SFRPAGE        //P1.5
             - as PWM5 output enable
 806      =3  #define    PWM5_P03_OUTPUT_ENABLE            PIOCON0|=0x20                                                
             -                                 //P0.3 as PWM5
 807      =3  #define    PWM4_P01_OUTPUT_ENABLE            PIOCON0|=0x10                                                
             -                                 //P0.1 as PWM4 output enable
 808      =3  #define    PWM3_P04_OUTPUT_ENABLE            set_SFRS_SFRPAGE;PIOCON1|=0x08;clr_SFRS_SFRPAGE        //P0.4
             - as PWM3 output enable
 809      =3  #define    PWM3_P00_OUTPUT_ENABLE            PIOCON0|=0x08                                                
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 22  

             -                                 //P0.0 as PWM3 
 810      =3  #define    PWM2_P05_OUTPUT_ENABLE            set_SFRS_SFRPAGE;PIOCON1|=0x04;clr_SFRS_SFRPAGE        //P1.0
             - as PWM2 output enable
 811      =3  #define    PWM2_P10_OUTPUT_ENABLE            PIOCON0|=0x04                                                
             -                                 //P1.0 as PWM2
 812      =3  #define    PWM1_P14_OUTPUT_ENABLE            set_SFRS_SFRPAGE;PIOCON1|=0x02;clr_SFRS_SFRPAGE        //P1.4
             - as PWM1 output enable
 813      =3  #define    PWM1_P11_OUTPUT_ENABLE            PIOCON0|=0x02                                                
             -                                 //P1.1 as PWM1 
 814      =3  #define    PWM0_P12_OUTPUT_ENABLE            PIOCON0|=0x01                                                
             -                                 //P1.2 as PWM0 output enable
 815      =3  #define    ALL_PWM_OUTPUT_ENABLE             PIOCON0=0xFF;PIOCON1=0xFF
 816      =3  
 817      =3  #define    PWM5_P15_OUTPUT_DISABLE           set_SFRS_SFRPAGE;PIOCON1&=0xDF;clr_SFRS_SFRPAGE        //P1.5
             - as PWM5 output disable
 818      =3  #define    PWM5_P03_OUTPUT_DISABLE           PIOCON0&=0xDF                                                
             -                                 //P0.3 as PWM5
 819      =3  #define    PWM4_P01_OUTPUT_DISABLE           PIOCON0&=0xEF                                                
             -                                 //P0.1 as PWM4 output disable
 820      =3  #define    PWM3_P04_OUTPUT_DISABLE           set_SFRS_SFRPAGE;PIOCON1&=0xF7;clr_SFRS_SFRPAGE        //P0.4
             - as PWM3 output disable
 821      =3  #define    PWM3_P00_OUTPUT_DISABLE           PIOCON0&=0xF7                                                
             -                                 //P0.0 as PWM3 
 822      =3  #define    PWM2_P05_OUTPUT_DISABLE           set_SFRS_SFRPAGE;PIOCON1&=0xFB;clr_SFRS_SFRPAGE        //P1.0
             - as PWM2 output disable
 823      =3  #define    PWM2_P10_OUTPUT_DISABLE           PIOCON0&=0xFB                                                
             -                                 //P1.0 as PWM2
 824      =3  #define    PWM1_P14_OUTPUT_DISABLE           set_SFRS_SFRPAGE;PIOCON1&=0xFD;clr_SFRS_SFRPAGE        //P1.4
             - as PWM1 output disable
 825      =3  #define    PWM1_P11_OUTPUT_DISABLE           PIOCON0&=0xFD                                                
             -                                 //P1.1 as PWM1 
 826      =3  #define    PWM0_P12_OUTPUT_DISABLE           PIOCON0&=0xFE                                                
             -                                 //P1.2 as PWM0 output disable
 827      =3  #define    ALL_PWM_OUTPUT_DISABLE            PIOCON0=0x00;PIOCON1=0x00
 828      =3  //--------- PWM I/O Polarity Control ---------------------------
 829      =3  #define    PWM5_OUTPUT_INVERSE               PNP|=0x20
 830      =3  #define    PWM4_OUTPUT_INVERSE               PNP|=0x10
 831      =3  #define    PWM3_OUTPUT_INVERSE               PNP|=0x08
 832      =3  #define    PWM2_OUTPUT_INVERSE               PNP|=0x04
 833      =3  #define    PWM1_OUTPUT_INVERSE               PNP|=0x02
 834      =3  #define    PWM0_OUTPUT_INVERSE               PNP|=0x01
 835      =3  #define    PWM_OUTPUT_ALL_INVERSE            PNP|=0xFF
 836      =3  #define    PWM5_OUTPUT_NORMAL                PNP&=0xDF
 837      =3  #define    PWM4_OUTPUT_NORMAL                PNP&=0xEF
 838      =3  #define    PWM3_OUTPUT_NORMAL                PNP&=0xF7
 839      =3  #define    PWM2_OUTPUT_NORMAL                PNP&=0xFB
 840      =3  #define    PWM1_OUTPUT_NORMAL                PNP&=0xFD
 841      =3  #define    PWM0_OUTPUT_NORMAL                PNP&=0xFE
 842      =3  #define    PWM_OUTPUT_ALL_NORMAL             PNP&=0x00
 843      =3  
 844      =3  //--------- PMW interrupt setting ------------------------------
 845      =3  #define    PWM_FALLING_INT                   set_SFRS_SFRPAGE;PWMINTC&=0xCF;PWMINTC|=0x00;clr_SFRS_SFRPAGE
 846      =3  #define    PWM_RISING_INT                    set_SFRS_SFRPAGE;PWMINTC&=0xCF;PWMINTC|=0x10;clr_SFRS_SFRPAGE
 847      =3  #define    PWM_CENTRAL_POINT_INT             set_SFRS_SFRPAGE;PWMINTC&=0xCF;PWMINTC|=0x20;clr_SFRS_SFRPAGE
             -;set_PWMCON1_PWMTYP
 848      =3  #define    PWM_PERIOD_END_INT                set_SFRS_SFRPAGE;PWMINTC&=0xCF;PWMINTC|=0x30;clr_SFRS_SFRPAGE
             -;set_PWMCON1_PWMTYP
 849      =3  //--------- PWM interrupt pin select ---------------------------
 850      =3  #define    PWM_INT_PWM0                      set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x00;clr_SFRS_SFRPAGE
 851      =3  #define    PWM_INT_PWM1                      set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x01;clr_SFRS_SFRPAGE
 852      =3  #define    PWM_INT_PWM2                      set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x02;clr_SFRS_SFRPAGE
 853      =3  #define    PWM_INT_PWM3                      set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x03;clr_SFRS_SFRPAGE
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 23  

 854      =3  #define    PWM_INT_PWM4                      set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x04;clr_SFRS_SFRPAGE
 855      =3  #define    PWM_INT_PWM5                      set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x05;clr_SFRS_SFRPAGE
 856      =3  //--------- PWM Dead time setting ------------------------------
 857      =3  #define    PWM45_DEADTIME_ENABLE             BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x04;EA=BIT_TMP
 858      =3  #define    PWM23_DEADTIME_ENABLE             BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x02;EA=BIT_TMP
 859      =3  #define    PWM01_DEADTIME_ENABLE             BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x01;EA=BIT_TMP
 860      =3  
 861      =3  /*****************************************************************************************
 862      =3  * For PWM0 setting 
 863      =3  *****************************************************************************************/
 864      =3  //--------- PMW0 clock source select define ---------------------
 865      =3  #define    PWM0_CLOCK_FSYS                   CKCON&=0xBF
 866      =3  #define    PWM0_CLOCK_TIMER1                 CKCON|=0x40
 867      =3  /*--------- PWM type define ------------------------------------*/
 868      =3  #define    PWM0_EDGE_TYPE                    PWMCON1&=0xEF
 869      =3  #define    PWM0_CENTER_TYPE                  PWMCON1|=0x10      
 870      =3  /*--------- PWM mode define ------------------------------------*/
 871      =3  #define    PWM0_IMDEPENDENT_MODE             PWMCON1&=0x3F
 872      =3  #define    PWM0_COMPLEMENTARY_MODE           PWMCON1&=0x3F;PWMCON1|=0x40 
 873      =3  #define    PWM0_SYNCHRONIZED_MODE            PWMCON1&=0x3F;PWMCON1|=0x80 
 874      =3  #define    PWM0_GP_MODE_ENABLE               PWMCON1|=0x20
 875      =3  #define    PWM0_GP_MODE_DISABLE              PWMCON1&=0xDF
 876      =3  //--------- PWM0 clock devide define ----------------------------
 877      =3  #define    PWM0_CLOCK_DIV_1                  PWMCON1&=0xF8;PWMCON1|=0x00
 878      =3  #define    PWM0_CLOCK_DIV_2                  PWMCON1&=0xF8;PWMCON1|=0x01
 879      =3  #define    PWM0_CLOCK_DIV_4                  PWMCON1&=0xF8;PWMCON1|=0x02
 880      =3  #define    PWM0_CLOCK_DIV_8                  PWMCON1&=0xF8;PWMCON1|=0x03
 881      =3  #define    PWM0_CLOCK_DIV_16                 PWMCON1&=0xF8;PWMCON1|=0x04
 882      =3  #define    PWM0_CLOCK_DIV_32                 PWMCON1&=0xF8;PWMCON1|=0x05
 883      =3  #define    PWM0_CLOCK_DIV_64                 PWMCON1&=0xF8;PWMCON1|=0x06
 884      =3  #define    PWM0_CLOCK_DIV_128                PWMCON1&=0xF8;PWMCON1|=0x07
 885      =3  /* --------- PWM0 I/O select define ------------------------------*/ 
 886      =3  #define    ENABLE_PWM0_CH5_P15_OUTPUT        set_SFRS_SFRPAGE;PIOCON1|=0x20;clr_SFRS_SFRPAGE        //P1.5
             - as PWM5 output enable 
 887      =3  #define    ENABLE_PWM0_CH5_P03_OUTPUT        PIOCON0|=0x20                                                
             -                                 //P0.3 as PWM5               
 888      =3  #define    ENABLE_PWM0_CH4_P01_OUTPUT        PIOCON0|=0x10                                                
             -                                 //P0.1 as PWM4 output enable 
 889      =3  #define    ENABLE_PWM0_CH3_P04_OUTPUT        set_SFRS_SFRPAGE;PIOCON1|=0x08;clr_SFRS_SFRPAGE        //P0.4
             - as PWM3 output enable 
 890      =3  #define    ENABLE_PWM0_CH3_P00_OUTPUT        PIOCON0|=0x08                                                
             -                                 //P0.0 as PWM3               
 891      =3  #define    ENABLE_PWM0_CH2_P05_OUTPUT        set_SFRS_SFRPAGE;PIOCON1|=0x04;clr_SFRS_SFRPAGE        //P1.0
             - as PWM2 output enable 
 892      =3  #define    ENABLE_PWM0_CH2_P10_OUTPUT        PIOCON0|=0x04                                                
             -                                 //P1.0 as PWM2               
 893      =3  #define    ENABLE_PWM0_CH1_P14_OUTPUT        set_SFRS_SFRPAGE;PIOCON1|=0x02;clr_SFRS_SFRPAGE        //P1.4
             - as PWM1 output enable 
 894      =3  #define    ENABLE_PWM0_CH1_P11_OUTPUT        PIOCON0|=0x02                                                
             -                                 //P1.1 as PWM1               
 895      =3  #define    ENABLE_PWM0_CH0_P12_OUTPUT        PIOCON0|=0x01                                                
             -                                 //P1.2 as PWM0 output enable 
 896      =3  #define    ENABLE_ALL_PWM0_OUTPUT            PIOCON0=0xFF;PIOCON1=0xFF
 897      =3  
 898      =3  #define    DISABLE_PWM0_CH5_P15_OUTPUT       set_SFRS_SFRPAGE;PIOCON1&=0xDF;clr_SFRS_SFRPAGE        //P1.5
             - as PWM5 output disable
 899      =3  #define    DISABLE_PWM0_CH5_P03_OUTPUT       PIOCON0&=0xDF                                                
             -                                 //P0.3 as PWM5               
 900      =3  #define    DISABLE_PWM0_CH4_P01_OUTPUT       PIOCON0&=0xEF                                                
             -                                 //P0.1 as PWM4 output disable
 901      =3  #define    DISABLE_PWM0_CH3_P04_OUTPUT       set_SFRS_SFRPAGE;PIOCON1&=0xF7;clr_SFRS_SFRPAGE        //P0.4
             - as PWM3 output disable
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 24  

 902      =3  #define    DISABLE_PWM0_CH3_P00_OUTPUT       PIOCON0&=0xF7                                                
             -                                 //P0.0 as PWM3               
 903      =3  #define    DISABLE_PWM0_CH2_P05_OUTPUT       set_SFRS_SFRPAGE;PIOCON1&=0xFB;clr_SFRS_SFRPAGE        //P1.0
             - as PWM2 output disable
 904      =3  #define    DISABLE_PWM0_CH2_P10_OUTPUT       PIOCON0&=0xFB                                                
             -                                 //P1.0 as PWM2               
 905      =3  #define    DISABLE_PWM0_CH1_P14_OUTPUT       set_SFRS_SFRPAGE;PIOCON1&=0xFD;clr_SFRS_SFRPAGE        //P1.4
             - as PWM1 output disable
 906      =3  #define    DISABLE_PWM0_CH1_P11_OUTPUT       PIOCON0&=0xFD                                                
             -                                 //P1.1 as PWM1               
 907      =3  #define    DISABLE_PWM0_CH0_P12_OUTPUT       PIOCON0&=0xFE                                                
             -                                 //P1.2 as PWM0 output disable
 908      =3  #define    DISABLE_ALL_PWM0_OUTPUT           PIOCON0=0x00;PIOCON1=0x00
 909      =3  //--------- PWM0 I/O Polarity Control ---------------------------
 910      =3  #define    PWM0_CH5_OUTPUT_INVERSE           PNP|=0x20
 911      =3  #define    PWM0_CH4_OUTPUT_INVERSE           PNP|=0x10
 912      =3  #define    PWM0_CH3_OUTPUT_INVERSE           PNP|=0x08
 913      =3  #define    PWM0_CH2_OUTPUT_INVERSE           PNP|=0x04
 914      =3  #define    PWM0_CH1_OUTPUT_INVERSE           PNP|=0x02
 915      =3  #define    PWM0_CH0_OUTPUT_INVERSE           PNP|=0x01
 916      =3  #define    PWM0_OUTPUT_ALL_INVERSE           PNP|=0xFF
 917      =3  #define    PWM0_CH5_OUTPUT_NORMAL            PNP&=0xDF
 918      =3  #define    PWM0_CH4_OUTPUT_NORMAL            PNP&=0xEF
 919      =3  #define    PWM0_CH3_OUTPUT_NORMAL            PNP&=0xF7
 920      =3  #define    PWM0_CH2_OUTPUT_NORMAL            PNP&=0xFB
 921      =3  #define    PWM0_CH1_OUTPUT_NORMAL            PNP&=0xFD
 922      =3  #define    PWM0_CH0_OUTPUT_NORMAL            PNP&=0xFE
 923      =3  #define    PWM0_OUTPUT_ALL_NORMAL            PNP&=0x00
 924      =3  
 925      =3  //--------- PMW0 interrupt setting ------------------------------
 926      =3  #define    PWM0_FALLING_INT                  set_SFRS_SFRPAGE;PWMINTC&=0xCF;PWMINTC|=0x00;clr_SFRS_SFRPAGE
 927      =3  #define    PWM0_RISING_INT                   set_SFRS_SFRPAGE;PWMINTC&=0xCF;PWMINTC|=0x10;clr_SFRS_SFRPAGE
 928      =3  #define    PWM0_CENTRAL_POINT_INT            set_SFRS_SFRPAGE;PWMINTC&=0xCF;PWMINTC|=0x20;clr_SFRS_SFRPAGE
 929      =3  #define    PWM0_PERIOD_END_INT               set_SFRS_SFRPAGE;PWMINTC&=0xCF;PWMINTC|=0x30;clr_SFRS_SFRPAGE
 930      =3  //--------- PWM0 interrupt pin select ---------------------------
 931      =3  #define    PWM0_INT_PWM0                     set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x00;clr_SFRS_SFRPAGE
 932      =3  #define    PWM0_INT_PWM1                     set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x01;clr_SFRS_SFRPAGE
 933      =3  #define    PWM0_INT_PWM2                     set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x02;clr_SFRS_SFRPAGE
 934      =3  #define    PWM0_INT_PWM3                     set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x03;clr_SFRS_SFRPAGE
 935      =3  #define    PWM0_INT_PWM4                     set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x04;clr_SFRS_SFRPAGE
 936      =3  #define    PWM0_INT_PWM5                     set_SFRS_SFRPAGE;PWMINTC&=0xF8;PWMINTC|=0x05;clr_SFRS_SFRPAGE
 937      =3  //--------- PWM0 Dead time setting ------------------------------
 938      =3  #define    ENABLE_PWM0_CH45_DEADTIME         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x04;EA=BIT_TMP
 939      =3  #define    ENABLE_PWM0_CH23_DEADTIME         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x02;EA=BIT_TMP
 940      =3  #define    ENABLE_PWM0_CH01_DEADTIME         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x01;EA=BIT_TMP
 941      =3  
 942      =3  /*****************************************************************************************
 943      =3  * For ADC INIT setting 
 944      =3  *****************************************************************************************/
 945      =3  #define    ENABLE_ADC_AIN0                   clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x00;P17_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x01;ADCCON1|=1    //P17
 946      =3  #define    ENABLE_ADC_AIN1                   clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x01;P30_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x02;ADCCON1|=1    //P30
 947      =3  #define    ENABLE_ADC_AIN2                   clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x02;P07_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x04;ADCCON1|=1    //P07
 948      =3  #define    ENABLE_ADC_AIN3                   clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x03;P06_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x08;ADCCON1|=1    //P06
 949      =3  #define    ENABLE_ADC_AIN4                   clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x04;P05_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x10;ADCCON1|=1    //P05
 950      =3  #define    ENABLE_ADC_AIN5                   clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x05;P04_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x20;ADCCON1|=1    //P04
 951      =3  #define    ENABLE_ADC_AIN6                   clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x06;P03_INPUT_MODE;A
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 25  

             -INDIDS=0;AINDIDS|=0x40;ADCCON1|=1    //P03
 952      =3  #define    ENABLE_ADC_AIN7                   clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x07;P11_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x80;ADCCON1|=1    //P11
 953      =3  
 954      =3  #define    ENABLE_ADC_CH0                    clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x00;P17_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x01;ADCCON1|=1    //P17
 955      =3  #define    ENABLE_ADC_CH1                    clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x01;P30_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x02;ADCCON1|=1    //P30
 956      =3  #define    ENABLE_ADC_CH2                    clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x02;P07_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x04;ADCCON1|=1    //P07
 957      =3  #define    ENABLE_ADC_CH3                    clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x03;P06_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x08;ADCCON1|=1    //P06
 958      =3  #define    ENABLE_ADC_CH4                    clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x04;P05_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x10;ADCCON1|=1    //P05
 959      =3  #define    ENABLE_ADC_CH5                    clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x05;P04_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x20;ADCCON1|=1    //P04
 960      =3  #define    ENABLE_ADC_CH6                    clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x06;P03_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x40;ADCCON1|=1    //P03
 961      =3  #define    ENABLE_ADC_CH7                    clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x07;P11_INPUT_MODE;A
             -INDIDS=0;AINDIDS|=0x80;ADCCON1|=1    //P11
 962      =3  
 963      =3  #define    ENABLE_ADC_BANDGAP                clr_SFRS_SFRPAGE;ADCCON0&=0xF0;ADCCON0|=0x08;ADCCON0&=0xF8;AD
             -CCON1|=1                             //Band-gap 1.22V
 964      =3  #define    DISABLE_ADC                       clr_SFRS_SFRPAGE;ADCCON1&=0xFE;
 965      =3  
 966      =3  /* PWM trig ADC start define */ 
 967      =3  #define    PWM0_FALLINGEDGE_TRIG_ADC         clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x00;ADCCON1&=0xF3;AD
             -CCON1|=0x00;ADCCON1|=0x02
 968      =3  #define    PWM2_FALLINGEDGE_TRIG_ADC         clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x10;ADCCON1&=0xF3;AD
             -CCON1|=0x00;ADCCON1|=0x02
 969      =3  #define    PWM4_FALLINGEDGE_TRIG_ADC         clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x20;ADCCON1&=0xF3;AD
             -CCON1|=0x00;ADCCON1|=0x02
 970      =3  #define    PWM0_RISINGEDGE_TRIG_ADC          clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x00;ADCCON1&=0xF3;AD
             -CCON1|=0x04;ADCCON1|=0x02
 971      =3  #define    PWM2_RISINGEDGE_TRIG_ADC          clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x10;ADCCON1&=0xF3;AD
             -CCON1|=0x04;ADCCON1|=0x02
 972      =3  #define    PWM4_RISINGEDGE_TRIG_ADC          clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x20;ADCCON1&=0xF3;AD
             -CCON1|=0x04;ADCCON1|=0x02
 973      =3  #define    PWM0_CENTRAL_TRIG_ADC             clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x00;ADCCON1&=0xF3;AD
             -CCON1|=0x08;ADCCON1|=0x02
 974      =3  #define    PWM2_CENTRAL_TRIG_ADC             clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x10;ADCCON1&=0xF3;AD
             -CCON1|=0x08;ADCCON1|=0x02
 975      =3  #define    PWM4_CENTRAL_TRIG_ADC             clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x20;ADCCON1&=0xF3;AD
             -CCON1|=0x08;ADCCON1|=0x02
 976      =3  #define    PWM0_END_TRIG_ADC                 clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x00;ADCCON1&=0xF3;AD
             -CCON1|=0x0C;ADCCON1|=0x02
 977      =3  #define    PWM2_END_TRIG_ADC                 clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x10;ADCCON1&=0xF3;AD
             -CCON1|=0x0C;ADCCON1|=0x02
 978      =3  #define    PWM4_END_TRIG_ADC                 clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x20;ADCCON1&=0xF3;AD
             -CCON1|=0x0C;ADCCON1|=0x02
 979      =3  
 980      =3  #define    PWM0_CH0_FALLINGEDGE_TRIG_ADC     clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x00;ADCCON1&=0xF3;AD
             -CCON1|=0x00;ADCCON1|=0x02
 981      =3  #define    PWM0_CH2_FALLINGEDGE_TRIG_ADC     clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x10;ADCCON1&=0xF3;AD
             -CCON1|=0x00;ADCCON1|=0x02
 982      =3  #define    PWM0_CH4_FALLINGEDGE_TRIG_ADC     clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x20;ADCCON1&=0xF3;AD
             -CCON1|=0x04;ADCCON1|=0x02
 983      =3  #define    PWM0_CH0_RISINGEDGE_TRIG_ADC      clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x00;ADCCON1&=0xF3;AD
             -CCON1|=0x04;ADCCON1|=0x02
 984      =3  #define    PWM0_CH2_RISINGEDGE_TRIG_ADC      clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x10;ADCCON1&=0xF3;AD
             -CCON1|=0x04;ADCCON1|=0x02
 985      =3  #define    PWM0_CH4_RISINGEDGE_TRIG_ADC      clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x20;ADCCON1&=0xF3;AD
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 26  

             -CCON1|=0x06;ADCCON1|=0x02
 986      =3  #define    PWM0_CH0_CENTRAL_TRIG_ADC         clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x00;ADCCON1&=0xF3;AD
             -CCON1|=0x08;ADCCON1|=0x02
 987      =3  #define    PWM0_CH2_CENTRAL_TRIG_ADC         clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x10;ADCCON1&=0xF3;AD
             -CCON1|=0x08;ADCCON1|=0x02
 988      =3  #define    PWM0_CH4_CENTRAL_TRIG_ADC         clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x20;ADCCON1&=0xF3;AD
             -CCON1|=0x08;ADCCON1|=0x02
 989      =3  #define    PWM0_CH0_END_TRIG_ADC             clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x00;ADCCON1&=0xF3;AD
             -CCON1|=0x0C;ADCCON1|=0x02
 990      =3  #define    PWM0_CH2_END_TRIG_ADC             clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x10;ADCCON1&=0xF3;AD
             -CCON1|=0x0C;ADCCON1|=0x02
 991      =3  #define    PWM0_CH4_END_TRIG_ADC             clr_SFRS_SFRPAGE;ADCCON0&=0xCF;ADCCON0|=0x20;ADCCON1&=0xF3;AD
             -CCON1|=0x0C;ADCCON1|=0x02
 992      =3  
 993      =3  /* GPIO trig ADC start define*/
 994      =3  #define    P04_FALLINGEDGE_TRIG_ADC          clr_SFRS_SFRPAGE;ADCCON0|=0x30;ADCCON1&=0xBF;ADCCON1&=0xF3;AD
             -CCON1|=0x00;ADCCON1|=0x02
 995      =3  #define    P13_FALLINGEDGE_TRIG_ADC          clr_SFRS_SFRPAGE;ADCCON0|=0x30;ADCCON1|=0x40;ADCCON1&=0xF3;AD
             -CCON1|=0x00;ADCCON1|=0x02
 996      =3  #define    P04_RISINGEDGE_TRIG_ADC           clr_SFRS_SFRPAGE;ADCCON0|=0x30;ADCCON1&=0xBF;ADCCON1&=0xF3;AD
             -CCON1|=0x04;ADCCON1|=0x02
 997      =3  #define    P13_RISINGEDGE_TRIG_ADC           clr_SFRS_SFRPAGE;ADCCON0|=0x30;ADCCON1&=0xF7;ADCCON1&=0xF3;AD
             -CCON1|=0x04;ADCCON1|=0x02
 998      =3  
 999      =3  /*****************************************************************************************
1000      =3  * For SPI INIT setting 
1001      =3  *****************************************************************************************/
1002      =3  #define    SPICLK_FSYS_DIV2                  clr_SFRS_SFRPAGE;SPCR&=0xFC
1003      =3  #define    SPICLK_FSYS_DIV4                  clr_SFRS_SFRPAGE;SPCR&=0xFC;SPCR|=0x01
1004      =3  #define    SPICLK_FSYS_DIV8                  clr_SFRS_SFRPAGE;SPCR&=0xFC;SPCR|=0x02
1005      =3  #define    SPICLK_FSYS_DIV16                 clr_SFRS_SFRPAGE;SPCR&=0xFC;SPCR|=0x03
1006      =3  
1007      =3  #define    SS    P15
1008      =3  
1009      =3  /*****************************************************************************************
1010      =3  * For UART0 and UART1 and printf funcion 
1011      =3  *****************************************************************************************/
1012      =3  #define    ENABLE_UART0_PRINTF                set_SCON_TI;PRINTFG=1            //For printf function must 
             -setting TI = 1
1013      =3  #define    DISABLE_UART0_PRINTF               clr_SCON_TI;PRINTFG=0
1014      =3  #define    ENABLE_UART1_PRINTF                set_SCON_1_TI_1;PRINTFG=1
1015      =3  #define    DISABLE_UART1_PRINTF               clr_SCON_1_TI_1;PRINTFG=0
1016      =3  /*****************************************************************************************
1017      =3  * INT0 setting
1018      =3  *****************************************************************************************/
1019      =3  #define    INT0_FALLING_EDGE_TRIG             set_TCON_IT0
1020      =3  #define    INT0_LOW_LEVEL_TRIG                clr_TCON_IT0
1021      =3  
1022      =3  /*****************************************************************************************
1023      =3  * INT1 setting
1024      =3  *****************************************************************************************/
1025      =3  #define    INT1_FALLING_EDGE_TRIG             set_TCON_IT1
1026      =3  #define    INT1_LOW_LEVEL_TRIG                clr_TCON_IT1
1027      =3  
1028      =3  /*****************************************************************************************
1029      =3  * WDT setting
1030      =3  *****************************************************************************************/
1031      =3  #define    WDT_TIMEOUT_6MS                    TA=0xAA;TA=0x55;WDCON&=0xF8
1032      =3  #define    WDT_TIMEOUT_25MS                   TA=0xAA;TA=0x55;WDCON&=0xF8;WDCON|=0x01
1033      =3  #define    WDT_TIMEOUT_50MS                   TA=0xAA;TA=0x55;WDCON&=0xF8;WDCON|=0x02
1034      =3  #define    WDT_TIMEOUT_100MS                  TA=0xAA;TA=0x55;WDCON&=0xF8;WDCON|=0x03
1035      =3  #define    WDT_TIMEOUT_200MS                  TA=0xAA;TA=0x55;WDCON&=0xF8;WDCON|=0x04
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 27  

1036      =3  #define    WDT_TIMEOUT_400MS                  TA=0xAA;TA=0x55;WDCON&=0xF8;WDCON|=0x05
1037      =3  #define    WDT_TIMEOUT_800MS                  TA=0xAA;TA=0x55;WDCON&=0xF8;WDCON|=0x06
1038      =3  #define    WDT_TIMEOUT_1_6S                   TA=0xAA;TA=0x55;WDCON&=0xF8;WDCON|=0x07
1039      =3  
1040      =3  #define    WDT_RUN_IN_POWERDOWN_ENABLE        set_WDCON_WIDPD
1041      =3  #define    WDT_RUN_IN_POWERDOWN_DISABLE       clr_WDCON_WIDPD
1042      =3  #define    WDT_COUNTER_CLEAR                  set_WDCON_WDCLR
1043      =3  #define    WDT_COUNTER_RUN                    set_WDCON_WDTR
  25      =2  #include "adc.h"
   1      =3  #define ADC_SINGLE      1
   2      =3  #define ADC_CONTINUOUS  2
   3      =3  #define VBG             8
   4      =3  #define VTEMP           9
   5      =3  #define VLDO           10
   6      =3  
   7      =3  #define ADC_HWT_PWM0CH0    0
   8      =3  #define ADC_HWT_PWM0CH2    1
   9      =3  #define ADC_HWT_PWM0CH4    2
  10      =3  #define ADC_HWT_STADC    3
  11      =3  
  12      =3  #define ADC_HWT_FALLINGEDGE    0
  13      =3  #define ADC_HWT_RISINGEDGE     1
  14      =3  #define ADC_HWT_CENTRAL        2
  15      =3  #define ADC_HWT_END            3
  16      =3  
  17      =3  #define ADC_INT_HALFDONE       0
  18      =3  #define ADC_INT_CONTDONE       1
  19      =3  #define ADC_INT_SINGLE         3
  20      =3  
  21      =3  #define ADCSlowSpeed           0
  22      =3  #define ADCHighSpeed           1
  23      =3  
  24      =3  #define ADC_CH0                 0
  25      =3  #define ADC_CH1                 1
  26      =3  #define ADC_CH2                 2
  27      =3  #define ADC_CH3                 3
  28      =3  #define ADC_CH4                 4
  29      =3  #define ADC_CH5                 5
  30      =3  #define ADC_CH6                 6
  31      =3  #define ADC_CH7                 7
  32      =3  #define ADC_BANDGAP             8
  33      =3  
  34      =3  #define ADC_ADCDIV1                 0
  35      =3  #define ADC_ADCDIV2                 1
  36      =3  #define ADC_ADCDIV4                 2
  37      =3  #define ADC_ADCDIV8                 3
  38      =3  
  39      =3  #define ADC_ADCAQT0                 0
  40      =3  #define ADC_ADCAQT1                 1
  41      =3  #define ADC_ADCAQT2                 2
  42      =3  #define ADC_ADCAQT3                 3
  43      =3  #define ADC_ADCAQT4                 4
  44      =3  #define ADC_ADCAQT5                 5
  45      =3  #define ADC_ADCAQT6                 6
  46      =3  #define ADC_ADCAQT7                 7
  47      =3  
  48      =3  
  49      =3  void ADC_InitialContinous(unsigned int u16ADCRBase, unsigned char u8ADCRLength);
  50      =3  void ADC_ConvertTime(unsigned char u8ADCDIV, unsigned char u8ADCAQT);
  51      =3  void ADC_ComapreMode(unsigned char u8ADCCMPEN, unsigned int u16ADCCMPVALUE);
  52      =3  unsigned int READ_BANDGAP(void);
  53      =3  unsigned int ADC_CH7_Read(void);
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 28  

  54      =3  unsigned int ADC_CH6_Read(void);
  26      =2  #include "bod.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  #define   VBOD_1_8           0x70
   9      =3  #define   VBOD_2_0           0x50
  10      =3  #define   VBOD_2_4           0x40
  11      =3  #define   VBOD_2_7           0x30
  12      =3  #define   VBOD_3_0           0x20
  13      =3  #define   VBOD_3_7           0x10
  14      =3  #define   VBOD_4_4           0x00
  15      =3  
  16      =3  #define   BOD_Reset_Enable   0x04
  17      =3  #define   BOD_Reset_Disable  0
  18      =3  
  19      =3  #define   LPBOD_Mode_Normal  0
  20      =3  #define   LPBOD_Mode_1       0x02
  21      =3  #define   LPBOD_Mode_2       0x04
  22      =3  #define   LPBOD_Mode_3       0x06
  23      =3  
  24      =3  
  25      =3  void BOD_Open(unsigned char u8bodstatus, unsigned char u8bodlevel, unsigned char u8bodresetstatus);
  26      =3  void BOD_LowPower(unsigned char u8LPBDD);
  27      =3  void BOD_Interrupt (unsigned char u8bodINTstatus);
  28      =3  
  27      =2  #include "common.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  #define  GPIO_LED                P12
   9      =3  #define  GPIO_LED_QUASI_MODE     P12_QUASI_MODE
  10      =3  #define  GPIO_PRINTF             P06
  11      =3  
  12      =3  #define  BOOT_APROM     0
  13      =3  #define  BOOT_LDROM     2
  14      =3  
  15      =3  extern bit BIT_TMP;
  16      =3  
  17      =3  unsigned char Read_APROM_BYTE(unsigned int code *u16_addr);
  18      =3  void Software_Reset(unsigned char u8Bootarea);
  19      =3  void PowerDown_Mode(bit PDStatus);
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 29  

  20      =3  void Idle_Mode(bit IdleStatus);
  28      =2  #include "delay.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  #define TIMER0        0
   9      =3  #define TIMER1        1
  10      =3  #define TIMER2        2
  11      =3  #define TIMER3        3
  12      =3  
  13      =3  
  14      =3  #define UNIT_1US      0
  15      =3  #define UNIT_10US     1
  16      =3  #define UNIT_100US   2
  17      =3  #define UNIT_1MS     3
  18      =3  #define UNIT_10MS     4
  19      =3  #define UNIT_100MS    5
  20      =3  #define UNIT_1S       6
  21      =3  
  22      =3  
  23      =3  /*****************************************************************************************
  24      =3  * For TIMER VALUE setting is base on " option -> C51 -> Preprocesser Symbols -> Define "
  25      =3  *****************************************************************************************/
  26      =3  // define timer base value Fsys = 11.0592MHz 
  27      =3    #define TIMER_DIV12_VALUE_10us_FOSC_110592      65536-9      //9*12/11.0592 = 10 uS,      // Timer divid
             -er = 12   for TM0/TM1
  28      =3    #define TIMER_DIV12_VALUE_1ms_FOSC_110592        65536-923    //923*12/11.0592 = 1 mS      // Timer divi
             -der = 12
  29      =3    #define TIMER_DIV12_VALUE_10ms_FOSC_110592      65536-9216    //18432*12/22118400 = 10 ms    // Timer di
             -vider = 12
  30      =3    #define TIMER_DIV4_VALUE_10us_FOSC_110592        65536-28    //28*4/11.0592 = 10 uS      // Timer divide
             -r = 4  for TM2/TM3
  31      =3    #define TIMER_DIV4_VALUE_1ms_FOSC_110592        65536-2765    //2765*4/11.0592 = 1 mS      // Timer divi
             -der = 4
  32      =3    #define TIMER_DIV4_VALUE_100us_FOSC_110592      65536-277    //553*4/22118400 = 100 us    // Timer divid
             -er = 4
  33      =3    #define TIMER_DIV4_VALUE_200us_FOSC_110592      65536-553    //1106*4/22118400 = 200 us    // Timer divi
             -der = 4
  34      =3    #define TIMER_DIV4_VALUE_500us_FOSC_110592      65536-1383    //2765*4/22118400 = 500 us    // Timer div
             -ider = 4    
  35      =3    #define TIMER_DIV16_VALUE_10ms_FOSC_110592      65536-6912    //1500*16/22118400 = 10 ms    // Timer div
             -ider = 16
  36      =3    #define TIMER_DIV64_VALUE_30ms_FOSC_110592      65536-5184    //10368*64/22118400 = 30 ms    // Timer di
             -vider = 64
  37      =3    #define TIMER_DIV128_VALUE_100ms_FOSC_110592    65536-8640    //17280*128/22118400 = 100 ms    // Timer 
             -divider = 128
  38      =3    #define TIMER_DIV128_VALUE_200ms_FOSC_110592    65536-17280    //34560*128/22118400 = 200 ms    // Timer
             - divider = 128
  39      =3    #define TIMER_DIV256_VALUE_500ms_FOSC_110592    65536-21600    //43200*256/22118400 = 500 ms     // Time
             -r divider = 256
  40      =3    #define TIMER_DIV512_VALUE_1s_FOSC_110592        65536-21600    //43200*512/22118400 = 1 s    // Timer d
             -ivider = 512
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 30  

  41      =3  // define timer base value Fsys = 16MHz 
  42      =3    #define TIMER_DIV12_VALUE_10us_FOSC_160000      65536-8    //13*12/16000000 = 10 uS,        // Timer div
             -ider = 12 for TM0/TM1
  43      =3    #define TIMER_DIV12_VALUE_100us_FOSC_160000      65536-130    //130*12/16000000 = 10 uS,      // Timer d
             -ivider = 12 
  44      =3    #define TIMER_DIV12_VALUE_1ms_FOSC_160000        65536-1334    //1334*12/16000000 = 1 mS,       // Timer
             - divider = 12 
  45      =3    #define TIMER_DIV12_VALUE_10ms_FOSC_160000      65536-13334    //13334*12/16000000 = 10 mS     // Timer 
             -divider = 12 
  46      =3    #define TIMER_DIV12_VALUE_40ms_FOSC_160000      65536-53336    //53336*12/16000000 = 40 ms      // Timer
             - divider = 12 
  47      =3    #define TIMER_DIV4_VALUE_10us_FOSC_160000        65536-30    //40*4/16000000 = 10 uS,        // Timer di
             -vider = 4  for TM2/TM3
  48      =3    #define TIMER_DIV4_VALUE_100us_FOSC_160000      65536-400    //400*4/16000000 = 100 us        // Timer d
             -ivider = 4
  49      =3    #define TIMER_DIV4_VALUE_200us_FOSC_160000      65536-800    //800*4/16000000 = 200 us        // Timer d
             -ivider = 4
  50      =3    #define TIMER_DIV4_VALUE_416us_FOSC_160000      65536-1650
  51      =3    #define TIMER_DIV4_VALUE_500us_FOSC_160000      65536-2000    //2000*4/16000000 = 500 us      // Timer d
             -ivider = 4
  52      =3    #define TIMER_DIV4_VALUE_1ms_FOSC_160000        65536-4000    //4000*4/16000000 = 1 mS,       // Timer d
             -ivider = 4
  53      =3    #define TIMER_DIV4_VALUE_10ms_FOSC_160000        65536-40000    //40000*4/16000000 = 10 mS,       // Tim
             -er divider = 4
  54      =3    #define TIMER_DIV16_VALUE_10ms_FOSC_160000      65536-10000    //10000*16/16000000 = 10 ms      // Timer
             -  divider = 16
  55      =3    #define TIMER_DIV64_VALUE_30ms_FOSC_160000      65536-7500    //7500*64/16000000 = 30 ms      // Timer d
             -ivider = 64
  56      =3    #define TIMER_DIV128_VALUE_1ms_FOSC_160000      65536-125      //125*128/16000000 = 1 ms    // Timer div
             -ider = 128
  57      =3    #define TIMER_DIV128_VALUE_10ms_FOSC_160000      65536-1250    //1250*128/16000000 = 10 ms    // Timer d
             -ivider = 128
  58      =3    #define TIMER_DIV128_VALUE_100ms_FOSC_160000    65536-12500    //12500*128/16000000 = 100 ms    // Timer
             - divider = 128
  59      =3    #define TIMER_DIV128_VALUE_200ms_FOSC_160000    65536-25000    //25000*128/16000000 = 200 ms    // Timer
             - divider = 128
  60      =3    #define TIMER_DIV256_VALUE_500ms_FOSC_160000    65536-31250    //31250*256/16000000 = 500 ms   // Timer 
             -divider = 256
  61      =3    #define TIMER_DIV512_VALUE_100ms_FOSC_160000    65536-3125    //3125*512/16000000 = 100ms.      // Timer
             - Divider = 512
  62      =3    #define TIMER_DIV512_VALUE_1s_FOSC_160000        65536-31250    //31250*512/16000000 = 1 s.      // Time
             -r Divider = 512
  63      =3  // define timer base value Fsys = 16.6MHz 
  64      =3    #define TIMER_DIV12_VALUE_10us_FOSC_166000      65536-14    //14*12/16600000 = 10 uS,        // Timer di
             -vider = 12 for TM0/TM1
  65      =3    #define TIMER_DIV12_VALUE_100us_FOSC_166000      65536-138    //138*12/16600000 = 100 uS,      // Timer 
             -divider = 12 
  66      =3    #define TIMER_DIV12_VALUE_1ms_FOSC_166000        65536-1384  //1384*12/16600000 = 1 mS,       // Timer d
             -ivider = 12 
  67      =3    #define TIMER_DIV12_VALUE_10ms_FOSC_166000      65536-13834  //13834*12/16600000 = 10 mS     // Timer di
             -vider = 12 
  68      =3    #define TIMER_DIV12_VALUE_40ms_FOSC_166000      65536-55333  //55333*12/16600000 = 40 ms      // Timer d
             -ivider = 12 
  69      =3    #define TIMER_DIV4_VALUE_10us_FOSC_166000        65536-41    //41*4/16600000 = 10 uS,        // Timer di
             -vider = 4  for TM2/TM3
  70      =3    #define TIMER_DIV4_VALUE_100us_FOSC_166000      65536-415    //415*4/16600000 = 100 us        // Timer d
             -ivider = 4
  71      =3    #define TIMER_DIV4_VALUE_200us_FOSC_166000      65536-830    //830*4/16600000 = 200 us        // Timer d
             -ivider = 4
  72      =3    #define TIMER_DIV4_VALUE_500us_FOSC_166000      65536-2075  //2075*4/16600000 = 500 us      // Timer div
             -ider = 4
  73      =3    #define TIMER_DIV4_VALUE_1ms_FOSC_166000        65536-4150  //4150*4/16600000 = 1 mS,       // Timer div
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 31  

             -ider = 4
  74      =3    #define TIMER_DIV16_VALUE_10ms_FOSC_166000      65536-10375  //10375*16/16600000 = 10 ms      // Timer  
             -divider = 16
  75      =3    #define TIMER_DIV64_VALUE_30ms_FOSC_166000      65536-7781  //7781*64/16600000 = 30 ms      // Timer div
             -ider = 64
  76      =3    #define TIMER_DIV128_VALUE_100ms_FOSC_166000    65536-12969  //12969*128/16600000 = 100 ms    // Timer d
             -ivider = 128
  77      =3    #define TIMER_DIV128_VALUE_200ms_FOSC_166000    65536-25937  //25937*128/16600000 = 200 ms    // Timer d
             -ivider = 128
  78      =3    #define TIMER_DIV256_VALUE_500ms_FOSC_166000    65536-32422  //32422*256/16600000 = 500 ms   // Timer di
             -vider = 256
  79      =3    #define TIMER_DIV512_VALUE_1s_FOSC_166000        65536-32421  //32421*512/16600000 = 1 s.      // Timer 
             -Divider = 512
  80      =3  // define timer base value Fsys = 18.432MHz 
  81      =3    #define TIMER_DIV12_VALUE_10us_FOSC_184320      65536-15        //15*12/18.432 = 10 uS,  Timer Clock = F
             -sys/12
  82      =3    #define TIMER_DIV12_VALUE_1ms_FOSC_184320        65536-1536      //1536*12/18.432 = 1 mS, Timer Clock = 
             -Fsys/12
  83      =3    #define TIMER_DIV4_VALUE_10us_FOSC_184320        65536-46        //46*4/18.432 = 10 uS,   Timer Clock = 
             -Fsys/4
  84      =3    #define TIMER_DIV4_VALUE_1ms_FOSC_184320        65536-4608      //4608*4/18.432 = 1 mS,  Timer Clock = F
             -sys/4
  85      =3  // define timer base value Fsys = 20 MHz
  86      =3    #define TIMER_DIV12_VALUE_10us_FOSC_200000      65536-17    //17*12/20000000 = 10 uS,  Timer Clock = Fsy
             -s/12
  87      =3    #define TIMER_DIV12_VALUE_1ms_FOSC_200000        65536-1667      //1667*12/20000000 = 1 mS, Timer Clock 
             -= Fsys/12
  88      =3    #define TIMER_DIV4_VALUE_10us_FOSC_200000        65536-50        //50*4/20000000 = 10 uS,    Timer Clock
             - = Fsys/4
  89      =3    #define TIMER_DIV4_VALUE_1ms_FOSC_200000        65536-5000      //5000*4/20000000 = 1 mS,   Timer Clock 
             -= Fsys/4
  90      =3  // define timer base value Fsys = 22.1184 MHz 
  91      =3    #define TIMER_DIV12_VALUE_10us_FOSC_221184      65536-18         //18*12/22118400 = 10 uS,        // Tim
             -er divider = 12
  92      =3    #define TIMER_DIV12_VALUE_100us_FOSC_221184      65536-184       //184*12/22118400 = 10 uS,        // Ti
             -mer divider = 12
  93      =3    #define TIMER_DIV12_VALUE_1ms_FOSC_221184        65536-1843      //1843*12/22118400 = 1 mS,       // Tim
             -er divider = 12
  94      =3    #define TIMER_DIV12_VALUE_10ms_FOSC_221184      65536-18432      //18432*12/22118400 = 10 ms      // Tim
             -er divider = 12
  95      =3    #define TIMER_DIV4_VALUE_10us_FOSC_221184        65536-56      //9*4/22118400 = 10 uS,          // Timer
             - divider = 4
  96      =3    #define TIMER_DIV4_VALUE_1ms_FOSC_221184        65536-5530      //923*4/22118400 = 1 mS,         // Time
             -r divider = 4
  97      =3    #define TIMER_DIV4_VALUE_100us_FOSC_221184      65536-553      //553*4/22118400 = 100 us      // Timer d
             -ivider = 4
  98      =3    #define TIMER_DIV4_VALUE_200us_FOSC_221184      65536-1106      //1106*4/22118400 = 200 us      // Timer
             - divider = 4
  99      =3    #define TIMER_DIV4_VALUE_500us_FOSC_221184      65536-2765      //2765*4/22118400 = 500 us      // Timer
             - divider = 4    
 100      =3    #define TIMER_DIV16_VALUE_10ms_FOSC_221184      65536-13824      //1500*16/22118400 = 10 ms      // Time
             -r divider = 16
 101      =3    #define TIMER_DIV64_VALUE_30ms_FOSC_221184      65536-10368      //10368*64/22118400 = 30 ms      // Tim
             -er divider = 64
 102      =3    #define TIMER_DIV128_VALUE_100ms_FOSC_221184    65536-17280      //17280*128/22118400 = 100 ms      // T
             -imer divider = 128
 103      =3    #define TIMER_DIV128_VALUE_200ms_FOSC_221184    65536-34560      //34560*128/22118400 = 200 ms      // T
             -imer divider = 128
 104      =3    #define TIMER_DIV256_VALUE_500ms_FOSC_221184    65536-43200      //43200*256/22118400 = 500 ms       // 
             -Timer divider = 256
 105      =3    #define TIMER_DIV512_VALUE_1s_FOSC_221184        65536-43200      //43200*512/22118400 = 1 s      // Tim
             -er divider = 512
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 32  

 106      =3  // define timer base value Fsys = 24 MHz
 107      =3    #define TIMER_DIV12_VALUE_10us_FOSC_240000      65536-20      //20*12/24000000 = 10 uS,        // Timer 
             -divider = 12
 108      =3    #define TIMER_DIV12_VALUE_100us_FOSC_240000      65536-200    //130*12/16000000 = 10 uS,      // Timer d
             -ivider = 12 
 109      =3    #define TIMER_DIV12_VALUE_1ms_FOSC_240000        65536-2000      //2000*12/24000000 = 1 mS,       // Tim
             -er divider = 12
 110      =3    #define TIMER_DIV12_VALUE_10ms_FOSC_240000      65536-20000      //2000*12/24000000 = 10 mS       // Tim
             -er divider = 12
 111      =3    #define TIMER_DIV4_VALUE_10us_FOSC_240000        65536-60      //60*4/24000000 = 10 uS,          // Time
             -r divider = 4
 112      =3    #define TIMER_DIV4_VALUE_100us_FOSC_240000      65536-600      //600*4/24000000 = 100 us      // Timer d
             -ivider = 4
 113      =3    #define TIMER_DIV4_VALUE_200us_FOSC_240000      65536-1200      //1200*4/24000000 = 200 us      // Timer
             - divider = 4
 114      =3    #define TIMER_DIV4_VALUE_500us_FOSC_240000      65536-3000      //3000*4/24000000 = 500 us      // Timer
             - divider = 4
 115      =3    #define TIMER_DIV4_VALUE_1ms_FOSC_240000        65536-6000      //6000*4/24000000 = 1 mS,         // Tim
             -er divider = 4
 116      =3    #define TIMER_DIV16_VALUE_10ms_FOSC_240000      65536-15000      //15000*16/24000000 = 10 ms      // Tim
             -er divider = 16
 117      =3    #define TIMER_DIV64_VALUE_30ms_FOSC_240000      65536-11250      //11250*64/24000000 = 30 ms      // Tim
             -er divider = 64
 118      =3    #define TIMER_DIV128_VALUE_100ms_FOSC_240000    65536-18750      //37500*128/24000000 = 200 ms      // T
             -imer divider = 128
 119      =3    #define TIMER_DIV128_VALUE_200ms_FOSC_240000    65536-37500      //37500*128/24000000 = 200 ms      // T
             -imer divider = 128
 120      =3    #define TIMER_DIV256_VALUE_500ms_FOSC_240000    65536-46875      //46875*256/24000000 = 500 ms       // 
             -Timer divider = 256
 121      =3    #define TIMER_DIV512_VALUE_100ms_FOSC_240000    65536-4687      //4687*512/24000000 = 100 ms       // Ti
             -mer divider = 512
 122      =3    #define TIMER_DIV512_VALUE_500ms_FOSC_240000    65536-23437      //4687*512/24000000 = 100 ms       // T
             -imer divider = 512
 123      =3    #define TIMER_DIV512_VALUE_1s_FOSC_240000        65536-46875      //46875*512/24000000 = 1 s.        // 
             -Timer Divider = 512
 124      =3  
 125      =3  
 126      =3  
 127      =3  void Timer0_Delay(unsigned long u32SYSCLK, unsigned int u16CNT, unsigned int u6DLYUnit);
 128      =3  void Timer1_Delay(unsigned long u32SYSCLK, unsigned int u16CNT, unsigned int u6DLYUnit);
 129      =3  void Timer2_Delay(unsigned long u32SYSCLK,unsigned int u16TMDIV, unsigned int u16CNT, unsigned long u32DLY
             -Unit);
 130      =3  void Timer3_Delay(unsigned long u32SYSCLK,unsigned char u8TMDIV, unsigned int u16CNT, unsigned long u32DLY
             -Unit);
 131      =3  void Timer_Interrupt_Enable(unsigned char u8TM);
  29      =2  #include "eeprom.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  void Write_DATAFLASH_BYTE(unsigned int u16EPAddr,unsigned char u8EPData);
   9      =3  void Write_DATAFLASH_ARRAY(unsigned int u16_addr,unsigned char *pDat,unsigned int num);
  10      =3  void Read_DATAFLASH_ARRAY(unsigned int u16_addr,unsigned char *pDat,unsigned int num);
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 33  

  11      =3  unsigned char WriteDataToOnePage(unsigned int u16_addr,const unsigned char *pDat,unsigned char num);
  30      =2  #include "i2c.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  
   9      =3  #define I2C0    0
  10      =3  #define I2C1    1
  11      =3  
  12      =3  #define      I2C_R    1
  13      =3  #define      I2C_W    0
  14      =3  
  15      =3  void I2C_Master_Open( unsigned long u32SYSCLK, unsigned long u32I2CCLK);
  16      =3  void I2C_Slave_Open( unsigned char u8SlaveAddress0);
  17      =3  void I2C_Close(void);
  18      =3  void I2C_Interrupt(unsigned char u8I2CStatus);
  19      =3  unsigned char I2C_GetStatus(void);
  20      =3  void I2C_SetSlaveAddrMask( unsigned char u8SlaveNo, unsigned char u8SlaveAddrMask);
  21      =3  void I2C_Timeout( unsigned char u8I2CTRStatus );
  22      =3  void I2C_ClearTimeoutFlag(void);
  23      =3  void I2C_Slave_Address_Mask( unsigned char u8I2CAddMaskStatus, unsigned char u8I2CAddMaskBit);
  24      =3  void I2C0_SI_Check(void);
  31      =2  #include "iap.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  #define     BYTE_READ_CID            0x0B
   9      =3  #define     BYTE_READ_DID            0x0C
  10      =3  #define     BYTE_READ_UID            0x04
  11      =3  
  12      =3  #define     PAGE_ERASE_AP            0x22
  13      =3  #define     BYTE_READ_AP             0x00
  14      =3  #define     BYTE_PROGRAM_AP          0x21
  15      =3  #define     BYTE_READ_ID             0x0C
  16      =3  #define     PAGE_ERASE_CONFIG        0xE2
  17      =3  #define     BYTE_READ_CONFIG         0xC0
  18      =3  #define     BYTE_PROGRAM_CONFIG      0xE1
  19      =3  
  20      =3  extern unsigned char xdata DIDBuffer[2];
  21      =3  extern unsigned char xdata PIDBuffer[2];
  22      =3  extern unsigned char xdata UIDBuffer[12];
  23      =3  extern unsigned char xdata UCIDBuffer[12];
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 34  

  24      =3  extern unsigned char xdata IAPDataBuf[128];
  25      =3  extern unsigned char xdata IAPCFBuf[5];
  26      =3  extern bit  ConfigModifyFlag;
  27      =3  
  28      =3  void Trigger_IAP(void);
  29      =3  void Erase_LDROM(unsigned int u16IAPStartAddress, unsigned int u16IAPDataSize);
  30      =3  void Erase_Verify_LDROM(unsigned int u16IAPStartAddress, unsigned int u16IAPDataSize);
  31      =3  void Program_LDROM(unsigned int u16IAPStartAddress, unsigned int u16IAPDataSize);
  32      =3  void Program_Verify_LDROM(unsigned int u16IAPStartAddress, unsigned int u16IAPDataSize);
  33      =3  void Erase_APROM(unsigned int u16IAPStartAddress, unsigned int u16IAPDataSize);
  34      =3  void Erase_Verify_APROM(unsigned int u16IAPStartAddress, unsigned int u16IAPDataSize);
  35      =3  void Program_APROM(unsigned int u16IAPStartAddress, unsigned int u16IAPDataSize);
  36      =3  void Program_Verify_APROM(unsigned int u16IAPStartAddress, unsigned int u16IAPDataSize);
  37      =3  void Modify_CONFIG(unsigned char u8CF0,unsigned char u8CF1,unsigned char u8CF2,unsigned char u8CF3,unsigne
             -d char u8CF4);
  38      =3  void Read_UID(void);
  39      =3  void Read_UCID(void);
  40      =3  void Read_DID(void);
  41      =3  void Read_PID(void);
  42      =3  void Read_CONFIG(void);
  32      =2  #include "iap_sprom.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  extern unsigned char xdata IAPSPDataBuf[127];
   9      =3  
  10      =3  void Erase_SPROM(void);
  11      =3  void Erase_Verify_SPROM(unsigned int u16IAPDataSize);
  12      =3  void Program_SPROM(unsigned int u16IAPDataSize);
  13      =3  void Read_Verify_SPROM( unsigned int u16IAPDataSize);
  33      =2  #include "isr.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  #define  INT_INT0         1
   9      =3  #define  INT_BOD          2
  10      =3  #define  INT_WDT          3
  11      =3  #define  INT_Timer0       4
  12      =3  #define  INT_I2C0         5
  13      =3  #define  INT_ADC          6
  14      =3  #define  INT_INT1         7
  15      =3  #define  INT_PIT          8
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 35  

  16      =3  #define  INT_Timer1       9
  17      =3  #define  INT_UART0        11
  18      =3  #define  INT_PWM0_Brake   12
  19      =3  #define  INT_SPI0         13
  20      =3  #define  INT_Timer2       14
  21      =3  #define  INT_Capture      15
  22      =3  #define  INT_PWM0         16
  23      =3  #define  INT_UART1        17
  24      =3  #define  INT_Timer3       18
  25      =3  #define  INT_WKT          19
  26      =3  #define  INT_SMC0         21
  27      =3  #define  INT_PDMA0        22
  28      =3  #define  INT_PDMA1        23
  29      =3  #define  INT_SPI1         24
  30      =3  #define  INT_ACMP         25
  31      =3  #define  INT_I2C1         26
  32      =3  #define  INT_PWM123       27
  33      =3  #define  INT_SMC1         28
  34      =3  #define  INT_PDMA2        29
  35      =3  #define  INT_PDMA3        30
  36      =3  #define  INT_RTC          31
  37      =3  
  38      =3  void Set_Interrupt_Priority_Level( unsigned char u8InterruptSource, unsigned char u8u8InterruptPriorityLev
             -el);
  34      =2  #include "eeprom_sprom.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  extern unsigned char Read_SPROM_BYTE(unsigned char code *u8_addr);
   9      =3  void Write_SPROM_DATAFLASH_ARRAY(unsigned char u8_addr, unsigned char *pDat, unsigned int num);
  10      =3  void Read_SPROM_DATAFLASH_ARRAY(unsigned int u16_addr, unsigned char *pDat, unsigned int num);
  35      =2  #include "pwm.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  #define PWM_FSYS         0
   9      =3  #define PWM_TIMER1       1
  10      =3  
  11      =3  #define Independent      0
  12      =3  #define Complementary    1
  13      =3  #define Synchronous      2
  14      =3  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 36  

  15      =3  #define EdgeAligned      0
  16      =3  #define CenterAligned    1
  17      =3  
  18      =3  #define PWM0_CH01        0
  19      =3  #define PWM0_CH23        1
  20      =3  #define PWM0_CH45        2
  21      =3  #define PWM0_ALL         3
  22      =3  
  23      =3  #define PWM1_CH01        0
  24      =3  #define PWM1_CH23        1
  25      =3  #define PWM1_CH45        2
  26      =3  #define PWM1_ALL         3
  27      =3  
  28      =3  void PWM0_ClockSource(unsigned char u8PWMCLKSource, unsigned char u8PWM0CLKDIV);
  29      =3  void PWM0_ConfigOutputChannel(unsigned char u8PWM0ChannelNum,
  30      =3                                unsigned char u8PWM0OPMode,
  31      =3                                unsigned char u8PWM0PwmType,
  32      =3                                unsigned long u32PWM0Frequency,
  33      =3                                unsigned int u16PWM0DutyCycle);
  34      =3  void PWM0_DeadZoneEnable(unsigned char u8PWM0Pair, unsigned int u16PWM0DZValue);
  35      =3  void PWM0_DeadZone_ALL_Disable(void);
  36      =3  void PWM0_RUN(void);
  37      =3  void PWM0_STOP(void);
  38      =3  
  39      =3  void PWM1_ClockSource(unsigned char u8PWMCLKSource, unsigned char u8PWM0CLKDIV);
  40      =3  void PWM1_ConfigOutputChannel(unsigned char u8PWM1ChannelNum,
  41      =3                                unsigned char u8PWM1OPMode,
  42      =3                                unsigned char u8PWM1PwmType,
  43      =3                                unsigned long u32PWM1Frequency,
  44      =3                                unsigned int u16PWM1DutyCycle);
  45      =3  void PWM1_DeadZoneEnable(unsigned char u8PWM0Pair, unsigned int u16PWM0DZValue);
  46      =3  void PWM1_DeadZone_ALL_Disable(void);
  47      =3  void PWM1_RUN(void);
  48      =3  void PWM1_STOP(void);
  49      =3  void PWM0_Reload(void);
  36      =2  #include "spi.h"
   1      =3  
   2      =3  
   3      =3  extern void SPI_Initial(void);
   4      =3  extern void SPI_Tx(unsigned char Data);
   5      =3  extern unsigned char SPI_Rx(unsigned char Rx_Buf);
  37      =2  #include "sys.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  #define  FSYS_HXT   0
   9      =3  #define  FSYS_LXT   1
  10      =3  #define  FSYS_HIRC  2
  11      =3  #define  FSYS_LIRC  3
  12      =3  #define  FSYS_OSCIN_P30  4
  13      =3  #define  FSYS_HXTIN_P00  5
  14      =3  #define  HIRC_24        6
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 37  

  15      =3  #define  HIRC_16        7
  16      =3  #define  HIRC_166       8
  17      =3  #define  HIRC_24        6
  18      =3  #define  HIRC_16        7
  19      =3  #define  HIRC_166       8
  20      =3  
  21      =3  extern unsigned char data  TA_REG_TMP,BYTE_TMP;
  22      =3  
  23      =3  void FsysSelect(unsigned char u8FsysMode);
  24      =3  void ClockEnable(unsigned char u8FsysMode);
  25      =3  void ClockDisable(unsigned char u8FsysMode);
  26      =3  void ClockSwitch(unsigned char u8FsysMode);
  27      =3  void MODIFY_HIRC(unsigned char u8HIRCSEL);
  28      =3  
  29      =3  
  38      =2  #include "timer.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  #define DIV1      1
   8      =3  #define DIV2      2
   9      =3  #define DIV4      4
  10      =3  #define DIV8      8
  11      =3  #define DIV16     16
  12      =3  #define DIV32     32
  13      =3  #define DIV64     64
  14      =3  #define DIV128    128
  15      =3  
  16      =3  extern unsigned long data TIMER0CT,TIMER1CT,TIMER2CT,TIMER3CT;
  17      =3  extern unsigned char data TH0TMP,TL0TMP,TH1TMP,TL1TMP;
  18      =3  
  19      =3  void Timer0_AutoReload_Interrupt_Initial(unsigned char u8SYSCLK, unsigned long u32DLYUnit);
  20      =3  void Timer0_AutoReload_Interrupt_CounterClear(void);
  21      =3  void Timer3_AutoReload_Interrupt_Initial(unsigned char u8SYSCLK, unsigned long u32DLYUnit);
  39      =2  #include "uart.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  
   8      =3  #define UART0_Timer1  0
   9      =3  #define UART0_Timer3  1
  10      =3  #define UART1_Timer3  2
  11      =3  #define UART0 0
  12      =3  #define UART1 1
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 38  

  13      =3  
  14      =3  void UART_Open(unsigned long u32SysClock, unsigned char u8UARTPort,unsigned long u32Baudrate);
  15      =3  void UART_Send_Data(unsigned char UARTPort, unsigned char c);
  16      =3  unsigned char Receive_Data(unsigned char UARTPort);
  17      =3  void Enable_UART0_VCOM_printf_24M_115200(void);
  18      =3  
  19      =3  extern   bit PRINTFG,uart0_receive_flag,uart1_receive_flag;
  20      =3  extern   unsigned char uart0_receive_data,uart1_receive_data;
  40      =2  #include "wdt.h"
   1      =3  
   2      =3  void WDT_Open(unsigned int u8WDTDIV);
   3      =3  void WDT_Interrupt(unsigned char u8WDTIntStatus);
   4      =3  void WDT_Reset(unsigned char u8WDTRST);
   5      =3  void WDT_Clear(void);
  41      =2  #include "wkt.h"
   1      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   2      =3  /*                                                                                                        
             - */
   3      =3  /* SPDX-License-Identifier: Apache-2.0                                                                    
             - */
   4      =3  /* Copyright(c) 2020 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   5      =3  /*                                                                                                        
             - */
   6      =3  /*--------------------------------------------------------------------------------------------------------
             --*/
   7      =3  void WKT_AutoReload_Interrupt_Initial_S(unsigned int u16WKTRLData);
   8      =3  void WKT_AutoReload_Interrupt_Initial_MS(unsigned int u16WKTRLData);
   9      =3  void WKT_Open(unsigned int u16WKTDIV, unsigned char u8WKTRLData);
  10      =3  void WKT_Interrupt(unsigned char u8WKTINT);
  11      =3  void WKT_Close();
  42      =2  
  43      =2  /********************************************************************/
  44      =2  /*  <Macro define                                                   */
  45      =2  /********************************************************************/
  46      =2  
  47      =2  /**** SP   81H ****/
  48      =2  /**** DPH  82H ****/
  49      =2  /**** DPL  83H ****/
  50      =2  /**** RWK  86H ****/
  51      =2  
  52      =2  /**** PCON  87H ****/
  53      =2  #define set_PCON_SMOD            PCON|=0x80
  54      =2  #define set_PCON_SMOD0           PCON|=0x40
  55      =2  #define set_PCON_POF             PCON|=0x10
  56      =2  #define set_PCON_GF1             PCON|=0x08
  57      =2  #define set_PCON_GF0             PCON|=0x04 
  58      =2  #define set_PCON_PD              PCON|=0x02
  59      =2  #define set_PCON_IDLE            PCON|=0x01
  60      =2                                      
  61      =2  #define clr_PCON_SMOD            PCON&=0x7F
  62      =2  #define clr_PCON_SMOD0           PCON&=0xBF
  63      =2  #define clr_PCON_POF             PCON&=0xEF
  64      =2  #define clr_PCON_GF1             PCON&=0xF7
  65      =2  #define clr_PCON_GF0             PCON&=0xFB 
  66      =2  #define clr_PCON_PD              PCON&=0xFD
  67      =2  #define clr_PCON_IDLE            PCON&=0xFE
  68      =2  
  69      =2  /**** TCON    88H ****/
  70      =2  #define set_TCON_TF1             TF1=1
  71      =2  #define set_TCON_TR1             TR1=1
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 39  

  72      =2  #define set_TCON_TF0             TF0=1
  73      =2  #define set_TCON_TR0             TR0=1
  74      =2  #define set_TCON_IE1             IE1=1
  75      =2  #define set_TCON_IT1             IT1=1
  76      =2  #define set_TCON_IE0             IE0=1
  77      =2  #define set_TCON_IT0             IT0=1
  78      =2                                   
  79      =2  #define clr_TCON_TF1             TF1=0
  80      =2  #define clr_TCON_TR1             TR1=0
  81      =2  #define clr_TCON_TF0             TF0=0
  82      =2  #define clr_TCON_TR0             TR0=0
  83      =2  #define clr_TCON_IE1             IE1=0
  84      =2  #define clr_TCON_IT1             IT1=0
  85      =2  #define clr_TCON_IE0             IE0=0
  86      =2  #define clr_TCON_IT0             IT0=0
  87      =2  
  88      =2  /**** TMOD    89H ****/
  89      =2  #define set_TMOD_GATE_T1         TMOD|=0x80
  90      =2  #define set_TMOD_CT_T1           TMOD|=0x40
  91      =2  #define set_TMOD_M1_T1           TMOD|=0x20
  92      =2  #define set_TMOD_M0_T1           TMOD|=0x10
  93      =2  #define set_TMOD_GATE_T0         TMOD|=0x08
  94      =2  #define set_TMOD_CT_T0           TMOD|=0x04
  95      =2  #define set_TMOD_M1_T0           TMOD|=0x02
  96      =2  #define set_TMOD_M0_T0           TMOD|=0x01
  97      =2                                    
  98      =2  #define clr_TMOD_GATE_T1         TMOD&=0x7F
  99      =2  #define clr_TMOD_CT_T1           TMOD&=0xBF
 100      =2  #define clr_TMOD_M1_T1           TMOD&=0xDF
 101      =2  #define clr_TMOD_M0_T1           TMOD&=0xEF
 102      =2  #define clr_TMOD_GATE_T0         TMOD&=0xF7
 103      =2  #define clr_TMOD_CT_T0           TMOD&=0xFB
 104      =2  #define clr_TMOD_M1_T0           TMOD&=0xFD
 105      =2  #define clr_TMOD_M0_T0           TMOD&=0xFE
 106      =2  
 107      =2  /**** TH1    8AH ****/
 108      =2  /**** TH0    8BH ****/
 109      =2  /**** TL1    8CH  ****/ 
 110      =2  /**** TL0    8DH ****/
 111      =2  
 112      =2  /**** CKCON  8EH ****/
 113      =2  #define set_CKCON_PWMCKS         CKCON|=0x40
 114      =2  #define set_CKCON_T1M            CKCON|=0x10
 115      =2  #define set_CKCON_T0M            CKCON|=0x08
 116      =2  #define set_CKCON_CLOEN          CKCON|=0x02
 117      =2                                     
 118      =2  #define clr_CKCON_PWMCKS         CKCON&=0xBF
 119      =2  #define clr_CKCON_T1M            CKCON&=0xEF
 120      =2  #define clr_CKCON_T0M            CKCON&=0xF7
 121      =2  #define clr_CKCON_CLOEN          CKCON&=0xFD
 122      =2                                   
 123      =2  /**** WKCON  8FH ****/          
 124      =2  #define set_WKCON_WKTCK          WKCON|=0x20
 125      =2  #define set_WKCON_WKTF           WKCON|=0x10
 126      =2  #define set_WKCON_WKTR           WKCON|=0x08
 127      =2  #define set_WKCON_WKPS2          WKCON|=0x04
 128      =2  #define set_WKCON_WKPS1          WKCON|=0x02
 129      =2  #define set_WKCON_WKPS0          WKCON|=0x01
 130      =2                                     
 131      =2  #define clr_WKCON_WKTCK          WKCON&=0xDF
 132      =2  #define clr_WKCON_WKTF           WKCON&=0xEF
 133      =2  #define clr_WKCON_WKTR           WKCON&=0xF7
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 40  

 134      =2  #define clr_WKCON_WKPS2          WKCON&=0xFB
 135      =2  #define clr_WKCON_WKPS1          WKCON&=0xFD
 136      =2  #define clr_WKCON_WKPS0          WKCON&= 0xFE
 137      =2  
 138      =2  /****SFRS    91H ****/
 139      =2  #define set_SFRS_SFRPAGE         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=1;EA=BIT_TMP
 140      =2  #define clr_SFRS_SFRPAGE         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=0;EA=BIT_TMP
 141      =2  
 142      =2  /****CAPCON0  92H ****/
 143      =2  #define set_CAPCON0_CAPEN2       CAPCON0|=0x40
 144      =2  #define set_CAPCON0_CAPEN1       CAPCON0|=0x20
 145      =2  #define set_CAPCON0_CAPEN0       CAPCON0|=0x10
 146      =2  #define set_CAPCON0_CAPF2        CAPCON0|=0x04
 147      =2  #define set_CAPCON0_CAPF1        CAPCON0|=0x02
 148      =2  #define set_CAPCON0_CAPF0        CAPCON0|=0x01
 149      =2                                   
 150      =2  #define clr_CAPCON0_CAPEN2       CAPCON0&=0xBF
 151      =2  #define clr_CAPCON0_CAPEN1       CAPCON0&=0xDF
 152      =2  #define clr_CAPCON0_CAPEN0       CAPCON0&=0xEF
 153      =2  #define clr_CAPCON0_CAPF2        CAPCON0&=0xFB
 154      =2  #define clr_CAPCON0_CAPF1        CAPCON0&=0xFD
 155      =2  #define clr_CAPCON0_CAPF0        CAPCON0&=0xFE
 156      =2  
 157      =2  /**** CAPCON1  93H ****/
 158      =2  #define set_CAPCON1_CAP2LS1      CAPCON1|=0x20
 159      =2  #define set_CAPCON1_CAP2LS0      CAPCON1|=0x10
 160      =2  #define set_CAPCON1_CAP1LS1      CAPCON1|=0x08
 161      =2  #define set_CAPCON1_CAP1LS0      CAPCON1|=0x04
 162      =2  #define set_CAPCON1_CAP0LS1      CAPCON1|=0x02
 163      =2  #define set_CAPCON1_CAP0LS0      CAPCON1|=0x01
 164      =2                                   
 165      =2  #define clr_CAPCON1_CAP2LS1      CAPCON1&=0xDF
 166      =2  #define clr_CAPCON1_CAP2LS0      CAPCON1&=0xEF
 167      =2  #define clr_CAPCON1_CAP1LS1      CAPCON1&=0xF7
 168      =2  #define clr_CAPCON1_CAP1LS0      CAPCON1&=0xFB
 169      =2  #define clr_CAPCON1_CAP0LS1      CAPCON1&=0xFD
 170      =2  #define clr_CAPCON1_CAP0LS0      CAPCON1&=0xFE
 171      =2  
 172      =2  /**** CAPCON2    94H ****/
 173      =2  #define set_CAPCON2_ENF2         CAPCON2|=0x40
 174      =2  #define set_CAPCON2_ENF1         CAPCON2|=0x20
 175      =2  #define set_CAPCON2_ENF0         CAPCON2|=0x10
 176      =2                                     
 177      =2  #define clr_CAPCON2_ENF2         CAPCON2&=0xBF
 178      =2  #define clr_CAPCON2_ENF1         CAPCON2&=0xDF
 179      =2  #define clr_CAPCON2_ENF0         CAPCON2&=0xEF
 180      =2  /**** CKDIV    95H ****/
 181      =2  
 182      =2  /**** CKSWT    96H   TA protect register ****/
 183      =2  #define set_CKSWT_HIRCST         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x20;EA=BIT_TMP
 184      =2  #define set_CKSWT_LIRCST         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x10;EA=BIT_TMP
 185      =2  #define set_CKSWT_ECLKST         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x08;EA=BIT_TMP
 186      =2  #define set_CKSWT_OSC1           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x04;EA=BIT_TMP
 187      =2  #define set_CKSWT_OSC0           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x02;EA=BIT_TMP
 188      =2  
 189      =2  #define clr_CKSWT_HIRCST         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xDF;EA=BIT_TMP
 190      =2  #define clr_CKSWT_LIRCST         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xEF;EA=BIT_TMP
 191      =2  #define clr_CKSWT_ECLKST         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xF7;EA=BIT_TMP
 192      =2  #define clr_CKSWT_OSC1           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xFB;EA=BIT_TMP
 193      =2  #define clr_CKSWT_OSC0           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xFD;EA=BIT_TMP
 194      =2  
 195      =2  /**** CKEN   97H **** TA protect register ****/ 
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 41  

 196      =2  #define set_CKEN_EXTEN1          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN|=0x80;EA=BIT_TMP
 197      =2  #define set_CKEN_EXTEN0          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN|=0x40;EA=BIT_TMP
 198      =2  #define set_CKEN_HIRCEN          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN|=0x20;EA=BIT_TMP
 199      =2  #define set_CKEN_CKSWTF          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN|=0x01;EA=BIT_TMP
 200      =2  
 201      =2  #define clr_CKEN_EXTEN1          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN&=0x7F;EA=BIT_TMP
 202      =2  #define clr_CKEN_EXTEN0          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN&=0xBF;EA=BIT_TMP
 203      =2  #define clr_CKEN_HIRCEN          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN&=0xDF;EA=BIT_TMP
 204      =2  #define clr_CKEN_CKSWTF          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN&=0xFE;EA=BIT_TMP
 205      =2  
 206      =2  /**** SCON    98H ****/
 207      =2  #define set_SCON_FE              FE =1
 208      =2  #define set_SCON_SM1             SM1=1
 209      =2  #define set_SCON_SM2             SM2=1
 210      =2  #define set_SCON_REN             REN=1
 211      =2  #define set_SCON_TB8             TB8=1
 212      =2  #define set_SCON_RB8             RB8=1
 213      =2  #define set_SCON_TI              TI =1
 214      =2  #define set_SCON_RI              RI =1
 215      =2                                   
 216      =2  #define clr_SCON_FE              FE =0
 217      =2  #define clr_SCON_SM1             SM1=0
 218      =2  #define clr_SCON_SM2             SM2=0
 219      =2  #define clr_SCON_REN             REN=0
 220      =2  #define clr_SCON_TB8             TB8=0
 221      =2  #define clr_SCON_RB8             RB8=0
 222      =2  #define clr_SCON_TI              TI =0
 223      =2  #define clr_SCON_RI              RI =0
 224      =2  
 225      =2  /**** SBUF    99H ****/
 226      =2  /**** SBUF_1  9AH ****/
 227      =2  
 228      =2  /**** EIE    9BH ****/                     
 229      =2  #define set_EIE_ET2              EIE|=0x80
 230      =2  #define set_EIE_ESPI             EIE|=0x40
 231      =2  #define set_EIE_EFB              EIE|=0x20
 232      =2  #define set_EIE_EWDT             EIE|=0x10
 233      =2  #define set_EIE_EPWM             EIE|=0x08
 234      =2  #define set_EIE_ECAP             EIE|=0x04
 235      =2  #define set_EIE_EPI              EIE|=0x02
 236      =2  #define set_EIE_EI2C             EIE|=0x01
 237      =2                                      
 238      =2  #define clr_EIE_ET2              EIE&=0x7F
 239      =2  #define clr_EIE_ESPI             EIE&=0xBF
 240      =2  #define clr_EIE_EFB              EIE&=0xDF
 241      =2  #define clr_EIE_EWDT             EIE&=0xEF
 242      =2  #define clr_EIE_EPWM             EIE&=0xF7
 243      =2  #define clr_EIE_ECAP             EIE&=0xFB
 244      =2  #define clr_EIE_EPI              EIE&=0xFD
 245      =2  #define clr_EIE_EI2C             EIE&=0xFE
 246      =2  
 247      =2  /**** EIE1    9CH ****/                     
 248      =2  #define set_EIE1_EWKT            EIE1|=0x04
 249      =2  #define set_EIE1_ET3             EIE1|=0x02
 250      =2  #define set_EIE1_ES_1            EIE1|=0x01
 251      =2                                      
 252      =2  #define clr_EIE1_EWKT            EIE1&=0xFB
 253      =2  #define clr_EIE1_ET3             EIE1&=0xFD
 254      =2  #define clr_EIE1_ES_1            EIE1&=0xFE
 255      =2                              
 256      =2  /**** CHPCON    9DH ****  TA protect register  ****/
 257      =2  #define set_CHPCON_SWRST         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON|=0x80;EA=BIT_TMP
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 42  

 258      =2  #define set_CHPCON_IAPFF         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON|=0x40;EA=BIT_TMP
 259      =2  #define set_CHPCON_BS            BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON|=0x02;EA=BIT_TMP
 260      =2  #define set_CHPCON_IAPEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON|=0x01;EA=BIT_TMP
 261      =2                                   
 262      =2  #define clr_CHPCON_SWRST         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON&=0x7F;EA=BIT_TMP
 263      =2  #define clr_CHPCON_IAPFF         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON&=0xBF;EA=BIT_TMP
 264      =2  #define clr_CHPCON_BS            BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON&=0xFD;EA=BIT_TMP
 265      =2  #define clr_CHPCON_IAPEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON&=0xFE;EA=BIT_TMP
 266      =2  
 267      =2  /**** P2    A0H ****/
 268      =2  
 269      =2  /**** AUXR1  A2H ****/
 270      =2  #define set_AUXR1_SWRF           AUXR1|=0x80
 271      =2  #define set_AUXR1_RSTPINF        AUXR1|=0x40
 272      =2  #define set_AUXR1_HARDF          AUXR1|=0x20
 273      =2  #define set_AUXR1_GF2            AUXR1|=0x08
 274      =2  #define set_AUXR1_UART0PX        AUXR1|=0x04
 275      =2  #define set_AUXR1_DPS            AUXR1|=0x01
 276      =2                                     
 277      =2  #define clr_AUXR1_SWRF           AUXR1&=0x7F
 278      =2  #define clr_AUXR1_RSTPINF        AUXR1&=0xBF
 279      =2  #define clr_AUXR1_HARDF          AUXR1&=0xDF
 280      =2  #define clr_AUXR1_GF2            AUXR1&=0xF7
 281      =2  #define clr_AUXR1_UART0PX        AUXR1&=0xFB
 282      =2  #define clr_AUXR1_DPS            AUXR1&=0xFE
 283      =2  
 284      =2  /**** BODCON0  A3H ****  TA protect register ****/
 285      =2  #define set_BODCON0_BODEN        BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x80;EA=BIT_TMP
 286      =2  #define set_BODCON0_BOV1         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x20;EA=BIT_TMP
 287      =2  #define set_BODCON0_BOV0         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x10;EA=BIT_TMP
 288      =2  #define set_BODCON0_BOF          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x08;EA=BIT_TMP
 289      =2  #define set_BODCON0_BORST        BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x04;EA=BIT_TMP
 290      =2  #define set_BODCON0_BORF         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x02;EA=BIT_TMP
 291      =2  #define set_BODCON0_BOS          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x01;EA=BIT_TMP
 292      =2                                   
 293      =2  #define clr_BODCON0_BODEN        BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0x7F;EA=BIT_TMP
 294      =2  #define clr_BODCON0_BOV2         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xBF;EA=BIT_TMP
 295      =2  #define clr_BODCON0_BOV1         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xDF;EA=BIT_TMP
 296      =2  #define clr_BODCON0_BOV0         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xEF;EA=BIT_TMP
 297      =2  #define clr_BODCON0_BOF          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xF7;EA=BIT_TMP
 298      =2  #define clr_BODCON0_BORST        BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xFB;EA=BIT_TMP
 299      =2  #define clr_BODCON0_BORF         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xFD;EA=BIT_TMP
 300      =2  #define clr_BODCON0_BOS          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xFE;EA=BIT_TMP
 301      =2  
 302      =2  /**** IAPTRG    A4H  ****  TA protect register ****/
 303      =2  #define set_IAPTRG_IAPGO         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPTRG|=0x01;EA=BIT_TMP
 304      =2  #define set_IAPTRG_IAPGO_WDCLR   BIT_TMP=EA;EA=0;set_WDCON_WDCLR;TA=0xAA;TA=0x55;IAPTRG|=0x01;EA=BIT_TMP
 305      =2  #define clr_IAPTRG_IAPGO         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPTRG&=0xFE;EA=BIT_TMP
 306      =2  
 307      =2  /**** IAPUEN    A5H **** TA protect register ****/ 
 308      =2  #define set_IAPUEN_SPMEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN|=0x10;EA=BIT_TMP
 309      =2  #define set_IAPUEN_SPUEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN|=0x08;EA=BIT_TMP
 310      =2  #define set_IAPUEN_CFUEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN|=0x04;EA=BIT_TMP
 311      =2  #define set_IAPUEN_LDUEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN|=0x02;EA=BIT_TMP
 312      =2  #define set_IAPUEN_APUEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN|=0x01;EA=BIT_TMP
 313      =2                                   
 314      =2  #define clr_IAPUEN_SPMEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN&=0xEF;EA=BIT_TMP
 315      =2  #define clr_IAPUEN_SPUEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN&=0xF7;EA=BIT_TMP
 316      =2  #define clr_IAPUEN_CFUEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN&=0xFB;EA=BIT_TMP
 317      =2  #define clr_IAPUEN_LDUEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN&=0xFD;EA=BIT_TMP
 318      =2  #define clr_IAPUEN_APUEN         BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN&=0xFE;EA=BIT_TMP
 319      =2  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 43  

 320      =2  /**** IAPAL  A6H ****/
 321      =2  /**** IAPAH  A7H ****/
 322      =2  
 323      =2  /**** IE      A8H ****/
 324      =2  #define set_IE_EA                EA  =1
 325      =2  #define set_IE_EADC              EADC=1
 326      =2  #define set_IE_EBOD              EBOD=1
 327      =2  #define set_IE_ES                ES  =1
 328      =2  #define set_IE_ET1               ET1 =1
 329      =2  #define set_IE_EX1               EX1 =1
 330      =2  #define set_IE_ET0               ET0 =1
 331      =2  #define set_IE_EX0               EX0 =1
 332      =2                                   
 333      =2  #define clr_IE_EA                EA  =0
 334      =2  #define clr_IE_EADC              EADC=0
 335      =2  #define clr_IE_EBOD              EBOD=0
 336      =2  #define clr_IE_ES                ES  =0
 337      =2  #define clr_IE_ET1               ET1 =0
 338      =2  #define clr_IE_EX1               EX1 =0
 339      =2  #define clr_IE_ET0               ET0 =0
 340      =2  #define clr_IE_EX0               EX0 =0
 341      =2  
 342      =2  /**** SADDR    A9H ****/
 343      =2  
 344      =2  /**** WDCON    AAH **** TA protect register ****/
 345      =2  #define set_WDCON_WDTR           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x80;EA=BIT_TMP
 346      =2  #define set_WDCON_WDCLR          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x40;EA=BIT_TMP
 347      =2  #define set_WDCON_WDTF           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x20;EA=BIT_TMP
 348      =2  #define set_WDCON_WIDPD          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x10;EA=BIT_TMP
 349      =2  #define set_WDCON_WDTRF          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x08;EA=BIT_TMP
 350      =2  #define set_WDCON_WPS2           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x04;EA=BIT_TMP
 351      =2  #define set_WDCON_WPS1           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x02;EA=BIT_TMP
 352      =2  #define set_WDCON_WPS0           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x01;EA=BIT_TMP
 353      =2                                   
 354      =2  #define clr_WDCON_WDTR           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0x7F;EA=BIT_TMP
 355      =2  #define clr_WDCON_WDCLR          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xBF;EA=BIT_TMP
 356      =2  #define clr_WDCON_WDTF           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xDF;EA=BIT_TMP
 357      =2  #define clr_WDCON_WDTRF          BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xF7;EA=BIT_TMP
 358      =2  #define clr_WDCON_WPS2           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xFB;EA=BIT_TMP
 359      =2  #define clr_WDCON_WPS1           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xFD;EA=BIT_TMP
 360      =2  #define clr_WDCON_WPS0           BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xFE;EA=BIT_TMP
 361      =2  
 362      =2  /**** BODCON1 ABH **** TA protect register ****/
 363      =2  #define set_BODCON1_LPBOD1       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1|=0x04;EA=BIT_TMP
 364      =2  #define set_BODCON1_LPBOD0       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1|=0x02;EA=BIT_TMP
 365      =2  #define set_BODCON1_BODFLT       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1|=0x01;EA=BIT_TMP
 366      =2                                   
 367      =2  #define clr_BODCON1_LPBOD1       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1&=0xFB;EA=BIT_TMP
 368      =2  #define clr_BODCON1_LPBOD0       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1&=0xFD;EA=BIT_TMP
 369      =2  #define clr_BODCON1_BODFLT       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1&=0xFE;EA=BIT_TMP
 370      =2  
 371      =2  /**** IAPFD  AEH ****/
 372      =2  
 373      =2  /**** IAPCN  AFH ****/
 374      =2  #define set_IAPCN_FOEN           IAPN|=0x20
 375      =2  #define set_IAPCN_FCEN           IAPN|=0x10
 376      =2  #define set_IAPCN_FCTRL3         IAPN|=0x08
 377      =2  #define set_IAPCN_FCTRL2         IAPN|=0x04
 378      =2  #define set_IAPCN_FCTRL1         IAPN|=0x02
 379      =2  #define set_IAPCN_FCTRL0         IAPN|=0x01
 380      =2                                     
 381      =2  #define clr_IAPCN_FOEN           IAPN&=0xDF
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 44  

 382      =2  #define clr_IAPCN_FCEN           IAPN&=0xEF
 383      =2  #define clr_IAPCN_FCTRL3         IAPN&=0xF7
 384      =2  #define clr_IAPCN_FCTRL2         IAPN&=0xFB
 385      =2  #define clr_IAPCN_FCTRL1         IAPN&=0xFD
 386      =2  #define clr_IAPCN_FCTRL0         IAPN&=0xFE
 387      =2  
 388      =2  /**** P0M1  B1H PAGE0 ****/
 389      =2  #define set_P0M1_7               clr_SFRS_SFRPAGE;P0M1|=0x80
 390      =2  #define set_P0M1_6               clr_SFRS_SFRPAGE;P0M1|=0x40
 391      =2  #define set_P0M1_5               clr_SFRS_SFRPAGE;P0M1|=0x20 
 392      =2  #define set_P0M1_4               clr_SFRS_SFRPAGE;P0M1|=0x10
 393      =2  #define set_P0M1_3               clr_SFRS_SFRPAGE;P0M1|=0x08
 394      =2  #define set_P0M1_2               clr_SFRS_SFRPAGE;P0M1|=0x04
 395      =2  #define set_P0M1_1               clr_SFRS_SFRPAGE;P0M1|=0x02
 396      =2  #define set_P0M1_0               clr_SFRS_SFRPAGE;P0M1|=0x01
 397      =2                                   
 398      =2  #define clr_P0M1_7               clr_SFRS_SFRPAGE;P0M1&=0x7F
 399      =2  #define clr_P0M1_6               clr_SFRS_SFRPAGE;P0M1&=0xBF
 400      =2  #define clr_P0M1_5               clr_SFRS_SFRPAGE;P0M1&=0xDF
 401      =2  #define clr_P0M1_4               clr_SFRS_SFRPAGE;P0M1&=0xEF
 402      =2  #define clr_P0M1_3               clr_SFRS_SFRPAGE;P0M1&=0xF7
 403      =2  #define clr_P0M1_2               clr_SFRS_SFRPAGE;P0M1&=0xFB
 404      =2  #define clr_P0M1_1               clr_SFRS_SFRPAGE;P0M1&=0xFD
 405      =2  #define clr_P0M1_0               clr_SFRS_SFRPAGE;P0M1&=0xFE
 406      =2  
 407      =2  /**** P0S  B2H PAGE1 ****/
 408      =2  #define set_P0S_7                set_SFRS_SFRPAGE;P0S|=0x80;clr_SFRS_SFRPAGE
 409      =2  #define set_P0S_6                set_SFRS_SFRPAGE;P0S|=0x40;clr_SFRS_SFRPAGE
 410      =2  #define set_P0S_5                set_SFRS_SFRPAGE;P0S|=0x20;clr_SFRS_SFRPAGE
 411      =2  #define set_P0S_4                set_SFRS_SFRPAGE;P0S|=0x10;clr_SFRS_SFRPAGE
 412      =2  #define set_P0S_3                set_SFRS_SFRPAGE;P0S|=0x08;clr_SFRS_SFRPAGE
 413      =2  #define set_P0S_2                set_SFRS_SFRPAGE;P0S|=0x04;clr_SFRS_SFRPAGE
 414      =2  #define set_P0S_1                set_SFRS_SFRPAGE;P0S|=0x02;clr_SFRS_SFRPAGE
 415      =2  #define set_P0S_0                set_SFRS_SFRPAGE;P0S|=0x01;clr_SFRS_SFRPAGE
 416      =2  
 417      =2  #define clr_P0S_7                set_SFRS_SFRPAGE;P0S&=0x7F;clr_SFRS_SFRPAGE
 418      =2  #define clr_P0S_6                set_SFRS_SFRPAGE;P0S&=0xBF;clr_SFRS_SFRPAGE
 419      =2  #define clr_P0S_5                set_SFRS_SFRPAGE;P0S&=0xDF;clr_SFRS_SFRPAGE
 420      =2  #define clr_P0S_4                set_SFRS_SFRPAGE;P0S&=0xEF;clr_SFRS_SFRPAGE
 421      =2  #define clr_P0S_3                set_SFRS_SFRPAGE;P0S&=0xF7;clr_SFRS_SFRPAGE
 422      =2  #define clr_P0S_2                set_SFRS_SFRPAGE;P0S&=0xFB;clr_SFRS_SFRPAGE
 423      =2  #define clr_P0S_1                set_SFRS_SFRPAGE;P0S&=0xFD;clr_SFRS_SFRPAGE
 424      =2  #define clr_P0S_0                set_SFRS_SFRPAGE;P0S&=0xFE;clr_SFRS_SFRPAGE
 425      =2  
 426      =2  /**** P0M2    B2H PAGE0 ****/
 427      =2  #define set_P0M2_7               clr_SFRS_SFRPAGE;P0M2|=0x80
 428      =2  #define set_P0M2_6               clr_SFRS_SFRPAGE;P0M2|=0x40
 429      =2  #define set_P0M2_5               clr_SFRS_SFRPAGE;P0M2|=0x20 
 430      =2  #define set_P0M2_4               clr_SFRS_SFRPAGE;P0M2|=0x10
 431      =2  #define set_P0M2_3               clr_SFRS_SFRPAGE;P0M2|=0x08
 432      =2  #define set_P0M2_2               clr_SFRS_SFRPAGE;P0M2|=0x04
 433      =2  #define set_P0M2_1               clr_SFRS_SFRPAGE;P0M2|=0x02
 434      =2  #define set_P0M2_0               clr_SFRS_SFRPAGE;P0M2|=0x01
 435      =2                                   
 436      =2  #define clr_P0M2_7               clr_SFRS_SFRPAGE;P0M2&=0x7F
 437      =2  #define clr_P0M2_6               clr_SFRS_SFRPAGE;P0M2&=0xBF
 438      =2  #define clr_P0M2_5               clr_SFRS_SFRPAGE;P0M2&=0xDF
 439      =2  #define clr_P0M2_4               clr_SFRS_SFRPAGE;P0M2&=0xEF
 440      =2  #define clr_P0M2_3               clr_SFRS_SFRPAGE;P0M2&=0xF7
 441      =2  #define clr_P0M2_2               clr_SFRS_SFRPAGE;P0M2&=0xFB
 442      =2  #define clr_P0M2_1               clr_SFRS_SFRPAGE;P0M2&=0xFD
 443      =2  #define clr_P0M2_0               clr_SFRS_SFRPAGE;P0M2&=0xFE
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 45  

 444      =2  
 445      =2  /**** P0SR    B0H PAGE1 ****/ 
 446      =2  #define set_P0SR_7               set_SFRS_SFRPAGE;P0SR|=0x80;clr_SFRS_SFRPAGE
 447      =2  #define set_P0SR_6               set_SFRS_SFRPAGE;P0SR|=0x40;clr_SFRS_SFRPAGE
 448      =2  #define set_P0SR_5               set_SFRS_SFRPAGE;P0SR|=0x20;clr_SFRS_SFRPAGE
 449      =2  #define set_P0SR_4               set_SFRS_SFRPAGE;P0SR|=0x10;clr_SFRS_SFRPAGE
 450      =2  #define set_P0SR_3               set_SFRS_SFRPAGE;P0SR|=0x08;clr_SFRS_SFRPAGE
 451      =2  #define set_P0SR_2               set_SFRS_SFRPAGE;P0SR|=0x04;clr_SFRS_SFRPAGE
 452      =2  #define set_P0SR_1               set_SFRS_SFRPAGE;P0SR|=0x02;clr_SFRS_SFRPAGE
 453      =2  #define set_P0SR_0               set_SFRS_SFRPAGE;P0SR|=0x01;clr_SFRS_SFRPAGE
 454      =2  
 455      =2  #define clr_P0SR_7               set_SFRS_SFRPAGE;P0SR&=0x7F;clr_SFRS_SFRPAGE
 456      =2  #define clr_P0SR_6               set_SFRS_SFRPAGE;P0SR&=0xBF;clr_SFRS_SFRPAGE
 457      =2  #define clr_P0SR_5               set_SFRS_SFRPAGE;P0SR&=0xDF;clr_SFRS_SFRPAGE
 458      =2  #define clr_P0SR_4               set_SFRS_SFRPAGE;P0SR&=0xEF;clr_SFRS_SFRPAGE
 459      =2  #define clr_P0SR_3               set_SFRS_SFRPAGE;P0SR&=0xF7;clr_SFRS_SFRPAGE
 460      =2  #define clr_P0SR_2               set_SFRS_SFRPAGE;P0SR&=0xFB;clr_SFRS_SFRPAGE
 461      =2  #define clr_P0SR_1               set_SFRS_SFRPAGE;P0SR&=0xFD;clr_SFRS_SFRPAGE
 462      =2  #define clr_P0SR_0               set_SFRS_SFRPAGE;P0SR&=0xFE;clr_SFRS_SFRPAGE
 463      =2  
 464      =2  /**** P1S B3H PAGE1 ****/ 
 465      =2  #define set_P1S_7                set_SFRS_SFRPAGE;P1S|=0x80;clr_SFRS_SFRPAGE
 466      =2  #define set_P1S_6                set_SFRS_SFRPAGE;P1S|=0x40;clr_SFRS_SFRPAGE
 467      =2  #define set_P1S_5                set_SFRS_SFRPAGE;P1S|=0x20;clr_SFRS_SFRPAGE
 468      =2  #define set_P1S_4                set_SFRS_SFRPAGE;P1S|=0x10;clr_SFRS_SFRPAGE
 469      =2  #define set_P1S_3                set_SFRS_SFRPAGE;P1S|=0x08;clr_SFRS_SFRPAGE
 470      =2  #define set_P1S_2                set_SFRS_SFRPAGE;P1S|=0x04;clr_SFRS_SFRPAGE
 471      =2  #define set_P1S_1                set_SFRS_SFRPAGE;P1S|=0x02;clr_SFRS_SFRPAGE
 472      =2  #define set_P1S_0                set_SFRS_SFRPAGE;P1S|=0x01;clr_SFRS_SFRPAGE
 473      =2                                                   
 474      =2  #define clr_P1S_7                set_SFRS_SFRPAGE;P1S&=0x7F;clr_SFRS_SFRPAGE
 475      =2  #define clr_P1S_6                set_SFRS_SFRPAGE;P1S&=0xBF;clr_SFRS_SFRPAGE
 476      =2  #define clr_P1S_5                set_SFRS_SFRPAGE;P1S&=0xDF;clr_SFRS_SFRPAGE
 477      =2  #define clr_P1S_4                set_SFRS_SFRPAGE;P1S&=0xEF;clr_SFRS_SFRPAGE
 478      =2  #define clr_P1S_3                set_SFRS_SFRPAGE;P1S&=0xF7;clr_SFRS_SFRPAGE
 479      =2  #define clr_P1S_2                set_SFRS_SFRPAGE;P1S&=0xFB;clr_SFRS_SFRPAGE
 480      =2  #define clr_P1S_1                set_SFRS_SFRPAGE;P1S&=0xFD;clr_SFRS_SFRPAGE
 481      =2  #define clr_P1S_0                set_SFRS_SFRPAGE;P1S&=0xFE;clr_SFRS_SFRPAGE
 482      =2  
 483      =2  /**** P1SR    B4H PAGE1 ****/ 
 484      =2  #define set_P1SR_7               set_SFRS_SFRPAGE;P1SR|=0x80;clr_SFRS_SFRPAGE
 485      =2  #define set_P1SR_6               set_SFRS_SFRPAGE;P1SR|=0x40;clr_SFRS_SFRPAGE
 486      =2  #define set_P1SR_5               set_SFRS_SFRPAGE;P1SR|=0x20;clr_SFRS_SFRPAGE
 487      =2  #define set_P1SR_4               set_SFRS_SFRPAGE;P1SR|=0x10;clr_SFRS_SFRPAGE
 488      =2  #define set_P1SR_3               set_SFRS_SFRPAGE;P1SR|=0x08;clr_SFRS_SFRPAGE
 489      =2  #define set_P1SR_2               set_SFRS_SFRPAGE;P1SR|=0x04;clr_SFRS_SFRPAGE
 490      =2  #define set_P1SR_1               set_SFRS_SFRPAGE;P1SR|=0x02;clr_SFRS_SFRPAGE
 491      =2  #define set_P1SR_0               set_SFRS_SFRPAGE;P1SR|=0x01;clr_SFRS_SFRPAGE
 492      =2                                                   
 493      =2  #define clr_P1SR_7               set_SFRS_SFRPAGE;P1SR&=0x7F;clr_SFRS_SFRPAGE
 494      =2  #define clr_P1SR_6               set_SFRS_SFRPAGE;P1SR&=0xBF;clr_SFRS_SFRPAGE
 495      =2  #define clr_P1SR_5               set_SFRS_SFRPAGE;P1SR&=0xDF;clr_SFRS_SFRPAGE
 496      =2  #define clr_P1SR_4               set_SFRS_SFRPAGE;P1SR&=0xEF;clr_SFRS_SFRPAGE
 497      =2  #define clr_P1SR_3               set_SFRS_SFRPAGE;P1SR&=0xF7;clr_SFRS_SFRPAGE
 498      =2  #define clr_P1SR_2               set_SFRS_SFRPAGE;P1SR&=0xFB;clr_SFRS_SFRPAGE
 499      =2  #define clr_P1SR_1               set_SFRS_SFRPAGE;P1SR&=0xFD;clr_SFRS_SFRPAGE
 500      =2  #define clr_P1SR_0               set_SFRS_SFRPAGE;P1SR&=0xFE;clr_SFRS_SFRPAGE
 501      =2  
 502      =2  /**** P2S    B5H ****/
 503      =2  #define set_P2S_P20UP            P2S|=0x80
 504      =2  #define set_P2S_T1OE             P2S|=0x08
 505      =2  #define set_P2S_T0OE             P2S|=0x04
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 46  

 506      =2  #define set_P2S_P2S0             P2S|=0x01
 507      =2                                   
 508      =2  #define clr_P2S_P20UP            P2S&=0x7F
 509      =2  #define clr_P2S_T1OE             P2S&=0xF7
 510      =2  #define clr_P2S_T0OE             P2S&=0xFB
 511      =2  #define clr_P2S_P2S0             P2S&=0xFE
 512      =2                                   
 513      =2  /**** IPH    B7H PAGE0 ****/                     
 514      =2  #define set_IPH_PADCH            clr_SFRS_SFRPAGE;IPH|=0x40
 515      =2  #define set_IPH_PBODH            clr_SFRS_SFRPAGE;IPH|=0x20
 516      =2  #define set_IPH_PSH              clr_SFRS_SFRPAGE;IPH|=0x10
 517      =2  #define set_IPH_PT1H             clr_SFRS_SFRPAGE;IPH|=0x08
 518      =2  #define set_IPH_PX1H             clr_SFRS_SFRPAGE;IPH|=0x04
 519      =2  #define set_IPH_PT0H             clr_SFRS_SFRPAGE;IPH|=0x02
 520      =2  #define set_IPH_PX0H             clr_SFRS_SFRPAGE;IPH|=0x01
 521      =2                                      
 522      =2  #define clr_IPH_PADCH            clr_SFRS_SFRPAGE;IPH&=0xBF
 523      =2  #define clr_IPH_PBODH            clr_SFRS_SFRPAGE;IPH&=0xDF
 524      =2  #define clr_IPH_PSH              clr_SFRS_SFRPAGE;IPH&=0xEF
 525      =2  #define clr_IPH_PT1H             clr_SFRS_SFRPAGE;IPH&=0xF7
 526      =2  #define clr_IPH_PX1H             clr_SFRS_SFRPAGE;IPH&=0xFB
 527      =2  #define clr_IPH_PT0H             clr_SFRS_SFRPAGE;IPH&=0xFD
 528      =2  #define clr_IPH_PX0H             clr_SFRS_SFRPAGE;IPH&=0xFE
 529      =2  
 530      =2  /**** PWMINTC B7H PAGE1 ****/ 
 531      =2  #define set_PWMINTC_INTTYP1      set_SFRS_SFRPAGE;PWMINTC|=0x20;clr_SFRS_SFRPAGE
 532      =2  #define set_PWMINTC_INTTYP0      set_SFRS_SFRPAGE;PWMINTC|=0x10;clr_SFRS_SFRPAGE
 533      =2  #define set_PWMINTC_INTSEL2      set_SFRS_SFRPAGE;PWMINTC|=0x04;clr_SFRS_SFRPAGE
 534      =2  #define set_PWMINTC_INTSEL1      set_SFRS_SFRPAGE;PWMINTC|=0x02;clr_SFRS_SFRPAGE
 535      =2  #define set_PWMINTC_INTSEL0      set_SFRS_SFRPAGE;PWMINTC|=0x01;clr_SFRS_SFRPAGE
 536      =2                                  
 537      =2  #define clr_PWMINTC_INTTYP1      set_SFRS_SFRPAGE;PWMINTC&=0xDF;clr_SFRS_SFRPAGE
 538      =2  #define clr_PWMINTC_INTTYP0      set_SFRS_SFRPAGE;PWMINTC&=0xEF;clr_SFRS_SFRPAGE
 539      =2  #define clr_PWMINTC_INTSEL2      set_SFRS_SFRPAGE;PWMINTC&=0xFB;clr_SFRS_SFRPAGE
 540      =2  #define clr_PWMINTC_INTSEL1      set_SFRS_SFRPAGE;PWMINTC&=0xFD;clr_SFRS_SFRPAGE
 541      =2  #define clr_PWMINTC_INTSEL0      set_SFRS_SFRPAGE;PWMINTC&=0xFE;clr_SFRS_SFRPAGE
 542      =2  
 543      =2  /**** IP    B8H ****/
 544      =2  #define set_IP_PADC              PADC=1
 545      =2  #define set_IP_PBOD              PBOD=1
 546      =2  #define set_IP_PS                PS  =1
 547      =2  #define set_IP_PT1               PT1 =1
 548      =2  #define set_IP_PX1               PX1 =1
 549      =2  #define set_IP_PT0               PT0 =1
 550      =2  #define set_IP_PX0               PX0 =1
 551      =2                                   
 552      =2  #define clr_IP_PADC              PADC=0
 553      =2  #define clr_IP_PBOD              PBOD=0
 554      =2  #define clr_IP_PS                PS  =0
 555      =2  #define clr_IP_PT1               PT1 =0
 556      =2  #define clr_IP_PX1               PX1 =0
 557      =2  #define clr_IP_PT0               PT0 =0
 558      =2  #define clr_IP_PX0               PX0 =0
 559      =2  
 560      =2  /**** SADEN    B9H ****/
 561      =2  /**** SADEN_1  8AH ****/
 562      =2  /**** SADDR_1  BBH ****/
 563      =2  /**** I2DAT    BCH ****/
 564      =2  /**** I2STAT    BDH ****/
 565      =2  /**** I2CLK    BEH ****/
 566      =2  
 567      =2  /**** I2TOC    BFH ****/
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 47  

 568      =2  #define set_I2TOC_I2TOCEN       I2TOC|=0x04
 569      =2  #define set_I2TOC_DIV           I2TOC|=0x02
 570      =2  #define set_I2TOC_I2TOF         I2TOC|=0x01
 571      =2                                  
 572      =2  #define clr_I2TOC_I2TOCEN       I2TOC&=0xFB
 573      =2  #define clr_I2TOC_DIV           I2TOC&=0xFD
 574      =2  #define clr_I2TOC_I2TOF         I2TOC&=0xFE
 575      =2  
 576      =2  /**** I2CON  C0H ****/ 
 577      =2  #define set_I2CON_I2CEN         I2CEN    = 1
 578      =2  #define set_I2CON_STA           STA      = 1
 579      =2  #define set_I2CON_STO           STO      = 1
 580      =2  #define set_I2CON_SI            SI       = 1
 581      =2  #define set_I2CON_AA            AA       = 1
 582      =2  #define set_I2CON_I2CPX         I2CPX    = 1
 583      =2              
 584      =2  #define clr_I2CON_I2CEN         I2CEN    = 0
 585      =2  #define clr_I2CON_STA           STA      = 0
 586      =2  #define clr_I2CON_STO           STO      = 0
 587      =2  #define clr_I2CON_SI            SI       = 0
 588      =2  #define clr_I2CON_AA            AA       = 0
 589      =2  #define clr_I2CON_I2CPX         I2CPX    = 0 
 590      =2  
 591      =2  /**** I2ADDR    C1H ****/
 592      =2  #define set_I2ADDR_GC           I2ADDR|= 0x01
 593      =2  #define clr_I2ADDR_GC           I2ADDR&= 0xFE
 594      =2  
 595      =2  /**** ADCRL    C2H ****/
 596      =2  /**** ADCRH    C3H ****/
 597      =2  
 598      =2  /**** T3CON    C4H  PAGE0 ****/                     
 599      =2  #define set_T3CON_SMOD_1        clr_SFRS_SFRPAGE;T3CON|=0x80
 600      =2  #define set_T3CON_SMOD0_1       clr_SFRS_SFRPAGE;T3CON|=0x40
 601      =2  #define set_T3CON_BRCK          clr_SFRS_SFRPAGE;T3CON|=0x20
 602      =2  #define set_T3CON_TF3           clr_SFRS_SFRPAGE;T3CON|=0x10
 603      =2  #define set_T3CON_TR3           clr_SFRS_SFRPAGE;T3CON|=0x08
 604      =2  #define set_T3CON_T3PS2         clr_SFRS_SFRPAGE;T3CON|=0x04
 605      =2  #define set_T3CON_T3PS1         clr_SFRS_SFRPAGE;T3CON|=0x02
 606      =2  #define set_T3CON_T3PS0         clr_SFRS_SFRPAGE;T3CON|=0x01
 607      =2  
 608      =2  #define clr_T3CON_SMOD_1        clr_SFRS_SFRPAGE;T3CON&=0x7F
 609      =2  #define clr_T3CON_SMOD0_1       clr_SFRS_SFRPAGE;T3CON&=0xBF
 610      =2  #define clr_T3CON_BRCK          clr_SFRS_SFRPAGE;T3CON&=0xDF
 611      =2  #define clr_T3CON_TF3           clr_SFRS_SFRPAGE;T3CON&=0xEF
 612      =2  #define clr_T3CON_TR3           clr_SFRS_SFRPAGE;T3CON&=0xF7
 613      =2  #define clr_T3CON_T3PS2         clr_SFRS_SFRPAGE;T3CON&=0xFB
 614      =2  #define clr_T3CON_T3PS1         clr_SFRS_SFRPAGE;T3CON&=0xFD
 615      =2  #define clr_T3CON_T3PS0         clr_SFRS_SFRPAGE;T3CON&=0xFE
 616      =2  
 617      =2  /**** PWM4H  C4H  PAGE1 ****/ 
 618      =2  /**** RL3    C5H PAGE0 ****/
 619      =2  /**** PWM5H  C5H PAGE1 ****/ 
 620      =2  /**** RH3    C6H PAGE0 ****/
 621      =2  
 622      =2  /**** PIOCON1 C6H PAGE1 ****/ 
 623      =2  #define set_PIOCON1_PIO15       set_SFRS_SFRPAGE;PIOCON1|=0x20;clr_SFRS_SFRPAGE
 624      =2  #define set_PIOCON1_PIO13       set_SFRS_SFRPAGE;PIOCON1|=0x08;clr_SFRS_SFRPAGE
 625      =2  #define set_PIOCON1_PIO12       set_SFRS_SFRPAGE;PIOCON1|=0x04;clr_SFRS_SFRPAGE
 626      =2  #define set_PIOCON1_PIO11       set_SFRS_SFRPAGE;PIOCON1|=0x02;clr_SFRS_SFRPAGE
 627      =2  
 628      =2  #define clr_PIOCON1_PIO15       set_SFRS_SFRPAGE;PIOCON1&=0xDF;clr_SFRS_SFRPAGE
 629      =2  #define clr_PIOCON1_PIO13       set_SFRS_SFRPAGE;PIOCON1&=0xF7;clr_SFRS_SFRPAGE
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 48  

 630      =2  #define clr_PIOCON1_PIO12       set_SFRS_SFRPAGE;PIOCON1&=0xFB;clr_SFRS_SFRPAGE
 631      =2  #define clr_PIOCON1_PIO11       set_SFRS_SFRPAGE;PIOCON1&=0xFD;clr_SFRS_SFRPAGE
 632      =2  
 633      =2  /**** T2CON  C8H ****/
 634      =2  #define set_T2CON_TF2           TF2      = 1
 635      =2  #define set_T2CON_TR2           TR2      = 1
 636      =2  #define set_T2CON_CMRL2         CM_RL2   = 1
 637      =2                                  
 638      =2  #define clr_T2CON_TF2           TF2      = 0
 639      =2  #define clr_T2CON_TR2           TR2      = 0
 640      =2  #define clr_T2CON_CMRL2         CM_RL2   = 0
 641      =2  
 642      =2  /**** T2MOD  C9H ****/                     
 643      =2  #define set_T2MOD_LDEN          T2MOD|=0x80
 644      =2  #define set_T2MOD_T2DIV2        T2MOD|=0x40
 645      =2  #define set_T2MOD_T2DIV1        T2MOD|=0x20
 646      =2  #define set_T2MOD_T2DIV0        T2MOD|=0x10
 647      =2  #define set_T2MOD_CAPCR         T2MOD|=0x08
 648      =2  #define set_T2MOD_CMPCR         T2MOD|=0x04
 649      =2  #define set_T2MOD_LDTS1         T2MOD|=0x02
 650      =2  #define set_T2MOD_LDTS0         T2MOD|=0x01
 651      =2                                         
 652      =2  #define clr_T2MOD_LDEN          T2MOD&=0x7F
 653      =2  #define clr_T2MOD_T2DIV2        T2MOD&=0xBF
 654      =2  #define clr_T2MOD_T2DIV1        T2MOD&=0xDF
 655      =2  #define clr_T2MOD_T2DIV0        T2MOD&=0xEF
 656      =2  #define clr_T2MOD_CAPCR         T2MOD&=0xF7
 657      =2  #define clr_T2MOD_CMPCR         T2MOD&=0xFB
 658      =2  #define clr_T2MOD_LDTS1         T2MOD&=0xFD
 659      =2  #define clr_T2MOD_LDTS0         T2MOD&=0xFE
 660      =2  
 661      =2  /**** RCMP2H CAH ****/
 662      =2  /**** RCMP2L CBH ****/
 663      =2  /**** TL2    CCH PAGE0 ****/
 664      =2  /**** PWM4L  CCH PAGE1 ****/ 
 665      =2  /**** TH2    CDH PAGE0 ****/
 666      =2  /**** PWM5L  CDH PAGE1 ****/ 
 667      =2  /**** ADCMPL  CEH ****/ 
 668      =2  /**** ADCMPH  CFH ****/
 669      =2  
 670      =2  /****  PSW     D0H ****/
 671      =2  #define set_PSW_CY              CY  = 1
 672      =2  #define set_PSW_AC              AC  = 1
 673      =2  #define set_PSW_F0              F0  = 1 
 674      =2  #define set_PSW_RS1             RS1 = 1
 675      =2  #define set_PSW_RS0             RS0 = 1
 676      =2  #define set_PSW_OV              OV   = 1
 677      =2  #define set_PSW_P               P    = 1
 678      =2                                  
 679      =2  #define clr_PSW_CY              CY  = 0
 680      =2  #define clr_PSW_AC              AC  = 0
 681      =2  #define clr_PSW_F0              F0  = 0 
 682      =2  #define clr_PSW_RS1             RS1 = 0
 683      =2  #define clr_PSW_RS0             RS0 = 0
 684      =2  #define clr_PSW_OV              OV   = 0
 685      =2  #define clr_PSW_P               P    = 0
 686      =2  
 687      =2  /**** PWMPH    D1H ****/
 688      =2  /**** PWM0H    D2H ****/
 689      =2  /**** PWM1H    D3H ****/
 690      =2  /**** PWM2H    D4H ****/
 691      =2  /**** PWM3H    D5H  ****
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 49  

 692      =2  
 693      =2  /**** FBD    D7H ****/
 694      =2  #define set_FBD_FBF             FBD|=0x80
 695      =2  #define set_FBD_FBINLS          FBD|=0x40
 696      =2  #define set_FBD_FBD5            FBD|=0x20
 697      =2  #define set_FBD_FBD4            FBD|=0x10
 698      =2  #define set_FBD_FBD3            FBD|=0x08
 699      =2  #define set_FBD_FBD2            FBD|=0x04
 700      =2  #define set_FBD_FBD1            FBD|=0x02
 701      =2  #define set_FBD_FBD0            FBD|=0x01
 702      =2                                  
 703      =2  #define clr_FBD_FBF             FBD&=0x7F
 704      =2  #define clr_FBD_FBINLS          FBD&=0xBF
 705      =2  #define clr_FBD_FBD5            FBD&=0xDF
 706      =2  #define clr_FBD_FBD4            FBD&=0xEF
 707      =2  #define clr_FBD_FBD3            FBD&=0xF7
 708      =2  #define clr_FBD_FBD2            FBD&=0xFB
 709      =2  #define clr_FBD_FBD1            FBD&=0xFD
 710      =2  #define clr_FBD_FBD0            FBD&=0xFE
 711      =2  
 712      =2  /**** PWMCON0      D8H ****/
 713      =2  #define set_PWMCON0_PWMRUN      PWMRUN   = 1
 714      =2  #define set_PWMCON0_LOAD        LOAD     = 1
 715      =2  #define set_PWMCON0_PWMF        PWMF     = 1
 716      =2  #define set_PWMCON0_CLRPWM      CLRPWM   = 1
 717      =2                                  
 718      =2  #define clr_PWMCON0_PWMRUN      PWMRUN   = 0
 719      =2  #define clr_PWMCON0_LOAD        LOAD     = 0
 720      =2  #define clr_PWMCON0_PWMF        PWMF     = 0 
 721      =2  #define clr_PWMCON0_CLRPWM      CLRPWM   = 0
 722      =2  
 723      =2  /**** PWMPL    D9H ****/
 724      =2  /**** PWM0L    DAH ****/
 725      =2  /**** PWM1L    DBH ****/
 726      =2  /**** PWM2L    DCH ****/
 727      =2  /**** PWM3L    DDH ****/
 728      =2  
 729      =2  /**** PIOCON0  DEH ****/
 730      =2  #define set_PIOCON0_PIO05       PIOCON0|=0x20
 731      =2  #define set_PIOCON0_PIO04       PIOCON0|=0x10
 732      =2  #define set_PIOCON0_PIO03       PIOCON0|=0x08
 733      =2  #define set_PIOCON0_PIO02       PIOCON0|=0x04
 734      =2  #define set_PIOCON0_PIO01       PIOCON0|=0x02
 735      =2  #define set_PIOCON0_PIO00       PIOCON0|=0x01
 736      =2                                  
 737      =2  #define clr_PIOCON0_PIO05       PIOCON0&=0xDF
 738      =2  #define clr_PIOCON0_PIO04       PIOCON0&=0xEF
 739      =2  #define clr_PIOCON0_PIO03       PIOCON0&=0xF7
 740      =2  #define clr_PIOCON0_PIO02       PIOCON0&=0xFB
 741      =2  #define clr_PIOCON0_PIO01       PIOCON0&=0xFD
 742      =2  #define clr_PIOCON0_PIO00       PIOCON0&=0xFE
 743      =2  
 744      =2  /**** PWMCON1  DFH ****/
 745      =2  #define set_PWMCON1_PWMMOD1     PWMCON1|=0x80
 746      =2  #define set_PWMCON1_PWMMOD0     PWMCON1|=0x40
 747      =2  #define set_PWMCON1_GP          PWMCON1|=0x20
 748      =2  #define set_PWMCON1_PWMTYP      PWMCON1|=0x10
 749      =2  #define set_PWMCON1_FBINEN      PWMCON1|=0x08
 750      =2  #define set_PWMCON1_PWMDIV2     PWMCON1|=0x04 
 751      =2  #define set_PWMCON1_PWMDIV1     PWMCON1|=0x02
 752      =2  #define set_PWMCON1_PWMDIV0     PWMCON1|=0x01
 753      =2                                  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 50  

 754      =2  #define clr_PWMCON1_PWMMOD1     PWMCON1&=0x7F
 755      =2  #define clr_PWMCON1_PWMMOD0     PWMCON1&=0xBF
 756      =2  #define clr_PWMCON1_GP          PWMCON1&=0xDF
 757      =2  #define clr_PWMCON1_PWMTYP      PWMCON1&=0xEF
 758      =2  #define clr_PWMCON1_FBINEN      PWMCON1&=0xF7
 759      =2  #define clr_PWMCON1_PWMDIV2     PWMCON1&=0xFB 
 760      =2  #define clr_PWMCON1_PWMDIV1     PWMCON1&=0xFD
 761      =2  #define clr_PWMCON1_PWMDIV0     PWMCON1&=0xFE
 762      =2  
 763      =2  /**** ACC  E0H ****/
 764      =2  
 765      =2  /**** ADCCON1  E1H ****/
 766      =2  #define set_ADCCON1_STADCPX     clr_SFRS_SFRPAGE;ADCCON1|=0x40
 767      =2  #define set_ADCCON1_ETGTYP1     clr_SFRS_SFRPAGE;ADCCON1|=0x08
 768      =2  #define set_ADCCON1_ETGTYP0     clr_SFRS_SFRPAGE;ADCCON1|=0x04
 769      =2  #define set_ADCCON1_ADCEX       clr_SFRS_SFRPAGE;ADCCON1|=0x02
 770      =2  #define set_ADCCON1_ADCEN       clr_SFRS_SFRPAGE;ADCCON1|=0x01
 771      =2  
 772      =2  #define clr_ADCCON1_STADCPX     clr_SFRS_SFRPAGE;ADCCON1&=0xBF
 773      =2  #define clr_ADCCON1_ETGTYP1     clr_SFRS_SFRPAGE;ADCCON1&=0xF7
 774      =2  #define clr_ADCCON1_ETGTYP0     clr_SFRS_SFRPAGE;ADCCON1&=0xFB                                            
             -       
 775      =2  #define clr_ADCCON1_ADCEX       clr_SFRS_SFRPAGE;ADCCON1&=0xFD
 776      =2  #define clr_ADCCON1_ADCEN       clr_SFRS_SFRPAGE;ADCCON1&=0xFE
 777      =2  
 778      =2  /**** ADCON2    E2H ****/                    
 779      =2  #define set_ADCCON2_ADFBEN      clr_SFRS_SFRPAGE;ADCCON2|=0x80
 780      =2  #define set_ADCCON2_ADCMPOP     clr_SFRS_SFRPAGE;ADCCON2|=0x40
 781      =2  #define set_ADCCON2_ADCMPEN     clr_SFRS_SFRPAGE;ADCCON2|=0x20
 782      =2  #define set_ADCCON2_ADCMPO      clr_SFRS_SFRPAGE;ADCCON2|=0x10
 783      =2  
 784      =2  #define clr_ADCCON2_ADFBEN      clr_SFRS_SFRPAGE;ADCCON2&=0x7F
 785      =2  #define clr_ADCCON2_ADCMPOP     clr_SFRS_SFRPAGE;ADCCON2&=0xBF
 786      =2  #define clr_ADCCON2_ADCMPEN     clr_SFRS_SFRPAGE;ADCCON2&=0xDF
 787      =2  #define clr_ADCCON2_ADCMPO      clr_SFRS_SFRPAGE;ADCCON2&=0xEF
 788      =2  
 789      =2  /**** ADCDLY    E3H ****/
 790      =2  /**** C0L      E4H ****/
 791      =2  /**** C0H      E5H ****/
 792      =2  /**** C1L      E6H ****/
 793      =2  /**** C1H      E7H ****/
 794      =2  
 795      =2  /**** ADCCON0  EAH ****/
 796      =2  #define set_ADCCON0_ADCF        clr_SFRS_SFRPAGE;ADCF=1
 797      =2  #define set_ADCCON0_ADCS        clr_SFRS_SFRPAGE;ADCS=1
 798      =2  #define set_ADCCON0_ETGSEL1     clr_SFRS_SFRPAGE;ETGSEL1=1
 799      =2  #define set_ADCCON0_ETGSEL0     clr_SFRS_SFRPAGE;ETGSEL0=1
 800      =2  #define set_ADCCON0_ADCHS3      clr_SFRS_SFRPAGE;ADCHS3=1
 801      =2  #define set_ADCCON0_ADCHS2      clr_SFRS_SFRPAGE;ADCHS2=1
 802      =2  #define set_ADCCON0_ADCHS1      clr_SFRS_SFRPAGE;ADCHS1=1
 803      =2  #define set_ADCCON0_ADCHS0      clr_SFRS_SFRPAGE;ADCHS0=1
 804      =2  
 805      =2  #define clr_ADCCON0_ADCF        clr_SFRS_SFRPAGE;ADCF=0
 806      =2  #define clr_ADCCON0_ADCS        clr_SFRS_SFRPAGE;ADCS=0
 807      =2  #define clr_ADCCON0_ETGSEL1     clr_SFRS_SFRPAGE;ETGSEL1=0
 808      =2  #define clr_ADCCON0_ETGSEL0     clr_SFRS_SFRPAGE;ETGSEL0=0
 809      =2  #define clr_ADCCON0_ADCHS3      clr_SFRS_SFRPAGE;ADCHS3=0
 810      =2  #define clr_ADCCON0_ADCHS2      clr_SFRS_SFRPAGE;ADCHS2=0
 811      =2  #define clr_ADCCON0_ADCHS1      clr_SFRS_SFRPAGE;ADCHS1=0
 812      =2  #define clr_ADCCON0_ADCHS0      clr_SFRS_SFRPAGE;ADCHS0=0
 813      =2  
 814      =2  /**** PICON  E9H ****/
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 51  

 815      =2  #define set_PICON_PIT67         PICON|=0x80
 816      =2  #define set_PICON_PIT45         PICON|=0x40
 817      =2  #define set_PICON_PIT3          PICON|=0x20
 818      =2  #define set_PICON_PIT2          PICON|=0x10
 819      =2  #define set_PICON_PIT1          PICON|=0x08
 820      =2  #define set_PICON_PIT0          PICON|=0x04
 821      =2  #define set_PICON_PIPS1         PICON|=0x02
 822      =2  #define set_PICON_PIPS0         PICON|=0x01
 823      =2                                    
 824      =2  #define clr_PICON_PIT67         PICON&=0x7F
 825      =2  #define clr_PICON_PIT45         PICON&=0xBF
 826      =2  #define clr_PICON_PIT3          PICON&=0xDF
 827      =2  #define clr_PICON_PIT2          PICON&=0xEF
 828      =2  #define clr_PICON_PIT1          PICON&=0xF7
 829      =2  #define clr_PICON_PIT0          PICON&=0xFB
 830      =2  #define clr_PICON_PIPS1         PICON&=0xFD
 831      =2  #define clr_PICON_PIPS0         PICON&=0xFE
 832      =2  
 833      =2  /**** PINEN    EAH ****/ 
 834      =2  #define set_PINEN_PINEN7        PINEN|=0x80
 835      =2  #define set_PINEN_PINEN6        PINEN|=0x40
 836      =2  #define set_PINEN_PINEN5        PINEN|=0x20
 837      =2  #define set_PINEN_PINEN4        PINEN|=0x10
 838      =2  #define set_PINEN_PINEN3        PINEN|=0x08
 839      =2  #define set_PINEN_PINEN2        PINEN|=0x04
 840      =2  #define set_PINEN_PINEN1        PINEN|=0x02
 841      =2  #define set_PINEN_PINEN0        PINEN|=0x01
 842      =2                                    
 843      =2  #define clr_PINEN_PINEN7        PINEN&=0x7F
 844      =2  #define clr_PINEN_PINEN6        PINEN&=0xBF
 845      =2  #define clr_PINEN_PINEN5        PINEN&=0xDF
 846      =2  #define clr_PINEN_PINEN4        PINEN&=0xEF
 847      =2  #define clr_PINEN_PINEN3        PINEN&=0xF7
 848      =2  #define clr_PINEN_PINEN2        PINEN&=0xFB
 849      =2  #define clr_PINEN_PINEN1        PINEN&=0xFD
 850      =2  #define clr_PINEN_PINEN0        PINEN&=0xFE
 851      =2                              
 852      =2  /**** PIPEN     EBH ****/
 853      =2  #define set_PIPEN_PIPEN7        PIPEN|=0x80
 854      =2  #define set_PIPEN_PIPEN6        PIPEN|=0x40
 855      =2  #define set_PIPEN_PIPEN5        PIPEN|=0x20
 856      =2  #define set_PIPEN_PIPEN4        PIPEN|=0x10
 857      =2  #define set_PIPEN_PIPEN3        PIPEN|=0x08
 858      =2  #define set_PIPEN_PIPEN2        PIPEN|=0x04
 859      =2  #define set_PIPEN_PIPEN1        PIPEN|=0x02
 860      =2  #define set_PIPEN_PIPEN0        PIPEN|=0x01
 861      =2                                    
 862      =2  #define clr_PIPEN_PIPEN7        PIPEN&=0x7F
 863      =2  #define clr_PIPEN_PIPEN6        PIPEN&=0xBF
 864      =2  #define clr_PIPEN_PIPEN5        PIPEN&=0xDF
 865      =2  #define clr_PIPEN_PIPEN4        PIPEN&=0xEF
 866      =2  #define clr_PIPEN_PIPEN3        PIPEN&=0xF7
 867      =2  #define clr_PIPEN_PIPEN2        PIPEN&=0xFB
 868      =2  #define clr_PIPEN_PIPEN1        PIPEN&=0xFD
 869      =2  #define clr_PIPEN_PIPEN0        PIPEN&=0xFE
 870      =2  
 871      =2  /**** PIF ECH ****/
 872      =2  #define set_PIF_PIF7             PIF|=0x80
 873      =2  #define set_PIF_PIF6             PIF|=0x40
 874      =2  #define set_PIF_PIF5             PIF|=0x20
 875      =2  #define set_PIF_PIF4             PIF|=0x10
 876      =2  #define set_PIF_PIF3             PIF|=0x08
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 52  

 877      =2  #define set_PIF_PIF2             PIF|=0x04
 878      =2  #define set_PIF_PIF1             PIF|=0x02
 879      =2  #define set_PIF_PIF0             PIF|=0x01
 880      =2                                   
 881      =2  #define clr_PIF_PIF7             PIF&=0x7F
 882      =2  #define clr_PIF_PIF6             PIF&=0xBF
 883      =2  #define clr_PIF_PIF5             PIF&=0xDF
 884      =2  #define clr_PIF_PIF4             PIF&=0xEF
 885      =2  #define clr_PIF_PIF3             PIF&=0xF7
 886      =2  #define clr_PIF_PIF2             PIF&=0xFB
 887      =2  #define clr_PIF_PIF1             PIF&=0xFD
 888      =2  #define clr_PIF_PIF0             PIF&=0xFE
 889      =2  
 890      =2  /**** C2L  EDH ****/  
 891      =2  /**** C2H  EEH ****/
 892      =2  
 893      =2  /**** EIP  EFH ****/                      
 894      =2  #define set_EIP_PT2             EIP|=0x80
 895      =2  #define set_EIP_PSPI            EIP|=0x40
 896      =2  #define set_EIP_PFB             EIP|=0x20
 897      =2  #define set_EIP_PWDT            EIP|=0x10
 898      =2  #define set_EIP_PPWM            EIP|=0x08
 899      =2  #define set_EIP_PCAP            EIP|=0x04
 900      =2  #define set_EIP_PPI             EIP|=0x02
 901      =2  #define set_EIP_PI2C            EIP|=0x01
 902      =2                                     
 903      =2  #define clr_EIP_PT2             EIP&=0x7F
 904      =2  #define clr_EIP_PSPI            EIP&=0xBF
 905      =2  #define clr_EIP_PFB             EIP&=0xDF
 906      =2  #define clr_EIP_PWDT            EIP&=0xEF
 907      =2  #define clr_EIP_PPWM            EIP&=0xF7
 908      =2  #define clr_EIP_PCAP            EIP&=0xFB
 909      =2  #define clr_EIP_PPI             EIP&=0xFD
 910      =2  #define clr_EIP_PI2C            EIP&=0xFE
 911      =2  
 912      =2  /**** B  F0H ****/
 913      =2  
 914      =2  /**** CAPCON3    F1H ****/
 915      =2  #define set_CAPCON3_CAP13       CAPCON3|=0x80
 916      =2  #define set_CAPCON3_CAP12       CAPCON3|=0x40
 917      =2  #define set_CAPCON3_CAP11       CAPCON3|=0x20
 918      =2  #define set_CAPCON3_CAP10       CAPCON3|=0x10
 919      =2  #define set_CAPCON3_CAP03       CAPCON3|=0x08
 920      =2  #define set_CAPCON3_CAP02       CAPCON3|=0x04
 921      =2  #define set_CAPCON3_CAP01       CAPCON3|=0x02
 922      =2  #define set_CAPCON3_CAP00       CAPCON3|=0x01
 923      =2                                  
 924      =2  #define clr_CAPCON3_CAP13       CAPCON3&=0x7F
 925      =2  #define clr_CAPCON3_CAP12       CAPCON3&=0xBF
 926      =2  #define clr_CAPCON3_CAP11       CAPCON3&=0xDF
 927      =2  #define clr_CAPCON3_CAP10       CAPCON3&=0xEF
 928      =2  #define clr_CAPCON3_CAP03       CAPCON3&=0xF7
 929      =2  #define clr_CAPCON3_CAP02       CAPCON3&=0xFB
 930      =2  #define clr_CAPCON3_CAP01       CAPCON3&=0xFD
 931      =2  #define clr_CAPCON3_CAP00       CAPCON3&=0xFE
 932      =2  
 933      =2  /**** CAPCON4    F2H ****/
 934      =2  #define set_CAPCON4_CAP23       CAPCON4|=0x08
 935      =2  #define set_CAPCON4_CAP22       CAPCON4|=0x04
 936      =2  #define set_CAPCON4_CAP21       CAPCON4|=0x02
 937      =2  #define set_CAPCON4_CAP20       CAPCON4|=0x01
 938      =2                                  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 53  

 939      =2  #define clr_CAPCON4_CAP23       CAPCON4&=0xF7
 940      =2  #define clr_CAPCON4_CAP22       CAPCON4&=0xFB
 941      =2  #define clr_CAPCON4_CAP21       CAPCON4&=0xFD
 942      =2  #define clr_CAPCON4_CAP20       CAPCON4&=0xFE
 943      =2  
 944      =2  /**** SPCR    F3H PAGE0 ****/
 945      =2  #define set_SPCR_SSOE           clr_SFRS_SFRPAGE;SPCR|=0x80
 946      =2  #define set_SPCR_SPIEN          clr_SFRS_SFRPAGE;SPCR|=0x40
 947      =2  #define set_SPCR_LSBFE          clr_SFRS_SFRPAGE;SPCR|=0x20
 948      =2  #define set_SPCR_MSTR           clr_SFRS_SFRPAGE;SPCR|=0x10
 949      =2  #define set_SPCR_CPOL           clr_SFRS_SFRPAGE;SPCR|=0x08
 950      =2  #define set_SPCR_CPHA           clr_SFRS_SFRPAGE;SPCR|=0x04
 951      =2  #define set_SPCR_SPR1           clr_SFRS_SFRPAGE;SPCR|=0x02
 952      =2  #define set_SPCR_SPR0           clr_SFRS_SFRPAGE;SPCR|=0x01
 953      =2                                  
 954      =2  #define clr_SPCR_SSOE           clr_SFRS_SFRPAGE;SPCR&=0x7F
 955      =2  #define clr_SPCR_SPIEN          clr_SFRS_SFRPAGE;SPCR&=0xBF
 956      =2  #define clr_SPCR_LSBFE          clr_SFRS_SFRPAGE;SPCR&=0xDF
 957      =2  #define clr_SPCR_MSTR           clr_SFRS_SFRPAGE;SPCR&=0xEF
 958      =2  #define clr_SPCR_CPOL           clr_SFRS_SFRPAGE;SPCR&=0xF7
 959      =2  #define clr_SPCR_CPHA           clr_SFRS_SFRPAGE;SPCR&=0xFB
 960      =2  #define clr_SPCR_SPR1           clr_SFRS_SFRPAGE;SPCR&=0xFD
 961      =2  #define clr_SPCR_SPR0           clr_SFRS_SFRPAGE;SPCR&=0xFE
 962      =2  
 963      =2  /**** SPCR2    F3H PAGE1 ****/ 
 964      =2  #define set_SPCR2_SPIS1         set_SFRS_SFRPAGE;SPCR2|=0x02;clr_SFRS_SFRPAGE
 965      =2  #define set_SPCR2_SPIS0         set_SFRS_SFRPAGE;SPCR2|=0x02;clr_SFRS_SFRPAGE
 966      =2  
 967      =2  #define clr_SPCR2_SPIS1         set_SFRS_SFRPAGE;SPCR2&=0xFD;clr_SFRS_SFRPAGE
 968      =2  #define clr_SPCR2_SPIS0         set_SFRS_SFRPAGE;SPCR2&=0xFE;clr_SFRS_SFRPAGE
 969      =2  
 970      =2  /**** SPSR      F4H ****/
 971      =2  #define set_SPSR_SPIF           SPSR|=0x80
 972      =2  #define set_SPSR_WCOL           SPSR|=0x40
 973      =2  #define set_SPSR_SPIOVF         SPSR|=0x20
 974      =2  #define set_SPSR_MODF           SPSR|=0x10
 975      =2  #define set_SPSR_DISMODF        SPSR|=0x08
 976      =2                                     
 977      =2  #define clr_SPSR_SPIF           SPSR&=0x7F
 978      =2  #define clr_SPSR_WCOL           SPSR&=0xBF
 979      =2  #define clr_SPSR_SPIOVF         SPSR&=0xDF
 980      =2  #define clr_SPSR_MODF           SPSR&=0xEF
 981      =2  #define clr_SPSR_DISMODF        SPSR&=0xF7
 982      =2  
 983      =2  /**** SPDR    F5H PAGE0 ****/
 984      =2  
 985      =2  /**** AINDIDS  F6H PAGE0 ****/
 986      =2  #define set_AINDIDS_P11DIDS     clr_SFRS_SFRPAGE;AINDIDS|=0x80
 987      =2  #define set_AINDIDS_P03DIDS     clr_SFRS_SFRPAGE;AINDIDS|=0x40
 988      =2  #define set_AINDIDS_P04DIDS     clr_SFRS_SFRPAGE;AINDIDS|=0x20
 989      =2  #define set_AINDIDS_P05DIDS     clr_SFRS_SFRPAGE;AINDIDS|=0x10
 990      =2  #define set_AINDIDS_P06DIDS     clr_SFRS_SFRPAGE;AINDIDS|=0x08
 991      =2  #define set_AINDIDS_P07DIDS     clr_SFRS_SFRPAGE;AINDIDS|=0x04
 992      =2  #define set_AINDIDS_P30DIDS     clr_SFRS_SFRPAGE;AINDIDS|=0x02
 993      =2  #define set_AINDIDS_P17DIDS     clr_SFRS_SFRPAGE;AINDIDS|=0x01
 994      =2                                  
 995      =2  #define clr_AINDIDS_P11DIDS     clr_SFRS_SFRPAGE;AINDIDS&=0x7F
 996      =2  #define clr_AINDIDS_P03DIDS     clr_SFRS_SFRPAGE;AINDIDS&=0xBF
 997      =2  #define clr_AINDIDS_P04DIDS     clr_SFRS_SFRPAGE;AINDIDS&=0xDF
 998      =2  #define clr_AINDIDS_P05DIDS     clr_SFRS_SFRPAGE;AINDIDS&=0xEF
 999      =2  #define clr_AINDIDS_P06DIDS     clr_SFRS_SFRPAGE;AINDIDS&=0xF7
1000      =2  #define clr_AINDIDS_P07DIDS     clr_SFRS_SFRPAGE;AINDIDS&=0xFB
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 54  

1001      =2  #define clr_AINDIDS_P30DIDS     clr_SFRS_SFRPAGE;AINDIDS&=0xFD
1002      =2  #define clr_AINDIDS_P17DIDS     clr_SFRS_SFRPAGE;AINDIDS&=0xFE
1003      =2  
1004      =2  /**** EIPH      F7H ****/
1005      =2  #define set_EIPH_PT2H           clr_SFRS_SFRPAGE;EIPH|=0x80
1006      =2  #define set_EIPH_PSPIH          clr_SFRS_SFRPAGE;EIPH|=0x40
1007      =2  #define set_EIPH_PFBH           clr_SFRS_SFRPAGE;EIPH|=0x20
1008      =2  #define set_EIPH_PWDTH          clr_SFRS_SFRPAGE;EIPH|=0x10
1009      =2  #define set_EIPH_PPWMH          clr_SFRS_SFRPAGE;EIPH|=0x08
1010      =2  #define set_EIPH_PCAPH          clr_SFRS_SFRPAGE;EIPH|=0x04
1011      =2  #define set_EIPH_PPIH           clr_SFRS_SFRPAGE;EIPH|=0x02
1012      =2  #define set_EIPH_PI2CH          clr_SFRS_SFRPAGE;EIPH|=0x01
1013      =2                                     
1014      =2  #define clr_EIPH_PT2H           clr_SFRS_SFRPAGE;EIPH&=0x7F
1015      =2  #define clr_EIPH_PSPIH          clr_SFRS_SFRPAGE;EIPH&=0xBF
1016      =2  #define clr_EIPH_PFBH           clr_SFRS_SFRPAGE;EIPH&=0xDF
1017      =2  #define clr_EIPH_PWDTH          clr_SFRS_SFRPAGE;EIPH&=0xEF
1018      =2  #define clr_EIPH_PPWMH          clr_SFRS_SFRPAGE;EIPH&=0xF7
1019      =2  #define clr_EIPH_PCAPH          clr_SFRS_SFRPAGE;EIPH&=0xFB
1020      =2  #define clr_EIPH_PPIH           clr_SFRS_SFRPAGE;EIPH&=0xFD
1021      =2  #define clr_EIPH_PI2CH          clr_SFRS_SFRPAGE;EIPH&=0xFE
1022      =2  
1023      =2  /**** SCON_1    F8H ****/
1024      =2  #define set_SCON_1_FE_1         FE_1  = 1
1025      =2  #define set_SCON_1_SM1_1        SM1_1 = 1
1026      =2  #define set_SCON_1_SM2_1        SM2_1 = 1
1027      =2  #define set_SCON_1_REN_1        REN_1 = 1
1028      =2  #define set_SCON_1_TB8_1        TB8_1 = 1
1029      =2  #define set_SCON_1_RB8_1        RB8_1 = 1
1030      =2  #define set_SCON_1_TI_1         TI_1  = 1
1031      =2  #define set_SCON_1_RI_1         RI_1  = 1
1032      =2                                  
1033      =2  #define clr_SCON_1_FE_1         FE_1  = 0
1034      =2  #define clr_SCON_1_SM1_1        SM1_1 = 0
1035      =2  #define clr_SCON_1_SM2_1        SM2_1 = 0
1036      =2  #define clr_SCON_1_REN_1        REN_1 = 0
1037      =2  #define clr_SCON_1_TB8_1        TB8_1 = 0
1038      =2  #define clr_SCON_1_RB8_1        RB8_1 = 0
1039      =2  #define clr_SCON_1_TI_1         TI_1  = 0
1040      =2  #define clr_SCON_1_RI_1         RI_1  = 0
1041      =2  
1042      =2  /**** PDTEN    F9H ****/
1043      =2  #define set_PDTEN_PDT45EN       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x04;EA=BIT_TMP
1044      =2  #define set_PDTEN_PDT23EN       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x02;EA=BIT_TMP
1045      =2  #define set_PDTEN_PDT01EN       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x01;EA=BIT_TMP
1046      =2                                  
1047      =2  #define clr_PDTEN_PDT45EN       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN&=0xFB;EA=BIT_TMP
1048      =2  #define clr_PDTEN_PDT23EN       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN&=0xFD;EA=BIT_TMP
1049      =2  #define clr_PDTEN_PDT01EN       BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN&=0xFE;EA=BIT_TMP
1050      =2  
1051      =2  /**** PDTCNT    FAH ****/
1052      =2  
1053      =2  /**** PMEN     FBH ****/                   
1054      =2  #define set_PMEN_5               PMEN|=0x20
1055      =2  #define set_PMEN_4               PMEN|=0x10
1056      =2  #define set_PMEN_3               PMEN|=0x08
1057      =2  #define set_PMEN_2               PMEN|=0x04
1058      =2  #define set_PMEN_1               PMEN|=0x02
1059      =2  #define set_PMEN_0               PMEN|=0x01
1060      =2                                      
1061      =2  #define clr_PMEN_5               PMEN&=0xDF
1062      =2  #define clr_PMEN_4               PMEN&=0xEF
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 55  

1063      =2  #define clr_PMEN_3               PMEN&=0xF7
1064      =2  #define clr_PMEN_2               PMEN&=0xFB
1065      =2  #define clr_PMEN_1               PMEN&=0xFD
1066      =2  #define clr_PMEN_0               PMEN&=0xFE
1067      =2                              
1068      =2  /**** PMD    FCH ****/                       
1069      =2  #define set_PMD_7                PMD|=0x80
1070      =2  #define set_PMD_6                PMD|=0x40
1071      =2  #define set_PMD_5                PMD|=0x20
1072      =2  #define set_PMD_4                PMD|=0x10
1073      =2  #define set_PMD_3                PMD|=0x08
1074      =2  #define set_PMD_2                PMD|=0x04
1075      =2  #define set_PMD_1                PMD|=0x02
1076      =2  #define set_PMD_0                PMD|=0x01
1077      =2                                     
1078      =2  #define clr_PMD_7                PMD&=0x7F
1079      =2  #define clr_PMD_6                PMD&=0xBF
1080      =2  #define clr_PMD_5                PMD&=0xDF
1081      =2  #define clr_PMD_4                PMD&=0xEF
1082      =2  #define clr_PMD_3                PMD&=0xF7
1083      =2  #define clr_PMD_2                PMD&=0xFB
1084      =2  #define clr_PMD_1                PMD&=0xFD
1085      =2  #define clr_PMD_0                PMD&=0xFE
1086      =2  
1087      =2  /****  EIP1     FEH PAGE0 ****/                   
1088      =2  #define set_EIP1_PWKT           clr_SFRS_SFRPAGE;EIP1|=0x04
1089      =2  #define set_EIP1_PT3            clr_SFRS_SFRPAGE;EIP1|=0x02
1090      =2  #define set_EIP1_PS_1           clr_SFRS_SFRPAGE;EIP1|=0x01
1091      =2                                     
1092      =2  #define clr_EIP1_PWKT           clr_SFRS_SFRPAGE;EIP1&=0xFB
1093      =2  #define clr_EIP1_PT3            clr_SFRS_SFRPAGE;EIP1&=0xFD
1094      =2  #define clr_EIP1_PS_1           clr_SFRS_SFRPAGE;EIP1&=0xFE
1095      =2  
1096      =2  /**** EIPH1    FFH ****/                
1097      =2  #define set_EIPH1_PWKTH         clr_SFRS_SFRPAGE;EIPH1|=0x04
1098      =2  #define set_EIPH1_PT3H          clr_SFRS_SFRPAGE;EIPH1|=0x02
1099      =2  #define set_EIPH1_PSH_1         clr_SFRS_SFRPAGE;EIPH1|=0x01
1100      =2                                    
1101      =2  #define clr_EIPH1_PWKTH         clr_SFRS_SFRPAGE;EIPH1&=0xFB
1102      =2  #define clr_EIPH1_PT3H          clr_SFRS_SFRPAGE;EIPH1&=0xFD
1103      =2  #define clr_EIPH1_PSH_1         clr_SFRS_SFRPAGE;EIPH1&=0xFE
1104      =2  
1105      =2   /********************************************************/
1106      =2  /*  <Define rule II> "set or clr _ register bit name     */
1107      =2  /*********************************************************/
1108      =2  /**** P0    80H ****/
1109      =2  #define set_P00                 P00=1
1110      =2  #define set_P01                 P01=1
1111      =2  #define set_P02                 P02=1
1112      =2  #define set_P03                 P03=1
1113      =2  #define set_P04                 P04=1
1114      =2  #define set_P05                 P05=1
1115      =2  #define set_P06                 P06=1
1116      =2  #define set_P07                 P07=1
1117      =2                                  
1118      =2  #define clr_P00                 P00=0
1119      =2  #define clr_P01                 P01=0
1120      =2  #define clr_P02                 P02=0
1121      =2  #define clr_P03                 P03=0
1122      =2  #define clr_P04                 P04=0
1123      =2  #define clr_P05                 P05=0
1124      =2  #define clr_P06                 P06=0
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 56  

1125      =2  #define clr_P07                 P07=0
1126      =2  
1127      =2  /**** SP    81H ****/ 
1128      =2  /**** DPH  82H ****/ 
1129      =2  /**** DPL  83H ****/ 
1130      =2  /**** RWK  86H ****/ 
1131      =2  
1132      =2  /**** PCON  87H ****/
1133      =2  #define set_SMOD                PCON|=0x80
1134      =2  #define set_SMOD0               PCON|=0x40
1135      =2  #define set_POF                 PCON|=0x10
1136      =2  #define set_GF1                 PCON|=0x08
1137      =2  #define set_GF0                 PCON|=0x04 
1138      =2  #define set_PD                  PCON|=0x02
1139      =2  #define set_IDL                 PCON|=0x01
1140      =2                                      
1141      =2  #define clr_SMOD                PCON&=0x7F
1142      =2  #define clr_SMOD0               PCON&=0xBF
1143      =2  #define clr_POF                 PCON&=0xEF
1144      =2  #define clr_GF1                 PCON&=0xF7
1145      =2  #define clr_GF0                 PCON&=0xFB 
1146      =2  #define clr_PD                  PCON&=0xFD
1147      =2  #define clr_IDL                 PCON&=0xFE
1148      =2  
1149      =2  /**** TCON    88H ****/
1150      =2  #define set_TF1                 TF1=1
1151      =2  #define set_TR1                 TR1=1
1152      =2  #define set_TF0                 TF0=1
1153      =2  #define set_TR0                 TR0=1
1154      =2  #define set_IE1                 IE1=1
1155      =2  #define set_IT1                 IT1=1
1156      =2  #define set_IE0                 IE0=1
1157      =2  #define set_IT0                 IT0=1
1158      =2                                  
1159      =2  #define clr_TF1                 TF1=0
1160      =2  #define clr_TR1                 TR1=0
1161      =2  #define clr_TF0                 TF0=0
1162      =2  #define clr_TR0                 TR0=0
1163      =2  #define clr_IE1                 IE1=0
1164      =2  #define clr_IT1                 IT1=0
1165      =2  #define clr_IE0                 IE0=0
1166      =2  #define clr_IT0                 IT0=0
1167      =2  
1168      =2  /**** TMOD    89H ****/ 
1169      =2  #define set_GATE_T1             TMOD|=0x80
1170      =2  #define set_CT_T1               TMOD|=0x40
1171      =2  #define set_M1_T1               TMOD|=0x20
1172      =2  #define set_M0_T1               TMOD|=0x10
1173      =2  #define set_GATE_T0             TMOD|=0x08
1174      =2  #define set_CT_T0               TMOD|=0x04
1175      =2  #define set_M1_T0               TMOD|=0x02
1176      =2  #define set_M0_T0               TMOD|=0x01
1177      =2                                      
1178      =2  #define clr_GATE_T1             TMOD&=0x7F
1179      =2  #define clr_CT_T1               TMOD&=0xBF
1180      =2  #define clr_M1_T1               TMOD&=0xDF
1181      =2  #define clr_M0_T1               TMOD&=0xEF
1182      =2  #define clr_GATE_T0             TMOD&=0xF7
1183      =2  #define clr_CT_T0               TMOD&=0xFB
1184      =2  #define clr_M1_T0               TMOD&=0xFD
1185      =2  #define clr_M0_T0               TMOD&=0xFE
1186      =2  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 57  

1187      =2  /**** TH1    8AH ****/ 
1188      =2  /**** TH0    8BH ****/ 
1189      =2  /**** TL1    8CH  **** 
1190      =2  /**** TL0    8DH ****/ 
1191      =2  
1192      =2  /**** CKCON  8EH ****/
1193      =2  #define set_PWMCKS              CKCON|=0x40
1194      =2  #define set_T1M                 CKCON|=0x10
1195      =2  #define set_T0M                 CKCON|=0x08
1196      =2  #define set_CLOEN               CKCON|=0x02
1197      =2                                       
1198      =2  #define clr_PWMCKS              CKCON&=0xBF
1199      =2  #define clr_T1M                 CKCON&=0xEF
1200      =2  #define clr_T0M                 CKCON&=0xF7
1201      =2  #define clr_CLOEN               CKCON&=0xFD
1202      =2  
1203      =2  /**** WKCON  8FH ****/
1204      =2  #define set_WKTCK               WKCON|=0x20
1205      =2  #define set_WKTF                WKCON|=0x10
1206      =2  #define set_WKTR                WKCON|=0x08
1207      =2  #define set_WKPS2               WKCON|=0x04
1208      =2  #define set_WKPS1               WKCON|=0x02
1209      =2  #define set_WKPS0               WKCON|=0x01
1210      =2                                       
1211      =2  #define clr_WKTCK               WKCON&=0xDF
1212      =2  #define clr_WKTF                WKCON&=0xEF
1213      =2  #define clr_WKTR                WKCON&=0xF7
1214      =2  #define clr_WKPS2               WKCON&=0xFB
1215      =2  #define clr_WKPS1               WKCON&=0xFD
1216      =2  #define clr_WKPS0               WKCON&=0xFE
1217      =2  
1218      =2  /**** P1    90H ****/
1219      =2  #define set_P10                 P10=1
1220      =2  #define set_P11                 P11=1
1221      =2  #define set_P12                 P12=1
1222      =2  #define set_P13                 P13=1
1223      =2  #define set_P14                 P14=1
1224      =2  #define set_P15                 P15=1
1225      =2  #define set_P16                 P16=1
1226      =2  #define set_P17                 P17=1
1227      =2                                  
1228      =2  #define clr_P10                 P10=0
1229      =2  #define clr_P11                 P11=0
1230      =2  #define clr_P12                 P12=0
1231      =2  #define clr_P13                 P13=0
1232      =2  #define clr_P14                 P14=0
1233      =2  #define clr_P15                 P15=0
1234      =2  #define clr_P16                 P16=0
1235      =2  #define clr_P17                 P17=0
1236      =2  
1237      =2  /****SFRS    91H ****/
1238      =2  #define set_SFRPAGE             BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=1;EA=BIT_TMP
1239      =2  #define clr_SFRPAGE             BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;SFRS=0;EA=BIT_TMP
1240      =2  
1241      =2  /****CAPCON0  92H ****/
1242      =2  #define set_CAPEN2              CAPCON0|=0x40
1243      =2  #define set_CAPEN1              CAPCON0|=0x20
1244      =2  #define set_CAPEN0              CAPCON0|=0x10
1245      =2  #define set_CAPF2               CAPCON0|=0x04
1246      =2  #define set_CAPF1               CAPCON0|=0x02
1247      =2  #define set_CAPF0               CAPCON0|=0x01
1248      =2                                  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 58  

1249      =2  #define clr_CAPEN2              CAPCON0&=0xBF
1250      =2  #define clr_CAPEN1              CAPCON0&=0xDF
1251      =2  #define clr_CAPEN0              CAPCON0&=0xEF
1252      =2  #define clr_CAPF2               CAPCON0&=0xFB
1253      =2  #define clr_CAPF1               CAPCON0&=0xFD
1254      =2  #define clr_CAPF0               CAPCON0&=0xFE
1255      =2  
1256      =2  /**** CAPCON1  93H ****/
1257      =2  #define set_CAP2LS1             CAPCON1|=0x20
1258      =2  #define set_CAP2LS0             CAPCON1|=0x10
1259      =2  #define set_CAP1LS1             CAPCON1|=0x08
1260      =2  #define set_CAP1LS0             CAPCON1|=0x04
1261      =2  #define set_CAP0LS1             CAPCON1|=0x02
1262      =2  #define set_CAP0LS0             CAPCON1|=0x01
1263      =2                                  
1264      =2  #define clr_CAP2LS1             CAPCON1&=0xDF
1265      =2  #define clr_CAP2LS0             CAPCON1&=0xEF
1266      =2  #define clr_CAP1LS1             CAPCON1&=0xF7
1267      =2  #define clr_CAP1LS0             CAPCON1&=0xFB
1268      =2  #define clr_CAP0LS1             CAPCON1&=0xFD
1269      =2  #define clr_CAP0LS0             CAPCON1&=0xFE
1270      =2  
1271      =2  /**** CAPCON2    94H ****/
1272      =2  #define set_ENF2                CAPCON2|=0x40
1273      =2  #define set_ENF1                CAPCON2|=0x20
1274      =2  #define set_ENF0                CAPCON2|=0x10
1275      =2                                         
1276      =2  #define clr_ENF2                CAPCON2&=0xBF
1277      =2  #define clr_ENF1                CAPCON2&=0xDF
1278      =2  #define clr_ENF0                CAPCON2&=0xEF
1279      =2  
1280      =2  /**** CKDIV    95H ****/
1281      =2  
1282      =2  /**** CKSWT    96H ****/
1283      =2  #define set_HIRCST              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x20;EA=BIT_TMP
1284      =2  #define set_LIRCST              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x10;EA=BIT_TMP
1285      =2  #define set_ECLKST              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x08;EA=BIT_TMP
1286      =2  #define set_OSC1                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x04;EA=BIT_TMP
1287      =2  #define set_OSC0                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT|=0x02;EA=BIT_TMP
1288      =2                                  
1289      =2  #define clr_HIRCST              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xDF;EA=BIT_TMP
1290      =2  #define clr_LIRCST              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xEF;EA=BIT_TMP
1291      =2  #define clr_ECLKST              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xF7;EA=BIT_TMP
1292      =2  #define clr_OSC1                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xFB;EA=BIT_TMP
1293      =2  #define clr_OSC0                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKSWT&=0xFD;EA=BIT_TMP
1294      =2  
1295      =2  /**** CKEN   97H **** TA protect register ****/
1296      =2  #define set_EXTEN1              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN|=0x80;EA=BIT_TMP
1297      =2  #define set_EXTEN0              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN|=0x40;EA=BIT_TMP
1298      =2  #define set_HIRCEN              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN|=0x20;EA=BIT_TMP
1299      =2  #define set_CKSWTF              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN|=0x01;EA=BIT_TMP
1300      =2                                  
1301      =2  #define clr_EXTEN1              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN&=0x7F;EA=BIT_TMP
1302      =2  #define clr_EXTEN0              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN&=0xBF;EA=BIT_TMP
1303      =2  #define clr_HIRCEN              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN&=0xDF;EA=BIT_TMP
1304      =2  #define clr_CKSWTF              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CKEN&=0xFE;EA=BIT_TMP
1305      =2  
1306      =2  /**** SCON    98H ****/
1307      =2  #define set_FE                  FE    = 1
1308      =2  #define set_SM1                 SM1   = 1
1309      =2  #define set_SM2                 SM2   = 1
1310      =2  #define set_REN                 REN   = 1
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 59  

1311      =2  #define set_TB8                 TB8   = 1
1312      =2  #define set_RB8                 RB8   = 1
1313      =2  #define set_TI                  TI    = 1
1314      =2  #define set_RI                  RI    = 1
1315      =2                                  
1316      =2  #define clr_FE                  FE    = 0
1317      =2  #define clr_SM1                 SM1   = 0
1318      =2  #define clr_SM2                 SM2   = 0
1319      =2  #define clr_REN                 REN   = 0
1320      =2  #define clr_TB8                 TB8   = 0
1321      =2  #define clr_RB8                 RB8   = 0
1322      =2  #define clr_TI                  TI    = 0
1323      =2  #define clr_RI                  RI    = 0
1324      =2  
1325      =2  /**** SBUF    99H ****/
1326      =2  /**** SBUF_1  9AH ****/
1327      =2  
1328      =2  /**** EIE    9BH ****/                      
1329      =2  #define set_ET2                 EIE|=0x80
1330      =2  #define set_ESPI                EIE|=0x40
1331      =2  #define set_EFB                 EIE|=0x20
1332      =2  #define set_EWDT                EIE|=0x10
1333      =2  #define set_EPWM                EIE|=0x08
1334      =2  #define set_ECAP                EIE|=0x04
1335      =2  #define set_EPI                 EIE|=0x02
1336      =2  #define set_EI2C                EIE|=0x01
1337      =2                                     
1338      =2  #define clr_ET2                 EIE&=0x7F
1339      =2  #define clr_ESPI                EIE&=0xBF
1340      =2  #define clr_EFB                 EIE&=0xDF
1341      =2  #define clr_EWDT                EIE&=0xEF
1342      =2  #define clr_EPWM                EIE&=0xF7
1343      =2  #define clr_ECAP                EIE&=0xFB
1344      =2  #define clr_EPI                 EIE&=0xFD
1345      =2  #define clr_EI2C                EIE&=0xFE
1346      =2  
1347      =2  /**** EIE1    9CH ****/                      
1348      =2  #define set_EWKT                EIE1|=0x04
1349      =2  #define set_ET3                 EIE1|=0x02
1350      =2  #define set_ES_1                EIE1|=0x01
1351      =2                                      
1352      =2  #define clr_EWKT                EIE1&=0xFB
1353      =2  #define clr_ET3                 EIE1&=0xFD
1354      =2  #define clr_ES_1                EIE1&=0xFE
1355      =2                              
1356      =2  /**** CHPCON    9DH ****  TA protect register ****/
1357      =2  #define set_SWRST               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON|=0x80;EA=BIT_TMP
1358      =2  #define set_IAPFF               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON|=0x40;EA=BIT_TMP
1359      =2  #define set_BS                  BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON|=0x02;EA=BIT_TMP
1360      =2  #define set_IAPEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON|=0x01;EA=BIT_TMP
1361      =2                                  
1362      =2  #define clr_SWRST               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON&=0x7F;EA=BIT_TMP
1363      =2  #define clr_IAPFF               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON&=0xBF;EA=BIT_TMP
1364      =2  #define clr_BS                  BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON&=0xFD;EA=BIT_TMP
1365      =2  #define clr_IAPEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;CHPCON&=0xFE;EA=BIT_TMP
1366      =2  
1367      =2  /**** P2    A0H ****/
1368      =2  
1369      =2  /**** AUXR1  A2H ****/
1370      =2  #define set_SWRF                AUXR1|=0x80
1371      =2  #define set_RSTPINF             AUXR1|=0x40
1372      =2  #define set_HARDF               AUXR1|=0x20
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 60  

1373      =2  #define set_GF2                 AUXR1|=0x08
1374      =2  #define set_UART0PX             AUXR1|=0x04
1375      =2  #define set_DPS                 AUXR1|=0x01
1376      =2                                       
1377      =2  #define clr_SWRF                AUXR1&=0x7F
1378      =2  #define clr_RSTPINF             AUXR1&=0xBF
1379      =2  #define clr_HARDF               AUXR1&=0xDF
1380      =2  #define clr_GF2                 AUXR1&=0xF7
1381      =2  #define clr_UART0PX             AUXR1&=0xFB
1382      =2  #define clr_DPS                 AUXR1&=0xFE
1383      =2  
1384      =2  /**** BODCON0  A3H ****  TA protect register ****/
1385      =2  #define set_BODEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x80;EA=BIT_TMP
1386      =2  #define set_BOV1                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x20;EA=BIT_TMP
1387      =2  #define set_BOV0                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x10;EA=BIT_TMP
1388      =2  #define set_BOF                 BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x08;EA=BIT_TMP
1389      =2  #define set_BORST               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x04;EA=BIT_TMP
1390      =2  #define set_BORF                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x02;EA=BIT_TMP
1391      =2  #define set_BOS                 BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0|=0x01;EA=BIT_TMP
1392      =2                                  
1393      =2  #define clr_BODEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0x7F;EA=BIT_TMP
1394      =2  #define clr_BOV2                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xBF;EA=BIT_TMP
1395      =2  #define clr_BOV1                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xDF;EA=BIT_TMP
1396      =2  #define clr_BOV0                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xEF;EA=BIT_TMP
1397      =2  #define clr_BOF                 BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xF7;EA=BIT_TMP
1398      =2  #define clr_BORST               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xFB;EA=BIT_TMP
1399      =2  #define clr_BORF                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xFD;EA=BIT_TMP
1400      =2  #define clr_BOS                 BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON0&=0xFE;EA=BIT_TMP
1401      =2  
1402      =2  /**** IAPTRG    A4H  ****  TA protect register ****/
1403      =2  #define set_IAPGO               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPTRG|=0x01;EA=BIT_TMP
1404      =2  
1405      =2  /**** IAPUEN    A5H **** TA protect register ****/
1406      =2  #define set_CFUEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN|=0x04;EA=BIT_TMP
1407      =2  #define set_LDUEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN|=0x02;EA=BIT_TMP
1408      =2  #define set_APUEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN|=0x01;EA=BIT_TMP
1409      =2                                  
1410      =2  #define clr_CFUEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN&=0xFB;EA=BIT_TMP
1411      =2  #define clr_LDUEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN&=0xFD;EA=BIT_TMP
1412      =2  #define clr_APUEN               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;IAPUEN&=0xFE;EA=BIT_TMP
1413      =2  
1414      =2  /**** IAPAL  A6H ****/
1415      =2  /**** IAPAH  A7H ****/
1416      =2  
1417      =2  /**** IE      A8H ****/
1418      =2  #define set_EA                  EA       = 1
1419      =2  #define set_EADC                EADC     = 1
1420      =2  #define set_EBOD                EBOD     = 1
1421      =2  #define set_ES                  ES       = 1
1422      =2  #define set_ET1                 ET1      = 1
1423      =2  #define set_EX1                 EX1      = 1
1424      =2  #define set_ET0                 ET0      = 1
1425      =2  #define set_EX0                 EX0      = 1
1426      =2                                  
1427      =2  #define clr_EA                  EA       = 0
1428      =2  #define clr_EADC                EADC     = 0
1429      =2  #define clr_EBOD                EBOD     = 0
1430      =2  #define clr_ES                  ES       = 0
1431      =2  #define clr_ET1                 ET1      = 0
1432      =2  #define clr_EX1                 EX1      = 0
1433      =2  #define clr_ET0                 ET0      = 0
1434      =2  #define clr_EX0                 EX0      = 0
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 61  

1435      =2  
1436      =2  /**** SADDR    A9H ****/
1437      =2  
1438      =2  /**** WDCON    AAH **** TA protect register ****/
1439      =2  #define set_WDTR                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x80;EA=BIT_TMP
1440      =2  #define set_WDCLR               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x40;EA=BIT_TMP
1441      =2  #define set_WDTF                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x20;EA=BIT_TMP
1442      =2  #define set_WIDPD               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x10;EA=BIT_TMP
1443      =2  #define set_WDTRF               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x08;EA=BIT_TMP
1444      =2  #define set_WPS2                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x04;EA=BIT_TMP
1445      =2  #define set_WPS1                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x02;EA=BIT_TMP
1446      =2  #define set_WPS0                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON|=0x01;EA=BIT_TMP
1447      =2                                  
1448      =2  #define clr_WDTR                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0x7F;EA=BIT_TMP
1449      =2  #define clr_WDCLR               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xBF;EA=BIT_TMP
1450      =2  #define clr_WDTF                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xDF;EA=BIT_TMP
1451      =2  #define clr_WDTRF               BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xF7;EA=BIT_TMP
1452      =2  #define clr_WPS2                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xFB;EA=BIT_TMP
1453      =2  #define clr_WPS1                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xFD;EA=BIT_TMP
1454      =2  #define clr_WPS0                BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;WDCON&=0xFE;EA=BIT_TMP
1455      =2  
1456      =2  /**** BODCON1 ABH **** TA protect register ****/
1457      =2  #define set_LPBOD1              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1|=0x04;EA=BIT_TMP
1458      =2  #define set_LPBOD0              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1|=0x02;EA=BIT_TMP
1459      =2  #define set_BODFLT              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1|=0x01;EA=BIT_TMP
1460      =2                                  
1461      =2  #define clr_LPBOD1              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1&=0xFB;EA=BIT_TMP
1462      =2  #define clr_LPBOD0              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1&=0xFD;EA=BIT_TMP
1463      =2  #define clr_BODFLT              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;BODCON1&=0xFE;EA=BIT_TMP
1464      =2  
1465      =2  /**** P3M1    ACH PAGE0 ****/
1466      =2  #define set_P3M1_0              clr_SFRS_SFRPAGE;P3M1|=0x01
1467      =2  #define clr_P3M1_0              clr_SFRS_SFRPAGE;P3M1&=0xFE
1468      =2  
1469      =2  /**** P3S    ACH PAGE1 ****/ 
1470      =2  #define set_P3S_0               set_SFRS_SFRPAGE;P3S|=0x01;clr_SFRS_SFRPAGE
1471      =2  #define clr_P3S_0               set_SFRS_SFRPAGE;P3S&=0xFE;clr_SFRS_SFRPAGE
1472      =2  
1473      =2  /**** P3M2    ADH PAGE0 ****/
1474      =2  #define set_P3M2_0              clr_SFRS_SFRPAGE;P3M2|=0x01
1475      =2  #define clr_P3M2_0              clr_SFRS_SFRPAGE;P3M2&=0xFE
1476      =2  
1477      =2  /**** P3SR    ADH PAGE1 ****/ 
1478      =2  #define set_P3SR_0              set_SFRS_SFRPAGE;P3SR|=0x01;clr_SFRS_SFRPAGE
1479      =2  #define clr_P3SR_0              set_SFRS_SFRPAGE;P3SR&=0xFE;clr_SFRS_SFRPAGE
1480      =2  
1481      =2  /**** IAPFD  AEH ****/
1482      =2  
1483      =2  /**** IAPCN  AFH ****/
1484      =2  #define set_FOEN                IAPN|=0x20
1485      =2  #define set_FCEN                IAPN|=0x10
1486      =2  #define set_FCTRL3              IAPN|=0x08
1487      =2  #define set_FCTRL2              IAPN|=0x04
1488      =2  #define set_FCTRL1              IAPN|=0x02
1489      =2  #define set_FCTRL0              IAPN|=0x01
1490      =2                                        
1491      =2  #define clr_FOEN                IAPN&=0xDF
1492      =2  #define clr_FCEN                IAPN&=0xEF
1493      =2  #define clr_FCTRL3              IAPN&=0xF7
1494      =2  #define clr_FCTRL2              IAPN&=0xFB
1495      =2  #define clr_FCTRL1              IAPN&=0xFD
1496      =2  #define clr_FCTRL0              IAPN&=0xFE
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 62  

1497      =2  
1498      =2  /**** P3    B0H ****/
1499      =2  #define set_P30                 P30= 1
1500      =2  #define clr_P30                 P30= 0
1501      =2  
1502      =2  /**** P0M1  B1H PAGE0 ****/
1503      =2  #define set_P0M1_7              clr_SFRS_SFRPAGE;P0M1|=0x80
1504      =2  #define set_P0M1_6              clr_SFRS_SFRPAGE;P0M1|=0x40
1505      =2  #define set_P0M1_5              clr_SFRS_SFRPAGE;P0M1|=0x20 
1506      =2  #define set_P0M1_4              clr_SFRS_SFRPAGE;P0M1|=0x10
1507      =2  #define set_P0M1_3              clr_SFRS_SFRPAGE;P0M1|=0x08
1508      =2  #define set_P0M1_2              clr_SFRS_SFRPAGE;P0M1|=0x04
1509      =2  #define set_P0M1_1              clr_SFRS_SFRPAGE;P0M1|=0x02
1510      =2  #define set_P0M1_0              clr_SFRS_SFRPAGE;P0M1|=0x01
1511      =2                                  
1512      =2  #define clr_P0M1_7              clr_SFRS_SFRPAGE;P0M1&=0x7F
1513      =2  #define clr_P0M1_6              clr_SFRS_SFRPAGE;P0M1&=0xBF
1514      =2  #define clr_P0M1_5              clr_SFRS_SFRPAGE;P0M1&=0xDF
1515      =2  #define clr_P0M1_4              clr_SFRS_SFRPAGE;P0M1&=0xEF
1516      =2  #define clr_P0M1_3              clr_SFRS_SFRPAGE;P0M1&=0xF7
1517      =2  #define clr_P0M1_2              clr_SFRS_SFRPAGE;P0M1&=0xFB
1518      =2  #define clr_P0M1_1              clr_SFRS_SFRPAGE;P0M1&=0xFD
1519      =2  #define clr_P0M1_0              clr_SFRS_SFRPAGE;P0M1&=0xFE
1520      =2  
1521      =2  /**** P0S  B2H PAGE1 ****/ 
1522      =2  #define set_P0S_7               set_SFRS_SFRPAGE;P0S|=0x80;clr_SFRS_SFRPAGE
1523      =2  #define set_P0S_6               set_SFRS_SFRPAGE;P0S|=0x40;clr_SFRS_SFRPAGE
1524      =2  #define set_P0S_5               set_SFRS_SFRPAGE;P0S|=0x20;clr_SFRS_SFRPAGE
1525      =2  #define set_P0S_4               set_SFRS_SFRPAGE;P0S|=0x10;clr_SFRS_SFRPAGE
1526      =2  #define set_P0S_3               set_SFRS_SFRPAGE;P0S|=0x08;clr_SFRS_SFRPAGE
1527      =2  #define set_P0S_2               set_SFRS_SFRPAGE;P0S|=0x04;clr_SFRS_SFRPAGE
1528      =2  #define set_P0S_1               set_SFRS_SFRPAGE;P0S|=0x02;clr_SFRS_SFRPAGE
1529      =2  #define set_P0S_0               set_SFRS_SFRPAGE;P0S|=0x01;clr_SFRS_SFRPAGE
1530      =2  
1531      =2  #define clr_P0S_7               set_SFRS_SFRPAGE;P0S&=0x7F;clr_SFRS_SFRPAGE
1532      =2  #define clr_P0S_6               set_SFRS_SFRPAGE;P0S&=0xBF;clr_SFRS_SFRPAGE
1533      =2  #define clr_P0S_5               set_SFRS_SFRPAGE;P0S&=0xDF;clr_SFRS_SFRPAGE
1534      =2  #define clr_P0S_4               set_SFRS_SFRPAGE;P0S&=0xEF;clr_SFRS_SFRPAGE
1535      =2  #define clr_P0S_3               set_SFRS_SFRPAGE;P0S&=0xF7;clr_SFRS_SFRPAGE
1536      =2  #define clr_P0S_2               set_SFRS_SFRPAGE;P0S&=0xFB;clr_SFRS_SFRPAGE
1537      =2  #define clr_P0S_1               set_SFRS_SFRPAGE;P0S&=0xFD;clr_SFRS_SFRPAGE
1538      =2  #define clr_P0S_0               set_SFRS_SFRPAGE;P0S&=0xFE;clr_SFRS_SFRPAGE
1539      =2  
1540      =2  /**** P0M2    B2H PAGE0 ****/
1541      =2  #define set_P0M2_7              clr_SFRS_SFRPAGE;P0M2|=0x80
1542      =2  #define set_P0M2_6              clr_SFRS_SFRPAGE;P0M2|=0x40
1543      =2  #define set_P0M2_5              clr_SFRS_SFRPAGE;P0M2|=0x20 
1544      =2  #define set_P0M2_4              clr_SFRS_SFRPAGE;P0M2|=0x10
1545      =2  #define set_P0M2_3              clr_SFRS_SFRPAGE;P0M2|=0x08
1546      =2  #define set_P0M2_2              clr_SFRS_SFRPAGE;P0M2|=0x04
1547      =2  #define set_P0M2_1              clr_SFRS_SFRPAGE;P0M2|=0x02
1548      =2  #define set_P0M2_0              clr_SFRS_SFRPAGE;P0M2|=0x01
1549      =2                                  
1550      =2  #define clr_P0M2_7              clr_SFRS_SFRPAGE;P0M2&=0x7F
1551      =2  #define clr_P0M2_6              clr_SFRS_SFRPAGE;P0M2&=0xBF
1552      =2  #define clr_P0M2_5              clr_SFRS_SFRPAGE;P0M2&=0xDF
1553      =2  #define clr_P0M2_4              clr_SFRS_SFRPAGE;P0M2&=0xEF
1554      =2  #define clr_P0M2_3              clr_SFRS_SFRPAGE;P0M2&=0xF7
1555      =2  #define clr_P0M2_2              clr_SFRS_SFRPAGE;P0M2&=0xFB
1556      =2  #define clr_P0M2_1              clr_SFRS_SFRPAGE;P0M2&=0xFD
1557      =2  #define clr_P0M2_0              clr_SFRS_SFRPAGE;P0M2&=0xFE
1558      =2  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 63  

1559      =2  /**** P0SR    B0H PAGE1 ****/ 
1560      =2  #define set_P0SR_7              set_SFRS_SFRPAGE;P0SR|=0x80;clr_SFRS_SFRPAGE
1561      =2  #define set_P0SR_6              set_SFRS_SFRPAGE;P0SR|=0x40;clr_SFRS_SFRPAGE
1562      =2  #define set_P0SR_5              set_SFRS_SFRPAGE;P0SR|=0x20;clr_SFRS_SFRPAGE
1563      =2  #define set_P0SR_4              set_SFRS_SFRPAGE;P0SR|=0x10;clr_SFRS_SFRPAGE
1564      =2  #define set_P0SR_3              set_SFRS_SFRPAGE;P0SR|=0x08;clr_SFRS_SFRPAGE
1565      =2  #define set_P0SR_2              set_SFRS_SFRPAGE;P0SR|=0x04;clr_SFRS_SFRPAGE
1566      =2  #define set_P0SR_1              set_SFRS_SFRPAGE;P0SR|=0x02;clr_SFRS_SFRPAGE
1567      =2  #define set_P0SR_0              set_SFRS_SFRPAGE;P0SR|=0x01;clr_SFRS_SFRPAGE
1568      =2  
1569      =2  #define clr_P0SR_7              set_SFRS_SFRPAGE;P0SR&=0x7F;clr_SFRS_SFRPAGE
1570      =2  #define clr_P0SR_6              set_SFRS_SFRPAGE;P0SR&=0xBF;clr_SFRS_SFRPAGE
1571      =2  #define clr_P0SR_5              set_SFRS_SFRPAGE;P0SR&=0xDF;clr_SFRS_SFRPAGE
1572      =2  #define clr_P0SR_4              set_SFRS_SFRPAGE;P0SR&=0xEF;clr_SFRS_SFRPAGE
1573      =2  #define clr_P0SR_3              set_SFRS_SFRPAGE;P0SR&=0xF7;clr_SFRS_SFRPAGE
1574      =2  #define clr_P0SR_2              set_SFRS_SFRPAGE;P0SR&=0xFB;clr_SFRS_SFRPAGE
1575      =2  #define clr_P0SR_1              set_SFRS_SFRPAGE;P0SR&=0xFD;clr_SFRS_SFRPAGE
1576      =2  #define clr_P0SR_0              set_SFRS_SFRPAGE;P0SR&=0xFE;clr_SFRS_SFRPAGE
1577      =2  
1578      =2  /**** P1M1  B3H PAGE0 ****/
1579      =2  #define set_P1M1_7              clr_SFRS_SFRPAGE;P1M1|=0x80
1580      =2  #define set_P1M1_6              clr_SFRS_SFRPAGE;P1M1|=0x40
1581      =2  #define set_P1M1_5              clr_SFRS_SFRPAGE;P1M1|=0x20 
1582      =2  #define set_P1M1_4              clr_SFRS_SFRPAGE;P1M1|=0x10
1583      =2  #define set_P1M1_3              clr_SFRS_SFRPAGE;P1M1|=0x08
1584      =2  #define set_P1M1_2              clr_SFRS_SFRPAGE;P1M1|=0x04
1585      =2  #define set_P1M1_1              clr_SFRS_SFRPAGE;P1M1|=0x02
1586      =2  #define set_P1M1_0              clr_SFRS_SFRPAGE;P1M1|=0x01
1587      =2                                  
1588      =2  #define clr_P1M1_7              clr_SFRS_SFRPAGE;P1M1&=0x7F
1589      =2  #define clr_P1M1_6              clr_SFRS_SFRPAGE;P1M1&=0xBF
1590      =2  #define clr_P1M1_5              clr_SFRS_SFRPAGE;P1M1&=0xDF
1591      =2  #define clr_P1M1_4              clr_SFRS_SFRPAGE;P1M1&=0xEF
1592      =2  #define clr_P1M1_3              clr_SFRS_SFRPAGE;P1M1&=0xF7
1593      =2  #define clr_P1M1_2              clr_SFRS_SFRPAGE;P1M1&=0xFB
1594      =2  #define clr_P1M1_1              clr_SFRS_SFRPAGE;P1M1&=0xFD
1595      =2  #define clr_P1M1_0              clr_SFRS_SFRPAGE;P1M1&=0xFE
1596      =2  
1597      =2  /**** P1S B3H PAGE1 ****/ 
1598      =2  #define set_P1S_7               set_SFRS_SFRPAGE;P1S|=0x80;clr_SFRS_SFRPAGE
1599      =2  #define set_P1S_6               set_SFRS_SFRPAGE;P1S|=0x40;clr_SFRS_SFRPAGE
1600      =2  #define set_P1S_5               set_SFRS_SFRPAGE;P1S|=0x20;clr_SFRS_SFRPAGE
1601      =2  #define set_P1S_4               set_SFRS_SFRPAGE;P1S|=0x10;clr_SFRS_SFRPAGE
1602      =2  #define set_P1S_3               set_SFRS_SFRPAGE;P1S|=0x08;clr_SFRS_SFRPAGE
1603      =2  #define set_P1S_2               set_SFRS_SFRPAGE;P1S|=0x04;clr_SFRS_SFRPAGE
1604      =2  #define set_P1S_1               set_SFRS_SFRPAGE;P1S|=0x02;clr_SFRS_SFRPAGE
1605      =2  #define set_P1S_0               set_SFRS_SFRPAGE;P1S|=0x01;clr_SFRS_SFRPAGE
1606      =2           
1607      =2  #define clr_P1S_7               set_SFRS_SFRPAGE;P1S&=0x7F;clr_SFRS_SFRPAGE
1608      =2  #define clr_P1S_6               set_SFRS_SFRPAGE;P1S&=0xBF;clr_SFRS_SFRPAGE
1609      =2  #define clr_P1S_5               set_SFRS_SFRPAGE;P1S&=0xDF;clr_SFRS_SFRPAGE
1610      =2  #define clr_P1S_4               set_SFRS_SFRPAGE;P1S&=0xEF;clr_SFRS_SFRPAGE
1611      =2  #define clr_P1S_3               set_SFRS_SFRPAGE;P1S&=0xF7;clr_SFRS_SFRPAGE
1612      =2  #define clr_P1S_2               set_SFRS_SFRPAGE;P1S&=0xFB;clr_SFRS_SFRPAGE
1613      =2  #define clr_P1S_1               set_SFRS_SFRPAGE;P1S&=0xFD;clr_SFRS_SFRPAGE
1614      =2  #define clr_P1S_0               set_SFRS_SFRPAGE;P1S&=0xFE;clr_SFRS_SFRPAGE
1615      =2  
1616      =2  /**** P1M2    B4H PAGE0 ****/                      
1617      =2  #define set_P12UP               clr_SFRS_SFRPAGE;P1M2|=0x04
1618      =2  #define set_P1M2_1              clr_SFRS_SFRPAGE;P1M2|=0x02
1619      =2  #define set_P1M2_0              clr_SFRS_SFRPAGE;P1M2|=0x01
1620      =2                                      
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 64  

1621      =2  #define clr_P12UP               clr_SFRS_SFRPAGE;P1M2&=0xFB
1622      =2  #define clr_P1M2_1              clr_SFRS_SFRPAGE;P1M2&=0xFD
1623      =2  #define clr_P1M2_0              clr_SFRS_SFRPAGE;P1M2&=0xFE
1624      =2  
1625      =2  /**** P1SR    B4H PAGE1 ****/ 
1626      =2  #define set_P1SR_7              set_SFRS_SFRPAGE;P1SR|=0x80;clr_SFRS_SFRPAGE
1627      =2  #define set_P1SR_6              set_SFRS_SFRPAGE;P1SR|=0x40;clr_SFRS_SFRPAGE
1628      =2  #define set_P1SR_5              set_SFRS_SFRPAGE;P1SR|=0x20;clr_SFRS_SFRPAGE
1629      =2  #define set_P1SR_4              set_SFRS_SFRPAGE;P1SR|=0x10;clr_SFRS_SFRPAGE
1630      =2  #define set_P1SR_3              set_SFRS_SFRPAGE;P1SR|=0x08;clr_SFRS_SFRPAGE
1631      =2  #define set_P1SR_2              set_SFRS_SFRPAGE;P1SR|=0x04;clr_SFRS_SFRPAGE
1632      =2  #define set_P1SR_1              set_SFRS_SFRPAGE;P1SR|=0x02;clr_SFRS_SFRPAGE
1633      =2  #define set_P1SR_0              set_SFRS_SFRPAGE;P1SR|=0x01;clr_SFRS_SFRPAGE
1634      =2                                                                              
1635      =2  #define clr_P1SR_7              set_SFRS_SFRPAGE;P1SR&=0x7F;clr_SFRS_SFRPAGE
1636      =2  #define clr_P1SR_6              set_SFRS_SFRPAGE;P1SR&=0xBF;clr_SFRS_SFRPAGE
1637      =2  #define clr_P1SR_5              set_SFRS_SFRPAGE;P1SR&=0xDF;clr_SFRS_SFRPAGE
1638      =2  #define clr_P1SR_4              set_SFRS_SFRPAGE;P1SR&=0xEF;clr_SFRS_SFRPAGE
1639      =2  #define clr_P1SR_3              set_SFRS_SFRPAGE;P1SR&=0xF7;clr_SFRS_SFRPAGE
1640      =2  #define clr_P1SR_2              set_SFRS_SFRPAGE;P1SR&=0xFB;clr_SFRS_SFRPAGE
1641      =2  #define clr_P1SR_1              set_SFRS_SFRPAGE;P1SR&=0xFD;clr_SFRS_SFRPAGE
1642      =2  #define clr_P1SR_0              set_SFRS_SFRPAGE;P1SR&=0xFE;clr_SFRS_SFRPAGE
1643      =2  
1644      =2  /**** P2S    B5H ****/
1645      =2  #define set_P2S_0               P2S|= 0x01
1646      =2  #define clr_P2S_0               P2S&= 0xFE
1647      =2  
1648      =2  /**** IPH    B7H PAGE0 ****/                    
1649      =2  #define set_PADCH               clr_SFRS_SFRPAGE;IPH|=0x40
1650      =2  #define set_PBODH               clr_SFRS_SFRPAGE;IPH|=0x20
1651      =2  #define set_PSH                 clr_SFRS_SFRPAGE;IPH|=0x10
1652      =2  #define set_PT1H                clr_SFRS_SFRPAGE;IPH|=0x08
1653      =2  #define set_PX11                clr_SFRS_SFRPAGE;IPH|=0x04
1654      =2  #define set_PT0H                clr_SFRS_SFRPAGE;IPH|=0x02
1655      =2  #define set_PX0H                clr_SFRS_SFRPAGE;IPH|=0x01
1656      =2                                      
1657      =2  #define clr_PADCH               clr_SFRS_SFRPAGE;IPH&=0xBF
1658      =2  #define clr_PBODH               clr_SFRS_SFRPAGE;IPH&=0xDF
1659      =2  #define clr_PSH                 clr_SFRS_SFRPAGE;IPH&=0xEF
1660      =2  #define clr_PT1H                clr_SFRS_SFRPAGE;IPH&=0xF7
1661      =2  #define clr_PX11                clr_SFRS_SFRPAGE;IPH&=0xFB
1662      =2  #define clr_PT0H                clr_SFRS_SFRPAGE;IPH&=0xFD
1663      =2  #define clr_PX0H                clr_SFRS_SFRPAGE;IPH&=0xFE
1664      =2  
1665      =2  /**** PWMINTC B7H PAGE1 ****/  
1666      =2  #define set_INTTYP1             set_SFRS_SFRPAGE;PWMINTC|=0x20;clr_SFRS_SFRPAGE
1667      =2  #define set_INTTYP0             set_SFRS_SFRPAGE;PWMINTC|=0x10;clr_SFRS_SFRPAGE
1668      =2  #define set_INTSEL2             set_SFRS_SFRPAGE;PWMINTC|=0x04;clr_SFRS_SFRPAGE
1669      =2  #define set_INTSEL1             set_SFRS_SFRPAGE;PWMINTC|=0x02;clr_SFRS_SFRPAGE
1670      =2  #define set_INTSEL0             set_SFRS_SFRPAGE;PWMINTC|=0x01;clr_SFRS_SFRPAGE
1671      =2  
1672      =2  #define clr_INTTYP1             set_SFRS_SFRPAGE;PWMINTC&=0xDF;clr_SFRS_SFRPAGE
1673      =2  #define clr_INTTYP0             set_SFRS_SFRPAGE;PWMINTC&=0xEF;clr_SFRS_SFRPAGE
1674      =2  #define clr_INTSEL2             set_SFRS_SFRPAGE;PWMINTC&=0xFB;clr_SFRS_SFRPAGE
1675      =2  #define clr_INTSEL1             set_SFRS_SFRPAGE;PWMINTC&=0xFD;clr_SFRS_SFRPAGE
1676      =2  #define clr_INTSEL0             set_SFRS_SFRPAGE;PWMINTC&=0xFE;clr_SFRS_SFRPAGE
1677      =2  
1678      =2  /**** IP    B8H ****/
1679      =2  #define set_PADC                PADC     = 1
1680      =2  #define set_PBOD                PBOD     = 1
1681      =2  #define set_PS                  PS       = 1
1682      =2  #define set_PT1                 PT1      = 1
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 65  

1683      =2  #define set_PX1                 PX1      = 1
1684      =2  #define set_PT0                 PT0      = 1
1685      =2  #define set_PX0                 PX0      = 1
1686      =2                                  
1687      =2  #define clr_PADC                PADC     = 0
1688      =2  #define clr_PBOD                PBOD     = 0
1689      =2  #define clr_PS                  PS       = 0
1690      =2  #define clr_PT1                 PT1      = 0
1691      =2  #define clr_PX1                 PX1      = 0
1692      =2  #define clr_PT0                 PT0      = 0
1693      =2  #define clr_PX0                 PX0      = 0
1694      =2  
1695      =2  /**** SADEN    B9H ****/
1696      =2  /**** SADEN_1  8AH ****/
1697      =2  /**** SADDR_1  BBH ****/
1698      =2  /**** I2DAT    BCH ****/
1699      =2  /**** I2STAT    BDH ****/
1700      =2  /**** I2CLK    BEH ****/
1701      =2  
1702      =2  /**** I2TOC    BFH ****/
1703      =2  #define set_I2TOCEN             I2TOC|=0x04
1704      =2  #define set_DIV                 I2TOC|=0x02
1705      =2  #define set_I2TOF               I2TOC|=0x01
1706      =2                                  
1707      =2  #define clr_I2TOCEN             I2TOC&=0xFB
1708      =2  #define clr_DIV                 I2TOC&=0xFD
1709      =2  #define clr_I2TOF               I2TOC&=0xFE
1710      =2  
1711      =2  /**** I2CON  C0H ****/ 
1712      =2  #define set_I2CEN               I2CEN    = 1
1713      =2  #define set_STA                 STA      = 1
1714      =2  #define set_STO                 STO      = 1
1715      =2  #define set_SI                  SI       = 1
1716      =2  #define set_AA                  AA       = 1
1717      =2  #define set_I2CPX               I2CPX    = 1
1718      =2  
1719      =2  #define clr_I2CEN               I2CEN    = 0
1720      =2  #define clr_STA                 STA      = 0
1721      =2  #define clr_STO                 STO      = 0
1722      =2  #define clr_SI                  SI       = 0
1723      =2  #define clr_AA                  AA       = 0
1724      =2  #define clr_I2CPX               I2CPX    = 0 
1725      =2  
1726      =2  /**** I2ADDR    C1H ****/
1727      =2  #define set_GC                  I2ADDR|=0x01
1728      =2  #define clr_GC                  I2ADDR&=0xFE
1729      =2  
1730      =2  /**** ADCRL    C2H ****/
1731      =2  /**** ADCRH    C3H ****/
1732      =2  
1733      =2  /**** T3CON    C4H  PAGE0 ****/                     
1734      =2  #define set_SMOD_1              clr_SFRS_SFRPAGE;T3CON|=0x80
1735      =2  #define set_SMOD0_1             clr_SFRS_SFRPAGE;T3CON|=0x40
1736      =2  #define set_BRCK                clr_SFRS_SFRPAGE;T3CON|=0x20
1737      =2  #define set_TF3                 clr_SFRS_SFRPAGE;T3CON|=0x10
1738      =2  #define set_TR3                 clr_SFRS_SFRPAGE;T3CON|=0x08
1739      =2  #define set_T3PS2               clr_SFRS_SFRPAGE;T3CON|=0x04
1740      =2  #define set_T3PS1               clr_SFRS_SFRPAGE;T3CON|=0x02
1741      =2  #define set_T3PS0               clr_SFRS_SFRPAGE;T3CON|=0x01
1742      =2                                       
1743      =2  #define clr_SMOD_1              clr_SFRS_SFRPAGE;T3CON&=0x7F
1744      =2  #define clr_SMOD0_1             clr_SFRS_SFRPAGE;T3CON&=0xBF
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 66  

1745      =2  #define clr_BRCK                clr_SFRS_SFRPAGE;T3CON&=0xDF
1746      =2  #define clr_TF3                 clr_SFRS_SFRPAGE;T3CON&=0xEF
1747      =2  #define clr_TR3                 clr_SFRS_SFRPAGE;T3CON&=0xF7
1748      =2  #define clr_T3PS2               clr_SFRS_SFRPAGE;T3CON&=0xFB
1749      =2  #define clr_T3PS1               clr_SFRS_SFRPAGE;T3CON&=0xFD
1750      =2  #define clr_T3PS0               clr_SFRS_SFRPAGE;T3CON&=0xFE
1751      =2  
1752      =2  /**** PWM4H  C4H  PAGE1 ****/ 
1753      =2  /**** RL3    C5H PAGE0 ****/
1754      =2  /**** PWM5H  C5H PAGE1 ****/ 
1755      =2  /**** RH3    C6H PAGE0 ****/
1756      =2  
1757      =2  /**** PIOCON1 C6H PAGE1 ****/ 
1758      =2  #define set_PIO15               set_SFRS_SFRPAGE;PIOCON1|=0x20;clr_SFRS_SFRPAGE
1759      =2  #define set_PIO13               set_SFRS_SFRPAGE;PIOCON1|=0x08;clr_SFRS_SFRPAGE
1760      =2  #define set_PIO12               set_SFRS_SFRPAGE;PIOCON1|=0x04;clr_SFRS_SFRPAGE
1761      =2  #define set_PIO11               set_SFRS_SFRPAGE;PIOCON1|=0x02;clr_SFRS_SFRPAGE
1762      =2  
1763      =2  #define clr_PIO15               set_SFRS_SFRPAGE;PIOCON1&=0xDF;clr_SFRS_SFRPAGE
1764      =2  #define clr_PIO13               set_SFRS_SFRPAGE;PIOCON1&=0xF7;clr_SFRS_SFRPAGE
1765      =2  #define clr_PIO12               set_SFRS_SFRPAGE;PIOCON1&=0xFB;clr_SFRS_SFRPAGE
1766      =2  #define clr_PIO11               set_SFRS_SFRPAGE;PIOCON1&=0xFD;clr_SFRS_SFRPAGE
1767      =2  
1768      =2  /**** T2CON  C8H ****/
1769      =2  #define set_TF2                 TF2      = 1
1770      =2  #define set_TR2                 TR2      = 1
1771      =2  #define set_CMRL2               CM_RL2   = 1
1772      =2                                  
1773      =2  #define clr_TF2                 TF2      = 0
1774      =2  #define clr_TR2                 TR2      = 0
1775      =2  #define clr_CMRL2               CM_RL2   = 0
1776      =2  
1777      =2  /**** T2MOD  C9H ****/                     
1778      =2  #define set_LDEN                T2MOD|=0x80
1779      =2  #define set_T2DIV2              T2MOD|=0x40
1780      =2  #define set_T2DIV1              T2MOD|=0x20
1781      =2  #define set_T2DIV0              T2MOD|=0x10
1782      =2  #define set_CAPCR               T2MOD|=0x08
1783      =2  #define set_CMPCR               T2MOD|=0x04
1784      =2  #define set_LDTS1               T2MOD|=0x02
1785      =2  #define set_LDTS0               T2MOD|=0x01
1786      =2                                       
1787      =2  #define clr_LDEN                T2MOD&=0x7F
1788      =2  #define clr_T2DIV2              T2MOD&=0xBF
1789      =2  #define clr_T2DIV1              T2MOD&=0xDF
1790      =2  #define clr_T2DIV0              T2MOD&=0xEF
1791      =2  #define clr_CAPCR               T2MOD&=0xF7
1792      =2  #define clr_CMPCR               T2MOD&=0xFB
1793      =2  #define clr_LDTS1               T2MOD&=0xFD
1794      =2  #define clr_LDTS0               T2MOD&=0xFE
1795      =2  
1796      =2  /**** RCMP2H CAH ****/
1797      =2  /**** RCMP2L CBH ****/
1798      =2  /**** TL2    CCH PAGE0 ****/
1799      =2  /**** PWM4L   CCH PAGE1 ****/ 
1800      =2  /**** TH2    CDH PAGE0 ****/
1801      =2  /**** PWM5L  CDH PAGE1 ****/ 
1802      =2  /**** ADCMPL  CEH ****/ 
1803      =2  /**** ADCMPH  CFH ****/
1804      =2  
1805      =2  /****  PSW     D0H ****/
1806      =2  #define set_CY                   CY  = 1
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 67  

1807      =2  #define set_AC                   AC  = 1
1808      =2  #define set_F0                   F0  = 1 
1809      =2  #define set_RS1                  RS1 = 1
1810      =2  #define set_RS0                  RS0 = 1
1811      =2  #define set_OV                   OV  = 1
1812      =2  #define set_P                    P   = 1
1813      =2                                   
1814      =2  #define clr_CY                   CY  = 0
1815      =2  #define clr_AC                   AC  = 0
1816      =2  #define clr_F0                   F0  = 0 
1817      =2  #define clr_RS1                  RS1 = 0
1818      =2  #define clr_RS0                  RS0 = 0
1819      =2  #define clr_OV                   OV  = 0
1820      =2  #define clr_P                    P   = 0
1821      =2  
1822      =2  /**** PWMPH    D1H ****/
1823      =2  /**** PWM0H    D2H ****/
1824      =2  /**** PWM1H    D3H ****/
1825      =2  /**** PWM2H    D4H ****/
1826      =2  /**** PWM3H    D5H  ****
1827      =2  
1828      =2  /**** PNP      D6H ****/
1829      =2  #define set_PNP5                 PNP|=0x20
1830      =2  #define set_PNP4                 PNP|=0x10
1831      =2  #define set_PNP3                 PNP|=0x08
1832      =2  #define set_PNP2                 PNP|=0x04
1833      =2  #define set_PNP1                 PNP|=0x02
1834      =2  #define set_PNP0                 PNP|=0x01
1835      =2                                   
1836      =2  #define clr_PNP5                 PNP&=0xDF
1837      =2  #define clr_PNP4                 PNP&=0xEF
1838      =2  #define clr_PNP3                 PNP&=0xF7
1839      =2  #define clr_PNP2                 PNP&=0xFB
1840      =2  #define clr_PNP1                 PNP&=0xFD
1841      =2  #define clr_PNP0                 PNP&=0xFE
1842      =2  
1843      =2  /**** FBD    D7H ****/
1844      =2  #define set_FBF                  FBD|=0x80
1845      =2  #define set_FBINLS               FBD|=0x40
1846      =2  #define set_FBD5                 FBD|=0x20
1847      =2  #define set_FBD4                 FBD|=0x10
1848      =2  #define set_FBD3                 FBD|=0x08
1849      =2  #define set_FBD2                 FBD|=0x04
1850      =2  #define set_FBD1                 FBD|=0x02
1851      =2  #define set_FBD0                 FBD|=0x01
1852      =2                                   
1853      =2  #define clr_FBF                  FBD&=0x7F
1854      =2  #define clr_FBINLS               FBD&=0xBF
1855      =2  #define clr_FBD5                 FBD&=0xDF
1856      =2  #define clr_FBD4                 FBD&=0xEF
1857      =2  #define clr_FBD3                 FBD&=0xF7
1858      =2  #define clr_FBD2                 FBD&=0xFB
1859      =2  #define clr_FBD1                 FBD&=0xFD
1860      =2  #define clr_FBD0                 FBD&=0xFE
1861      =2  
1862      =2  /**** PWMCON0      D8H ****/
1863      =2  #define set_PWMRUN               PWMRUN   = 1
1864      =2  #define set_LOAD                 LOAD     = 1
1865      =2  #define set_PWMF                 PWMF     = 1
1866      =2  #define set_CLRPWM               CLRPWM   = 1
1867      =2                                   
1868      =2  #define clr_PWMRUN               PWMRUN   = 0
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 68  

1869      =2  #define clr_LOAD                 LOAD     = 0
1870      =2  #define clr_PWMF                 PWMF     = 0 
1871      =2  #define clr_CLRPWM               CLRPWM   = 0
1872      =2  
1873      =2  /**** PWMPL    D9H ****/
1874      =2  /**** PWM0L    DAH ****/
1875      =2  /**** PWM1L    DBH ****/
1876      =2  /**** PWM2L    DCH ****/
1877      =2  /**** PWM3L    DDH ****/
1878      =2  
1879      =2  /**** PIOCON0  DEH ****/
1880      =2  #define set_PIO05                PIOCON0|=0x20
1881      =2  #define set_PIO04                PIOCON0|=0x10
1882      =2  #define set_PIO03                PIOCON0|=0x08
1883      =2  #define set_PIO02                PIOCON0|=0x04
1884      =2  #define set_PIO01                PIOCON0|=0x02
1885      =2  #define set_PIO00                PIOCON0|=0x01
1886      =2                                   
1887      =2  #define clr_PIO05                PIOCON0&=0xDF
1888      =2  #define clr_PIO04                PIOCON0&=0xEF
1889      =2  #define clr_PIO03                PIOCON0&=0xF7
1890      =2  #define clr_PIO02                PIOCON0&=0xFB
1891      =2  #define clr_PIO01                PIOCON0&=0xFD
1892      =2  #define clr_PIO00                PIOCON0&=0xFE
1893      =2  
1894      =2  /**** PWMCON1  DFH ****/
1895      =2  #define set_PWMMOD1              PWMCON1|=0x80
1896      =2  #define set_PWMMOD0              PWMCON1|=0x40
1897      =2  #define set_GP                   PWMCON1|=0x20
1898      =2  #define set_PWMTYP               PWMCON1|=0x10
1899      =2  #define set_FBINEN               PWMCON1|=0x08
1900      =2  #define set_PWMDIV2              PWMCON1|=0x04 
1901      =2  #define set_PWMDIV1              PWMCON1|=0x02
1902      =2  #define set_PWMDIV0              PWMCON1|=0x01
1903      =2                                        
1904      =2  #define clr_PWMMOD1              PWMCON1&=0x7F
1905      =2  #define clr_PWMMOD0              PWMCON1&=0xBF
1906      =2  #define clr_GP                   PWMCON1&=0xDF
1907      =2  #define clr_PWMTYP               PWMCON1&=0xEF
1908      =2  #define clr_FBINEN               PWMCON1&=0xF7
1909      =2  #define clr_PWMDIV2              PWMCON1&=0xFB 
1910      =2  #define clr_PWMDIV1              PWMCON1&=0xFD
1911      =2  #define clr_PWMDIV0              PWMCON1&=0xFE
1912      =2  
1913      =2  /**** ACC  E0H ****/
1914      =2  
1915      =2  /**** ADCCON1  E1H ****/
1916      =2  #define set_STADCPX              ADCCON1|=0x40
1917      =2  #define set_ETGTYP1              ADCCON1|=0x08
1918      =2  #define set_ETGTYP0              ADCCON1|=0x04
1919      =2  #define set_ADCEX                ADCCON1|=0x02
1920      =2  #define set_ADCEN                ADCCON1|=0x01
1921      =2                                   
1922      =2  #define clr_STADCPX              ADCCON1&=0xBF
1923      =2  #define clr_ETGTYP1              ADCCON1&=0xF7
1924      =2  #define clr_ETGTYP0              ADCCON1&=0xFB
1925      =2  #define clr_ADCEX                ADCCON1&=0xFD
1926      =2  #define clr_ADCEN                ADCCON1&=0xFE
1927      =2  
1928      =2  /**** ADCON2    E2H ****/
1929      =2  #define set_ADFBEN               ADCCON2|=0x80
1930      =2  #define set_ADCMPOP              ADCCON2|=0x40
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 69  

1931      =2  #define set_ADCMPEN              ADCCON2|=0x20
1932      =2  #define set_ADCMPO               ADCCON2|=0x10
1933      =2                                   
1934      =2  #define clr_ADFBEN               ADCCON2&=0x7F
1935      =2  #define clr_ADCMPOP              ADCCON2&=0xBF
1936      =2  #define clr_ADCMPEN              ADCCON2&=0xDF
1937      =2  #define clr_ADCMPO               ADCCON2&=0xEF
1938      =2  
1939      =2  /**** ADCDLY    E3H ****/
1940      =2  /**** C0L      E4H ****/
1941      =2  /**** C0H      E5H ****/
1942      =2  /**** C1L      E6H ****/
1943      =2  /**** C1H      E7H ****/
1944      =2  
1945      =2  /**** ADCCON0  EAH ****/
1946      =2  #define set_ADCF                 clr_SFRS_SFRPAGE;ADCF     = 1
1947      =2  #define set_ADCS                 clr_SFRS_SFRPAGE;ADCS     = 1
1948      =2  #define set_ETGSEL1              clr_SFRS_SFRPAGE;ETGSEL1  = 1
1949      =2  #define set_ETGSEL0              clr_SFRS_SFRPAGE;ETGSEL0  = 1
1950      =2  #define set_ADCHS3               clr_SFRS_SFRPAGE;ADCHS3   = 1
1951      =2  #define set_ADCHS2               clr_SFRS_SFRPAGE;ADCHS2   = 1
1952      =2  #define set_ADCHS1               clr_SFRS_SFRPAGE;ADCHS1   = 1
1953      =2  #define set_ADCHS0               clr_SFRS_SFRPAGE;ADCHS0   = 1
1954      =2                                   
1955      =2  #define clr_ADCF                 clr_SFRS_SFRPAGE;ADCF     = 0
1956      =2  #define clr_ADCS                 clr_SFRS_SFRPAGE;ADCS     = 0
1957      =2  #define clr_ETGSEL1              clr_SFRS_SFRPAGE;ETGSEL1  = 0
1958      =2  #define clr_ETGSEL0              clr_SFRS_SFRPAGE;ETGSEL0  = 0
1959      =2  #define clr_ADCHS3               clr_SFRS_SFRPAGE;ADCHS3   = 0
1960      =2  #define clr_ADCHS2               clr_SFRS_SFRPAGE;ADCHS2   = 0
1961      =2  #define clr_ADCHS1               clr_SFRS_SFRPAGE;ADCHS1   = 0
1962      =2  #define clr_ADCHS0               clr_SFRS_SFRPAGE;ADCHS0   = 0
1963      =2  
1964      =2  /**** PICON  E9H ****/
1965      =2  #define set_PIT67                PICON|=0x80
1966      =2  #define set_PIT45                PICON|=0x40
1967      =2  #define set_PIT3                 PICON|=0x20
1968      =2  #define set_PIT2                 PICON|=0x10
1969      =2  #define set_PIT1                 PICON|=0x08
1970      =2  #define set_PIT0                 PICON|=0x04
1971      =2  #define set_PIPS1                PICON|=0x02
1972      =2  #define set_PIPS0                PICON|=0x01
1973      =2                                        
1974      =2  #define clr_PIT67                PICON&=0x7F
1975      =2  #define clr_PIT45                PICON&=0xBF
1976      =2  #define clr_PIT3                 PICON&=0xDF
1977      =2  #define clr_PIT2                 PICON&=0xEF
1978      =2  #define clr_PIT1                 PICON&=0xF7
1979      =2  #define clr_PIT0                 PICON&=0xFB
1980      =2  #define clr_PIPS1                PICON&=0xFD
1981      =2  #define clr_PIPS0                PICON&=0xFE
1982      =2  
1983      =2  /**** PINEN    EAH ****/ 
1984      =2  #define set_PINEN7               PINEN|=0x80
1985      =2  #define set_PINEN6               PINEN|=0x40
1986      =2  #define set_PINEN5               PINEN|=0x20
1987      =2  #define set_PINEN4               PINEN|=0x10
1988      =2  #define set_PINEN3               PINEN|=0x08
1989      =2  #define set_PINEN2               PINEN|=0x04
1990      =2  #define set_PINEN1               PINEN|=0x02
1991      =2  #define set_PINEN0               PINEN|=0x01
1992      =2                                        
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 70  

1993      =2  #define clr_PINEN7               PINEN&=0x7F
1994      =2  #define clr_PINEN6               PINEN&=0xBF
1995      =2  #define clr_PINEN5               PINEN&=0xDF
1996      =2  #define clr_PINEN4               PINEN&=0xEF
1997      =2  #define clr_PINEN3               PINEN&=0xF7
1998      =2  #define clr_PINEN2               PINEN&=0xFB
1999      =2  #define clr_PINEN1               PINEN&=0xFD
2000      =2  #define clr_PINEN0               PINEN&=0xFE
2001      =2                              
2002      =2  /**** PIPEN     EBH ****/
2003      =2  #define set_PIPEN7               PIPEN|=0x80
2004      =2  #define set_PIPEN6               PIPEN|=0x40
2005      =2  #define set_PIPEN5               PIPEN|=0x20
2006      =2  #define set_PIPEN4               PIPEN|=0x10
2007      =2  #define set_PIPEN3               PIPEN|=0x08
2008      =2  #define set_PIPEN2               PIPEN|=0x04
2009      =2  #define set_PIPEN1               PIPEN|=0x02
2010      =2  #define set_PIPEN0               PIPEN|=0x01
2011      =2                                        
2012      =2  #define clr_PIPEN7               PIPEN&=0x7F
2013      =2  #define clr_PIPEN6               PIPEN&=0xBF
2014      =2  #define clr_PIPEN5               PIPEN&=0xDF
2015      =2  #define clr_PIPEN4               PIPEN&=0xEF
2016      =2  #define clr_PIPEN3               PIPEN&=0xF7
2017      =2  #define clr_PIPEN2               PIPEN&=0xFB
2018      =2  #define clr_PIPEN1               PIPEN&=0xFD
2019      =2  #define clr_PIPEN0               PIPEN&=0xFE
2020      =2     
2021      =2  /**** PIF  ECH ****/
2022      =2  #define set_PIF7                 PIF|=0x80
2023      =2  #define set_PIF6                 PIF|=0x40
2024      =2  #define set_PIF5                 PIF|=0x20
2025      =2  #define set_PIF4                 PIF|=0x10
2026      =2  #define set_PIF3                 PIF|=0x08
2027      =2  #define set_PIF2                 PIF|=0x04
2028      =2  #define set_PIF1                 PIF|=0x02
2029      =2  #define set_PIF0                 PIF|=0x01
2030      =2                                   
2031      =2  #define clr_PIF7                 PIF&=0x7F
2032      =2  #define clr_PIF6                 PIF&=0xBF
2033      =2  #define clr_PIF5                 PIF&=0xDF
2034      =2  #define clr_PIF4                 PIF&=0xEF
2035      =2  #define clr_PIF3                 PIF&=0xF7
2036      =2  #define clr_PIF2                 PIF&=0xFB
2037      =2  #define clr_PIF1                 PIF&=0xFD
2038      =2  #define clr_PIF0                 PIF&=0xFE
2039      =2  
2040      =2  /**** C2L  EDH ****/  
2041      =2  /**** C2H  EEH ****/
2042      =2  
2043      =2  /**** EIP  EFH ****/                      
2044      =2  #define set_PT2                  clr_SFRS_SFRPAGE;EIP|=0x80
2045      =2  #define set_PSPI                 clr_SFRS_SFRPAGE;EIP|=0x40
2046      =2  #define set_PFB                  clr_SFRS_SFRPAGE;EIP|=0x20
2047      =2  #define set_PWDT                 clr_SFRS_SFRPAGE;EIP|=0x10
2048      =2  #define set_PPWM                 clr_SFRS_SFRPAGE;EIP|=0x08
2049      =2  #define set_PCAP                 clr_SFRS_SFRPAGE;EIP|=0x04
2050      =2  #define set_PPI                  clr_SFRS_SFRPAGE;EIP|=0x02
2051      =2  #define set_PI2C                 clr_SFRS_SFRPAGE;EIP|=0x01
2052      =2                                      
2053      =2  #define clr_PT2                  clr_SFRS_SFRPAGE;EIP&=0x7F
2054      =2  #define clr_PSPI                 clr_SFRS_SFRPAGE;EIP&=0xBF
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 71  

2055      =2  #define clr_PFB                  clr_SFRS_SFRPAGE;EIP&=0xDF
2056      =2  #define clr_PWDT                 clr_SFRS_SFRPAGE;EIP&=0xEF
2057      =2  #define clr_PPWM                 clr_SFRS_SFRPAGE;EIP&=0xF7
2058      =2  #define clr_PCAP                 clr_SFRS_SFRPAGE;EIP&=0xFB
2059      =2  #define clr_PPI                  clr_SFRS_SFRPAGE;EIP&=0xFD
2060      =2  #define clr_PI2C                 clr_SFRS_SFRPAGE;EIP&=0xFE
2061      =2  
2062      =2  /**** B  F0H ****/
2063      =2  
2064      =2  /**** CAPCON3    F1H ****/
2065      =2  #define set_CAP13                CAPCON3|=0x80
2066      =2  #define set_CAP12                CAPCON3|=0x40
2067      =2  #define set_CAP11                CAPCON3|=0x20
2068      =2  #define set_CAP10                CAPCON3|=0x10
2069      =2  #define set_CAP03                CAPCON3|=0x08
2070      =2  #define set_CAP02                CAPCON3|=0x04
2071      =2  #define set_CAP01                CAPCON3|=0x02
2072      =2  #define set_CAP00                CAPCON3|=0x01
2073      =2                                   
2074      =2  #define clr_CAP13                CAPCON3&=0x7F
2075      =2  #define clr_CAP12                CAPCON3&=0xBF
2076      =2  #define clr_CAP11                CAPCON3&=0xDF
2077      =2  #define clr_CAP10                CAPCON3&=0xEF
2078      =2  #define clr_CAP03                CAPCON3&=0xF7
2079      =2  #define clr_CAP02                CAPCON3&=0xFB
2080      =2  #define clr_CAP01                CAPCON3&=0xFD
2081      =2  #define clr_CAP00                CAPCON3&=0xFE
2082      =2  
2083      =2  /**** CAPCON4    F2H ****/
2084      =2  #define set_CAP23                CAPCON4|=0x08
2085      =2  #define set_CAP22                CAPCON4|=0x04
2086      =2  #define set_CAP21                CAPCON4|=0x02
2087      =2  #define set_CAP20                CAPCON4|=0x01
2088      =2                                   
2089      =2  #define clr_CAP23                CAPCON4&=0xF7
2090      =2  #define clr_CAP22                CAPCON4&=0xFB
2091      =2  #define clr_CAP21                CAPCON4&=0xFD
2092      =2  #define clr_CAP20                CAPCON4&=0xFE
2093      =2  
2094      =2  /**** SPCR    F3H PAGE0 ****/
2095      =2  #define set_SSOE                 clr_SFRS_SFRPAGE;SPCR|=0x80
2096      =2  #define set_SPIEN                clr_SFRS_SFRPAGE;SPCR|=0x40
2097      =2  #define set_LSBFE                clr_SFRS_SFRPAGE;SPCR|=0x20
2098      =2  #define set_MSTR                 clr_SFRS_SFRPAGE;SPCR|=0x10
2099      =2  #define set_CPOL                 clr_SFRS_SFRPAGE;SPCR|=0x08
2100      =2  #define set_CPHA                 clr_SFRS_SFRPAGE;SPCR|=0x04
2101      =2  #define set_SPR1                 clr_SFRS_SFRPAGE;SPCR|=0x02
2102      =2  #define set_SPR0                 clr_SFRS_SFRPAGE;SPCR|=0x01
2103      =2                                   
2104      =2  #define clr_SSOE                 clr_SFRS_SFRPAGE;SPCR&=0x7F
2105      =2  #define clr_SPIEN                clr_SFRS_SFRPAGE;SPCR&=0xBF
2106      =2  #define clr_LSBFE                clr_SFRS_SFRPAGE;SPCR&=0xDF
2107      =2  #define clr_MSTR                 clr_SFRS_SFRPAGE;SPCR&=0xEF
2108      =2  #define clr_CPOL                 clr_SFRS_SFRPAGE;SPCR&=0xF7
2109      =2  #define clr_CPHA                 clr_SFRS_SFRPAGE;SPCR&=0xFB
2110      =2  #define clr_SPR1                 clr_SFRS_SFRPAGE;SPCR&=0xFD
2111      =2  #define clr_SPR0                 clr_SFRS_SFRPAGE;SPCR&=0xFE
2112      =2  
2113      =2  /**** SPCR2    F3H PAGE1 ****/ 
2114      =2  #define set_SPIS1                set_SFRS_SFRPAGE;SPCR2|=0x02;clr_SFRS_SFRPAGE
2115      =2  #define set_SPIS0                set_SFRS_SFRPAGE;SPCR2|=0x02;clr_SFRS_SFRPAGE
2116      =2  
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 72  

2117      =2  #define clr_SPIS1                set_SFRS_SFRPAGE;SPCR2&=0xFD;clr_SFRS_SFRPAGE
2118      =2  #define clr_SPIS0                set_SFRS_SFRPAGE;SPCR2&=0xFE;clr_SFRS_SFRPAGE
2119      =2  
2120      =2  /**** SPSR      F4H ****/
2121      =2  #define set_SPIF                 SPSR|=0x80
2122      =2  #define set_WCOL                 SPSR|=0x40
2123      =2  #define set_SPIOVF               SPSR|=0x20
2124      =2  #define set_MODF                 SPSR|=0x10
2125      =2  #define set_DISMODF              SPSR|=0x08
2126      =2                                       
2127      =2  #define clr_SPIF                 SPSR&=0x7F
2128      =2  #define clr_WCOL                 SPSR&=0xBF
2129      =2  #define clr_SPIOVF               SPSR&=0xDF
2130      =2  #define clr_MODF                 SPSR&=0xEF
2131      =2  #define clr_DISMODF              SPSR&=0xF7
2132      =2  
2133      =2  /**** SPDR    F5H ****/
2134      =2  
2135      =2  /**** AINDIDS  F6H PAGE0 ****/
2136      =2  #define set_P11DIDS              clr_SFRS_SFRPAGE;AINDIDS|=0x80
2137      =2  #define set_P03DIDS              clr_SFRS_SFRPAGE;AINDIDS|=0x40
2138      =2  #define set_P04DIDS              clr_SFRS_SFRPAGE;AINDIDS|=0x20
2139      =2  #define set_P05DIDS              clr_SFRS_SFRPAGE;AINDIDS|=0x10
2140      =2  #define set_P06DIDS              clr_SFRS_SFRPAGE;AINDIDS|=0x08
2141      =2  #define set_P07DIDS              clr_SFRS_SFRPAGE;AINDIDS|=0x04
2142      =2  #define set_P30DIDS              clr_SFRS_SFRPAGE;AINDIDS|=0x02
2143      =2  #define set_P17DIDS              clr_SFRS_SFRPAGE;AINDIDS|=0x01
2144      =2                                   
2145      =2  #define clr_P11DIDS              clr_SFRS_SFRPAGE;AINDIDS&=0x7F
2146      =2  #define clr_P03DIDS              clr_SFRS_SFRPAGE;AINDIDS&=0xBF
2147      =2  #define clr_P04DIDS              clr_SFRS_SFRPAGE;AINDIDS&=0xDF
2148      =2  #define clr_P05DIDS              clr_SFRS_SFRPAGE;AINDIDS&=0xEF
2149      =2  #define clr_P06DIDS              clr_SFRS_SFRPAGE;AINDIDS&=0xF7
2150      =2  #define clr_P07DIDS              clr_SFRS_SFRPAGE;AINDIDS&=0xFB
2151      =2  #define clr_P30DIDS              clr_SFRS_SFRPAGE;AINDIDS&=0xFD
2152      =2  #define clr_P17DIDS              clr_SFRS_SFRPAGE;AINDIDS&=0xFE
2153      =2  
2154      =2  /**** EIPH      F7H ****/
2155      =2  #define set_PT2H                 clr_SFRS_SFRPAGE;EIPH|=0x80
2156      =2  #define set_PSPIH                clr_SFRS_SFRPAGE;EIPH|=0x40
2157      =2  #define set_PFBH                 clr_SFRS_SFRPAGE;EIPH|=0x20
2158      =2  #define set_PWDTH                clr_SFRS_SFRPAGE;EIPH|=0x10
2159      =2  #define set_PPWMH                clr_SFRS_SFRPAGE;EIPH|=0x08
2160      =2  #define set_PCAPH                clr_SFRS_SFRPAGE;EIPH|=0x04
2161      =2  #define set_PPIH                 clr_SFRS_SFRPAGE;EIPH|=0x02
2162      =2  #define set_PI2CH                clr_SFRS_SFRPAGE;EIPH|=0x01
2163      =2                                       
2164      =2  #define clr_PT2H                 clr_SFRS_SFRPAGE;EIPH&=0x7F
2165      =2  #define clr_PSPIH                clr_SFRS_SFRPAGE;EIPH&=0xBF
2166      =2  #define clr_PFBH                 clr_SFRS_SFRPAGE;EIPH&=0xDF
2167      =2  #define clr_PWDTH                clr_SFRS_SFRPAGE;EIPH&=0xEF
2168      =2  #define clr_PPWMH                clr_SFRS_SFRPAGE;EIPH&=0xF7
2169      =2  #define clr_PCAPH                clr_SFRS_SFRPAGE;EIPH&=0xFB
2170      =2  #define clr_PPIH                 clr_SFRS_SFRPAGE;EIPH&=0xFD
2171      =2  #define clr_PI2CH                clr_SFRS_SFRPAGE;EIPH&=0xFE
2172      =2  
2173      =2  /**** SCON_1    F8H ****/
2174      =2  #define set_FE_1                 FE_1  = 1
2175      =2  #define set_SM1_1                SM1_1 = 1
2176      =2  #define set_SM2_1                SM2_1 = 1
2177      =2  #define set_REN_1                REN_1 = 1
2178      =2  #define set_TB8_1                TB8_1 = 1
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 73  

2179      =2  #define set_RB8_1                RB8_1 = 1
2180      =2  #define set_TI_1                 TI_1  = 1
2181      =2  #define set_RI_1                 RI_1  = 1
2182      =2                                   
2183      =2  #define clr_FE_1                 FE_1  = 0
2184      =2  #define clr_SM1_1                SM1_1 = 0
2185      =2  #define clr_SM2_1                SM2_1 = 0
2186      =2  #define clr_REN_1                REN_1 = 0
2187      =2  #define clr_TB8_1                TB8_1 = 0
2188      =2  #define clr_RB8_1                RB8_1 = 0
2189      =2  #define clr_TI_1                 TI_1  = 0
2190      =2  #define clr_RI_1                 RI_1  = 0
2191      =2  
2192      =2  /**** PDTEN    F9H ****TA Protect ***/
2193      =2  #define set_PDT45EN              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x04;EA=BIT_TMP
2194      =2  #define set_PDT23EN              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x02;EA=BIT_TMP
2195      =2  #define set_PDT01EN              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN|=0x01;EA=BIT_TMP
2196      =2                                  
2197      =2  #define clr_PDT45EN              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN&=0xFB;EA=BIT_TMP
2198      =2  #define clr_PDT23EN              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN&=0xFD;EA=BIT_TMP
2199      =2  #define clr_PDT01EN              BIT_TMP=EA;EA=0;TA=0xAA;TA=0x55;PDTEN&=0xFE;EA=BIT_TMP
2200      =2  
2201      =2  /**** PDTCNT    FAH ****/
2202      =2  
2203      =2  /**** PMEN     FBH ****/                   
2204      =2  #define set_PMEN5                PMEN|=0x20
2205      =2  #define set_PMEN4                PMEN|=0x10
2206      =2  #define set_PMEN3                PMEN|=0x08
2207      =2  #define set_PMEN2                PMEN|=0x04
2208      =2  #define set_PMEN1                PMEN|=0x02
2209      =2  #define set_PMEN0                PMEN|=0x01
2210      =2                                       
2211      =2  #define clr_PMEN5                PMEN&=0xDF
2212      =2  #define clr_PMEN4                PMEN&=0xEF
2213      =2  #define clr_PMEN3                PMEN&=0xF7
2214      =2  #define clr_PMEN2                PMEN&=0xFB
2215      =2  #define clr_PMEN1                PMEN&=0xFD
2216      =2  #define clr_PMEN0                PMEN&=0xFE
2217      =2                              
2218      =2  /**** PMD    FCH ****/                       
2219      =2  #define set_PMD7                 PMD|=0x80
2220      =2  #define set_PMD6                 PMD|=0x40
2221      =2  #define set_PMD5                 PMD|=0x20
2222      =2  #define set_PMD4                 PMD|=0x10
2223      =2  #define set_PMD3                 PMD|=0x08
2224      =2  #define set_PMD2                 PMD|=0x04
2225      =2  #define set_PMD1                 PMD|=0x02
2226      =2  #define set_PMD0                 PMD|=0x01
2227      =2                                      
2228      =2  #define clr_PMD7                 PMD&=0x7F
2229      =2  #define clr_PMD6                 PMD&=0xBF
2230      =2  #define clr_PMD5                 PMD&=0xDF
2231      =2  #define clr_PMD4                 PMD&=0xEF
2232      =2  #define clr_PMD3                 PMD&=0xF7
2233      =2  #define clr_PMD2                 PMD&=0xFB
2234      =2  #define clr_PMD1                 PMD&=0xFD
2235      =2  #define clr_PMD0                 PMD&=0xFE
2236      =2  
2237      =2  /****  PORDIS   FDH PAGE0 ****/
2238      =2  /****  EIP1     FEH PAGE0 ****/                     
2239      =2  #define set_PWKT                 clr_SFRS_SFRPAGE;EIP1|=0x04
2240      =2  #define set_PT3                  clr_SFRS_SFRPAGE;EIP1|=0x02
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 74  

2241      =2  #define set_PS_1                 clr_SFRS_SFRPAGE;EIP1|=0x01
2242      =2                                       
2243      =2  #define clr_PWKT                 clr_SFRS_SFRPAGE;EIP1&=0xFB
2244      =2  #define clr_PT3                  clr_SFRS_SFRPAGE;EIP1&=0xFD
2245      =2  #define clr_PS_1                 clr_SFRS_SFRPAGE;EIP1&=0xFE
2246      =2                                   
2247      =2  /**** EIPH1    FFH PAGE0 ****/                
2248      =2  #define set_PWKTH                clr_SFRS_SFRPAGE;EIPH1|=0x04
2249      =2  #define set_PT3H                 clr_SFRS_SFRPAGE;EIPH1|=0x02
2250      =2  #define set_PSH_1                clr_SFRS_SFRPAGE;EIPH1|=0x01
2251      =2                                        
2252      =2  #define clr_PWKTH                clr_SFRS_SFRPAGE;EIPH1&=0xFB
2253      =2  #define clr_PT3H                 clr_SFRS_SFRPAGE;EIPH1&=0xFD
2254      =2  #define clr_PSH_1                clr_SFRS_SFRPAGE;EIPH1&=0xFE
  17      =1  
  18      =1  
  19      =1  sfr P0          = 0x80;
  20      =1  sfr SP          = 0x81;
  21      =1  sfr DPL          = 0x82;
  22      =1  sfr DPH          = 0x83;
  23      =1  sfr RCTRIM0      = 0x84;
  24      =1  sfr RCTRIM1      = 0x85;  
  25      =1  sfr RWK         = 0x86;
  26      =1  sfr PCON        = 0x87;
  27      =1  
  28      =1  sfr TCON        = 0x88;
  29      =1  sfr TMOD        = 0x89;
  30      =1  sfr TL0         = 0x8A;
  31      =1  sfr TL1         = 0x8B;
  32      =1  sfr TH0         = 0x8C;
  33      =1  sfr TH1         = 0x8D;
  34      =1  sfr CKCON       = 0x8E;
  35      =1  sfr WKCON       = 0x8F;
  36      =1  
  37      =1  sfr P1          = 0x90;
  38      =1  sfr SFRS        = 0x91; //TA Protection
  39      =1  sfr CAPCON0     = 0x92;
  40      =1  sfr CAPCON1     = 0x93;
  41      =1  sfr CAPCON2     = 0x94;
  42      =1  sfr CKDIV       = 0x95;
  43      =1  sfr CKSWT       = 0x96; //TA Protection
  44      =1  sfr CKEN        = 0x97; //TA Protection
  45      =1  
  46      =1  sfr SCON        = 0x98;
  47      =1  sfr SBUF        = 0x99;
  48      =1  sfr SBUF_1      = 0x9A;
  49      =1  sfr EIE         = 0x9B;
  50      =1  sfr EIE1        = 0x9C;
  51      =1  sfr CHPCON      = 0x9F; //TA Protection
  52      =1  
  53      =1  sfr P2          = 0xA0;
  54      =1  sfr AUXR1       = 0xA2;
  55      =1  sfr BODCON0     = 0xA3; //TA Protection
  56      =1  sfr IAPTRG      = 0xA4; //TA Protection
  57      =1  sfr IAPUEN      = 0xA5;  //TA Protection
  58      =1  sfr IAPAL       = 0xA6;
  59      =1  sfr IAPAH       = 0xA7;
  60      =1  
  61      =1  sfr IE          = 0xA8;
  62      =1  sfr SADDR       = 0xA9;
  63      =1  sfr WDCON       = 0xAA; //TA Protection
  64      =1  sfr BODCON1     = 0xAB; //TA Protection
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 75  

  65      =1  sfr P3M1        = 0xAC;
  66      =1  sfr P3S         = 0xAC; //Page1
  67      =1  sfr P3M2        = 0xAD;
  68      =1  sfr P3SR        = 0xAD; //Page1
  69      =1  sfr IAPFD       = 0xAE;
  70      =1  sfr IAPCN       = 0xAF;
  71      =1  
  72      =1  sfr P3          = 0xB0;
  73      =1  sfr P0M1        = 0xB1;
  74      =1  sfr P0S         = 0xB1; //Page1
  75      =1  sfr P0M2        = 0xB2;
  76      =1  sfr P0SR        = 0xB2; //Page1
  77      =1  sfr P1M1        = 0xB3;
  78      =1  sfr P1S         = 0xB3; //Page1
  79      =1  sfr P1M2        = 0xB4;
  80      =1  sfr P1SR        = 0xB4; //Page1
  81      =1  sfr P2S         = 0xB5; 
  82      =1  sfr IPH         = 0xB7;
  83      =1  sfr PWMINTC      = 0xB7;  //Page1
  84      =1  
  85      =1  sfr IP          = 0xB8;
  86      =1  sfr SADEN       = 0xB9;
  87      =1  sfr SADEN_1     = 0xBA;
  88      =1  sfr SADDR_1     = 0xBB;
  89      =1  sfr I2DAT       = 0xBC;
  90      =1  sfr I2STAT      = 0xBD;
  91      =1  sfr I2CLK       = 0xBE;
  92      =1  sfr I2TOC       = 0xBF;
  93      =1  
  94      =1  sfr I2CON       = 0xC0;
  95      =1  sfr I2ADDR      = 0xC1;
  96      =1  sfr ADCRL       = 0xC2;
  97      =1  sfr ADCRH       = 0xC3;
  98      =1  sfr T3CON       = 0xC4;
  99      =1  sfr PWM4H       = 0xC4; //Page1
 100      =1  sfr RL3         = 0xC5;
 101      =1  sfr PWM5H       = 0xC5;  //Page1
 102      =1  sfr RH3         = 0xC6;
 103      =1  sfr PIOCON1     = 0xC6; //Page1
 104      =1  sfr TA          = 0xC7;
 105      =1  
 106      =1  sfr T2CON       = 0xC8;
 107      =1  sfr T2MOD       = 0xC9;
 108      =1  sfr RCMP2L      = 0xCA;
 109      =1  sfr RCMP2H      = 0xCB;
 110      =1  sfr TL2         = 0xCC; 
 111      =1  sfr PWM4L       = 0xCC; //Page1
 112      =1  sfr TH2         = 0xCD;
 113      =1  sfr PWM5L       = 0xCD; //Page1
 114      =1  sfr ADCMPL      = 0xCE;
 115      =1  sfr ADCMPH      = 0xCF;
 116      =1  
 117      =1  sfr PSW         = 0xD0;
 118      =1  sfr PWMPH       = 0xD1;
 119      =1  sfr PWM0H        = 0xD2;
 120      =1  sfr PWM1H        = 0xD3;
 121      =1  sfr PWM2H        = 0xD4;
 122      =1  sfr PWM3H        = 0xD5;
 123      =1  sfr PNP          = 0xD6;
 124      =1  sfr FBD          = 0xD7;
 125      =1  
 126      =1  sfr PWMCON0      = 0xD8;
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 76  

 127      =1  sfr PWMPL       = 0xD9;
 128      =1  sfr PWM0L        = 0xDA;
 129      =1  sfr PWM1L        = 0xDB;
 130      =1  sfr PWM2L        = 0xDC;
 131      =1  sfr PWM3L        = 0xDD;
 132      =1  sfr PIOCON0      = 0xDE;
 133      =1  sfr PWMCON1     = 0xDF;
 134      =1  
 135      =1  sfr ACC         = 0xE0;
 136      =1  sfr ADCCON1     = 0xE1;
 137      =1  sfr ADCCON2     = 0xE2;
 138      =1  sfr ADCDLY      = 0xE3;
 139      =1  sfr C0L         = 0xE4;
 140      =1  sfr C0H         = 0xE5;
 141      =1  sfr C1L         = 0xE6;
 142      =1  sfr C1H         = 0xE7;
 143      =1  
 144      =1  sfr ADCCON0     = 0xE8;
 145      =1  sfr PICON       = 0xE9;
 146      =1  sfr PINEN       = 0xEA;
 147      =1  sfr PIPEN       = 0xEB;
 148      =1  sfr PIF         = 0xEC;
 149      =1  sfr C2L         = 0xED;
 150      =1  sfr C2H         = 0xEE;
 151      =1  sfr EIP         = 0xEF;
 152      =1  
 153      =1  sfr B           = 0xF0;
 154      =1  sfr CAPCON3      = 0xF1;
 155      =1  sfr CAPCON4      = 0xF2;
 156      =1  sfr SPCR        = 0xF3;
 157      =1  sfr SPCR2        = 0xF3; //Page1
 158      =1  sfr SPSR        = 0xF4;
 159      =1  sfr SPDR        = 0xF5;
 160      =1  sfr AINDIDS      = 0xF6;
 161      =1  sfr EIPH        = 0xF7;
 162      =1  
 163      =1  sfr SCON_1      = 0xF8;
 164      =1  sfr PDTEN       = 0xF9; //TA Protection
 165      =1  sfr PDTCNT      = 0xFA; //TA Protection
 166      =1  sfr PMEN        = 0xFB;
 167      =1  sfr PMD         = 0xFC;
 168      =1  sfr EIP1        = 0xFE;
 169      =1  sfr EIPH1       = 0xFF;
 170      =1  
 171      =1  /*  BIT Registers  */
 172      =1  /*  SCON_1  */
 173      =1  sbit SM0_1      = SCON_1^7;
 174      =1  sbit FE_1       = SCON_1^7; 
 175      =1  sbit SM1_1      = SCON_1^6; 
 176      =1  sbit SM2_1      = SCON_1^5; 
 177      =1  sbit REN_1      = SCON_1^4; 
 178      =1  sbit TB8_1      = SCON_1^3; 
 179      =1  sbit RB8_1      = SCON_1^2; 
 180      =1  sbit TI_1       = SCON_1^1; 
 181      =1  sbit RI_1       = SCON_1^0; 
 182      =1  
 183      =1  /*  ADCCON0  */
 184      =1  sbit ADCF       = ADCCON0^7;
 185      =1  sbit ADCS       = ADCCON0^6;
 186      =1  sbit ETGSEL1    = ADCCON0^5;
 187      =1  sbit ETGSEL0    = ADCCON0^4;
 188      =1  sbit ADCHS3     = ADCCON0^3;
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 77  

 189      =1  sbit ADCHS2     = ADCCON0^2;
 190      =1  sbit ADCHS1     = ADCCON0^1;
 191      =1  sbit ADCHS0     = ADCCON0^0;
 192      =1  
 193      =1  /*  PWMCON0  */
 194      =1  sbit PWMRUN     = PWMCON0^7;
 195      =1  sbit LOAD       = PWMCON0^6;
 196      =1  sbit PWMF       = PWMCON0^5;
 197      =1  sbit CLRPWM     = PWMCON0^4;
 198      =1  
 199      =1  
 200      =1  /*  PSW */
 201      =1  sbit CY         = PSW^7;
 202      =1  sbit AC         = PSW^6;
 203      =1  sbit F0         = PSW^5;
 204      =1  sbit RS1        = PSW^4;
 205      =1  sbit RS0        = PSW^3;
 206      =1  sbit OV         = PSW^2;
 207      =1  sbit P          = PSW^0;
 208      =1  
 209      =1  /*  T2CON  */
 210      =1  sbit TF2        = T2CON^7;
 211      =1  sbit TR2        = T2CON^2;
 212      =1  sbit CM_RL2     = T2CON^0;
 213      =1   
 214      =1  /*  I2CON  */
 215      =1  sbit I2CEN      = I2CON^6;
 216      =1  sbit STA        = I2CON^5;
 217      =1  sbit STO        = I2CON^4;
 218      =1  sbit SI         = I2CON^3;
 219      =1  sbit AA         = I2CON^2;
 220      =1  sbit I2CPX  = I2CON^0;
 221      =1  
 222      =1  /*  IP  */  
 223      =1  sbit PADC       = IP^6;
 224      =1  sbit PBOD       = IP^5;
 225      =1  sbit PS         = IP^4;
 226      =1  sbit PT1        = IP^3;
 227      =1  sbit PX1        = IP^2;
 228      =1  sbit PT0        = IP^1;
 229      =1  sbit PX0        = IP^0;
 230      =1  
 231      =1  /*  P3  */  
 232      =1  sbit P30    = P3^0;
 233      =1  
 234      =1  
 235      =1  /*  IE  */
 236      =1  sbit EA         = IE^7;
 237      =1  sbit EADC       = IE^6;
 238      =1  sbit EBOD       = IE^5;
 239      =1  sbit ES         = IE^4;
 240      =1  sbit ET1        = IE^3;
 241      =1  sbit EX1        = IE^2;
 242      =1  sbit ET0        = IE^1;
 243      =1  sbit EX0        = IE^0;
 244      =1  
 245      =1  /*  P2  */ 
 246      =1  sbit P20        = P2^0;
 247      =1  
 248      =1  /*  SCON  */
 249      =1  sbit SM0        = SCON^7;
 250      =1  sbit FE         = SCON^7; 
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 78  

 251      =1  sbit SM1        = SCON^6; 
 252      =1  sbit SM2        = SCON^5; 
 253      =1  sbit REN        = SCON^4; 
 254      =1  sbit TB8        = SCON^3; 
 255      =1  sbit RB8        = SCON^2; 
 256      =1  sbit TI         = SCON^1; 
 257      =1  sbit RI         = SCON^0; 
 258      =1  
 259      =1  /*  P1  */     
 260      =1  sbit P17  = P1^7;
 261      =1  sbit P16  = P1^6;
 262      =1  sbit TXD_1  = P1^6; 
 263      =1  sbit P15  = P1^5;
 264      =1  sbit P14  = P1^4;
 265      =1  sbit SDA  = P1^4;    
 266      =1  sbit P13  = P1^3;
 267      =1  sbit SCL  = P1^3;  
 268      =1  sbit P12        = P1^2; 
 269      =1  sbit P11        = P1^1;
 270      =1  sbit P10        = P1^0;
 271      =1  
 272      =1  /*  TCON  */
 273      =1  sbit TF1        = TCON^7;
 274      =1  sbit TR1        = TCON^6;
 275      =1  sbit TF0        = TCON^5;
 276      =1  sbit TR0        = TCON^4;
 277      =1  sbit IE1        = TCON^3;
 278      =1  sbit IT1        = TCON^2;
 279      =1  sbit IE0        = TCON^1;
 280      =1  sbit IT0        = TCON^0;
 281      =1  
 282      =1  /*  P0  */  
 283      =1  
 284      =1  sbit P07        = P0^7;
 285      =1  sbit RXD        = P0^7;
 286      =1  sbit P06        = P0^6;
 287      =1  sbit TXD        = P0^6;
 288      =1  sbit P05        = P0^5;
 289      =1  sbit P04        = P0^4;
 290      =1  sbit STADC        = P0^4;
 291      =1  sbit P03        = P0^3;
 292      =1  sbit P02        = P0^2;
 293      =1  sbit RXD_1        = P0^2;
 294      =1  sbit P01        = P0^1;
 295      =1  sbit MISO        = P0^1;
 296      =1  sbit P00        = P0^0;
 297      =1  sbit MOSI        = P0^0;
 298      =1  
 299      =1  
 300      =1  
 301      =1  
 302      =1  
 303      =1  
 304      =1  
 305      =1  
 306      =1  
 307      =1  
 308      =1  
 309      =1  
   3          
   4          
   5          void SPI_Initial(void)
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 79  

   6          {      
   7   1          P15_QUASI_MODE;                                  // P15 (SS) Quasi mode
   8   1          P10_QUASI_MODE;                                  // P10 (SPCLK) Quasi mode
   9   1          P00_QUASI_MODE;                                  // P00 (MOSI) Quasi mode
  10   1          P01_QUASI_MODE;                                  // P01 (MISO) Quasi mode                             
             -   // P01 (MISO) Quasi mode
  11   1          
  12   1          set_SPSR_DISMODF;                                // SS General purpose I/O ( No Mode Fault ) 
  13   1          clr_SPCR_SSOE;
  14   1         
  15   1          clr_SPCR_LSBFE;                                  // MSB first
  16   1      
  17   1          clr_SPCR_CPOL;                                   // The SPI clock is low in idle mode
  18   1          clr_SPCR_CPHA;                                   // The data is sample on the second edge of SPI clock
             - 
  19   1          
  20   1          set_SPCR_MSTR;                                   // SPI in Master mode 
  21   1          SPICLK_FSYS_DIV2;                                    // Select SPI clock 
  22   1          set_SPCR_SPIEN;                                  // Enable SPI function 
  23   1          clr_SPSR_SPIF;
  24   1      }
  25          
  26          void SPI_Tx(unsigned char Data)
  27          { 
  28   1         SPDR = Data;
  29   1         while(!(SPSR & 0x80));
  30   1         clr_SPSR_SPIF;
  31   1      }
  32          
  33          unsigned char SPI_Rx(unsigned char u8SpiWB){
  34   1          unsigned char u8SpiRB;
  35   1          SPDR = u8SpiWB;
  36   1          while(!(SPSR&0x80));
  37   1          u8SpiRB = SPDR;
  38   1          clr_SPSR_SPIF;
  39   1          return u8SpiRB;
  40   1      }
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 80  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION SPI_Initial (BEGIN)
                                           ; SOURCE LINE # 5
                                           ; SOURCE LINE # 6
                                           ; SOURCE LINE # 7
0000 A2AF              MOV     C,EA
0002 9200        E     MOV     BIT_TMP,C
0004 C2AF              CLR     EA
0006 75C7AA            MOV     TA,#0AAH
0009 75C755            MOV     TA,#055H
000C E4                CLR     A
000D F591              MOV     SFRS,A
000F A200        E     MOV     C,BIT_TMP
0011 92AF              MOV     EA,C
0013 53B3DF            ANL     P1M1,#0DFH
0016 53B4DF            ANL     P1M2,#0DFH
                                           ; SOURCE LINE # 8
0019 A2AF              MOV     C,EA
001B 9200        E     MOV     BIT_TMP,C
001D C2AF              CLR     EA
001F 75C7AA            MOV     TA,#0AAH
0022 75C755            MOV     TA,#055H
0025 F591              MOV     SFRS,A
0027 A200        E     MOV     C,BIT_TMP
0029 92AF              MOV     EA,C
002B 53B3FE            ANL     P1M1,#0FEH
002E 53B4FE            ANL     P1M2,#0FEH
                                           ; SOURCE LINE # 9
0031 A2AF              MOV     C,EA
0033 9200        E     MOV     BIT_TMP,C
0035 C2AF              CLR     EA
0037 75C7AA            MOV     TA,#0AAH
003A 75C755            MOV     TA,#055H
003D F591              MOV     SFRS,A
003F A200        E     MOV     C,BIT_TMP
0041 92AF              MOV     EA,C
0043 53B1FE            ANL     P0M1,#0FEH
0046 53B2FE            ANL     P0M2,#0FEH
                                           ; SOURCE LINE # 10
0049 A2AF              MOV     C,EA
004B 9200        E     MOV     BIT_TMP,C
004D C2AF              CLR     EA
004F 75C7AA            MOV     TA,#0AAH
0052 75C755            MOV     TA,#055H
0055 F591              MOV     SFRS,A
0057 A200        E     MOV     C,BIT_TMP
0059 92AF              MOV     EA,C
005B 53B1FD            ANL     P0M1,#0FDH
005E 53B2FD            ANL     P0M2,#0FDH
                                           ; SOURCE LINE # 12
0061 43F408            ORL     SPSR,#08H
                                           ; SOURCE LINE # 13
0064 A2AF              MOV     C,EA
0066 9200        E     MOV     BIT_TMP,C
0068 C2AF              CLR     EA
006A 75C7AA            MOV     TA,#0AAH
006D 75C755            MOV     TA,#055H
0070 F591              MOV     SFRS,A
0072 A200        E     MOV     C,BIT_TMP
0074 92AF              MOV     EA,C
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 81  

0076 53F37F            ANL     SPCR,#07FH
                                           ; SOURCE LINE # 15
0079 A2AF              MOV     C,EA
007B 9200        E     MOV     BIT_TMP,C
007D C2AF              CLR     EA
007F 75C7AA            MOV     TA,#0AAH
0082 75C755            MOV     TA,#055H
0085 F591              MOV     SFRS,A
0087 A200        E     MOV     C,BIT_TMP
0089 92AF              MOV     EA,C
008B 53F3DF            ANL     SPCR,#0DFH
                                           ; SOURCE LINE # 17
008E A2AF              MOV     C,EA
0090 9200        E     MOV     BIT_TMP,C
0092 C2AF              CLR     EA
0094 75C7AA            MOV     TA,#0AAH
0097 75C755            MOV     TA,#055H
009A F591              MOV     SFRS,A
009C A200        E     MOV     C,BIT_TMP
009E 92AF              MOV     EA,C
00A0 53F3F7            ANL     SPCR,#0F7H
                                           ; SOURCE LINE # 18
00A3 A2AF              MOV     C,EA
00A5 9200        E     MOV     BIT_TMP,C
00A7 C2AF              CLR     EA
00A9 75C7AA            MOV     TA,#0AAH
00AC 75C755            MOV     TA,#055H
00AF F591              MOV     SFRS,A
00B1 A200        E     MOV     C,BIT_TMP
00B3 92AF              MOV     EA,C
00B5 53F3FB            ANL     SPCR,#0FBH
                                           ; SOURCE LINE # 20
00B8 A2AF              MOV     C,EA
00BA 9200        E     MOV     BIT_TMP,C
00BC C2AF              CLR     EA
00BE 75C7AA            MOV     TA,#0AAH
00C1 75C755            MOV     TA,#055H
00C4 F591              MOV     SFRS,A
00C6 A200        E     MOV     C,BIT_TMP
00C8 92AF              MOV     EA,C
00CA 43F310            ORL     SPCR,#010H
                                           ; SOURCE LINE # 21
00CD A2AF              MOV     C,EA
00CF 9200        E     MOV     BIT_TMP,C
00D1 C2AF              CLR     EA
00D3 75C7AA            MOV     TA,#0AAH
00D6 75C755            MOV     TA,#055H
00D9 F591              MOV     SFRS,A
00DB A200        E     MOV     C,BIT_TMP
00DD 92AF              MOV     EA,C
00DF 53F3FC            ANL     SPCR,#0FCH
                                           ; SOURCE LINE # 22
00E2 A2AF              MOV     C,EA
00E4 9200        E     MOV     BIT_TMP,C
00E6 C2AF              CLR     EA
00E8 75C7AA            MOV     TA,#0AAH
00EB 75C755            MOV     TA,#055H
00EE F591              MOV     SFRS,A
00F0 A200        E     MOV     C,BIT_TMP
00F2 92AF              MOV     EA,C
00F4 43F340            ORL     SPCR,#040H
                                           ; SOURCE LINE # 23
C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 82  

00F7 53F47F            ANL     SPSR,#07FH
                                           ; SOURCE LINE # 24
00FA 22                RET     
             ; FUNCTION SPI_Initial (END)

             ; FUNCTION _SPI_Tx (BEGIN)
                                           ; SOURCE LINE # 26
;---- Variable 'Data' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 27
                                           ; SOURCE LINE # 28
0000 8FF5              MOV     SPDR,R7
0002         ?C0002:
                                           ; SOURCE LINE # 29
0002 E5F4              MOV     A,SPSR
0004 30E7FB            JNB     ACC.7,?C0002
                                           ; SOURCE LINE # 30
0007 53F47F            ANL     SPSR,#07FH
                                           ; SOURCE LINE # 31
000A 22                RET     
             ; FUNCTION _SPI_Tx (END)

             ; FUNCTION _SPI_Rx (BEGIN)
                                           ; SOURCE LINE # 33
;---- Variable 'u8SpiWB' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 35
0000 8FF5              MOV     SPDR,R7
0002         ?C0005:
                                           ; SOURCE LINE # 36
0002 E5F4              MOV     A,SPSR
0004 30E7FB            JNB     ACC.7,?C0005
                                           ; SOURCE LINE # 37
;---- Variable 'u8SpiRB' assigned to Register 'R7' ----
0007 AFF5              MOV     R7,SPDR
                                           ; SOURCE LINE # 38
0009 53F47F            ANL     SPSR,#07FH
                                           ; SOURCE LINE # 39
                                           ; SOURCE LINE # 40
000C 22                RET     
             ; FUNCTION _SPI_Rx (END)

C51 COMPILER V9.60.7.0   SPI                                                               11/09/2023 19:35:49 PAGE 83  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


P0M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B1H  1
uint16_t . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
P1M1 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B3H  1
P0M2 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B2H  1
P0 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0080H  1
P1M2 . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B4H  1
P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
P2 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A0H  1
P3 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B0H  1
EA . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AFH  1
PWMCON0. . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D8H  1
int32_t. . . . . . . . . . . . . . . .  TYPEDEF  -----  LONG     -----  4
int16_t. . . . . . . . . . . . . . . .  TYPEDEF  -----  INT      -----  2
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
size_t . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
TA . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C7H  1
_SPI_Rx. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  u8SpiWB. . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
  u8SpiRB. . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
_SPI_Tx. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  Data . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
SPI_Initial. . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
INT8 . . . . . . . . . . . . . . . . .  TYPEDEF  -----  CHAR     -----  1
UINT32 . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_LONG   -----  4
UINT16 . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
BIT_TMP. . . . . . . . . . . . . . . .  EXTERN   DATA   BIT      -----  1
SCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0098H  1
TCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0088H  1
SPCR . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00F3H  1
SPDR . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00F5H  1
SFRS . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0091H  1
SCON_1 . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00F8H  1
SPSR . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00F4H  1
uint8_t. . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
INT32. . . . . . . . . . . . . . . . .  TYPEDEF  -----  LONG     -----  4
INT16. . . . . . . . . . . . . . . . .  TYPEDEF  -----  INT      -----  2
int8_t . . . . . . . . . . . . . . . .  TYPEDEF  -----  CHAR     -----  1
ADCCON0. . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E8H  1
I2CON. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C0H  1
BIT. . . . . . . . . . . . . . . . . .  TYPEDEF  -----  BIT      -----  1
T2CON. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
UINT8. . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1
uint32_t . . . . . . . . . . . . . . .  TYPEDEF  -----  U_LONG   -----  4


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    275    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
